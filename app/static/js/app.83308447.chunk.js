(this["webpackJsonp@dhis2/app-shell"]=this["webpackJsonp@dhis2/app-shell"]||[]).push([[127],{1540:function(e,t,a){e.exports={root:"ControlBar_root__iikeX",content:"ControlBar_content__26Z33",draghandle:"ControlBar_draghandle__27zum"}},1541:function(e,t,a){e.exports={link:"DashboardItemChip_link__21drZ",icon:"DashboardItemChip_icon__2hcIR",selected:"DashboardItemChip_selected__r00uP",unselected:"DashboardItemChip_unselected__2H9l2"}},1545:function(e,t,a){e.exports={button:"ClearButton_button__33ZbK",icon:"ClearButton_icon__vTJm3"}},1557:function(e,t,a){e.exports={showMore:"ShowMoreButton_showMore__3S3He",disabled:"ShowMoreButton_disabled__2FQNA"}},1558:function(e,t,a){e.exports={menuItem:"ContentMenuItem_menuItem__vbKn3",launchLink:"ContentMenuItem_launchLink__2Nql9",label:"ContentMenuItem_label__ANfH1",buttonInsert:"ContentMenuItem_buttonInsert__1joHg"}},1559:function(e,t,a){e.exports={showMoreButton:"CategorizedMenuGroup_showMoreButton__2RbRp"}},1560:function(e,t,a){},1573:function(e,t,a){e.exports={section:"EditTitleBar_section__LIaIC",titleDescription:"EditTitleBar_titleDescription__1YsU6",title:"EditTitleBar_title__3mUbt",description:"EditTitleBar_description__24U5X",itemSelector:"EditTitleBar_itemSelector__1cFEp"}},1725:function(e,t,a){e.exports={actions:"ViewTitleBar_actions__2UTRz",editLink:"ViewTitleBar_editLink__d_HzW",titleBar:"ViewTitleBar_titleBar__eiwJS",titleBarIcon:"ViewTitleBar_titleBarIcon__2cBxv"}},1728:function(e,t,a){},1740:function(e,t,a){e.exports={container:"FatalErrorBoundary_container__3SViR",icon:"FatalErrorBoundary_icon__2UbeP",message:"FatalErrorBoundary_message__3FzrY"}},1741:function(e,t,a){e.exports={deleteItemButton:"DeleteItemButton_deleteItemButton__2A_sR"}},1743:function(e,t,a){e.exports={itemWrap:"ItemHeader_itemWrap__cLsxA",itemHeaderWrap:"ItemHeader_itemHeaderWrap__puT6u",itemTitle:"ItemHeader_itemTitle__2gi2c",itemActionsWrap:"ItemHeader_itemActionsWrap__azLJO"}},200:function(e,t,a){"use strict";(function(e){a.d(t,"e",(function(){return r})),a.d(t,"f",(function(){return o})),a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"g",(function(){return d})),a.d(t,"c",(function(){return p})),a.d(t,"d",(function(){return m}));var n=a(12),s=a(207),i=a.n(s);function r(e){return Array.isArray(e)?e:[]}function o(e){return i()(e)?e:{}}function l(e){return e.reduce((e,t)=>(e[t.id]=t,e),{})}const c=(t,a)=>{if("undefined"!==typeof e.Intl&&Intl.DateTimeFormat){const e=a||"en";return new Intl.DateTimeFormat(e,{year:"numeric",month:"short",day:"numeric"}).format(new Date(t))}return t.substr(0,19).replace("T"," ")},d=(e,t)=>void 0===e||null===e?t:e,p=e=>{const t=e.Api.getApi(),a=t.baseUrl.indexOf("/api");return a>-1?t.baseUrl.slice(0,a):t.baseUrl},m=e=>Object(n.a)({},e,{id:void 0})}).call(this,a(195))},2030:function(e,t,a){e.exports={center:"LoadingMask_center__2SFwS"}},2031:function(e,t,a){e.exports={textDiv:"Item_textDiv__1U7zV"}},2032:function(e,t,a){},2033:function(e,t,a){e.exports={list:"Item_list__1_nkQ",item:"Item_item__3-6QE",itemicon:"Item_itemicon__QlouX",link:"Item_link___3c_q",deleteicon:"Item_deleteicon__3usrl",deletebutton:"Item_deletebutton__1DpBW"}},2036:function(e,t,a){},2038:function(e,t,a){e.exports={bar:"FilterBar_bar__1Ma3p"}},210:function(e,t,a){"use strict";a.d(t,"m",(function(){return S})),a.d(t,"h",(function(){return w})),a.d(t,"b",(function(){return C})),a.d(t,"e",(function(){return A})),a.d(t,"d",(function(){return N})),a.d(t,"c",(function(){return j})),a.d(t,"a",(function(){return x})),a.d(t,"g",(function(){return R})),a.d(t,"i",(function(){return M})),a.d(t,"l",(function(){return L})),a.d(t,"f",(function(){return F})),a.d(t,"k",(function(){return z})),a.d(t,"j",(function(){return k})),a.d(t,"u",(function(){return H})),a.d(t,"s",(function(){return U})),a.d(t,"t",(function(){return B})),a.d(t,"o",(function(){return P})),a.d(t,"n",(function(){return V})),a.d(t,"v",(function(){return G})),a.d(t,"p",(function(){return W})),a.d(t,"r",(function(){return Y})),a.d(t,"q",(function(){return K}));var n=a(6),s=a.n(n),i=a(604),r=a.n(i),o=a(617),l=a.n(o),c=a(618),d=a.n(c),p=a(1117),m=a.n(p),h=a(1118),u=a.n(h),E=a(1119),g=a.n(E),b=a(1120),v=a.n(b),y=a(1121),I=a.n(y),f=a(1122),D=a.n(f),_=a(435),T=a.n(_),O=a(200);const S="VISUALIZATION",w="REPORT_TABLE",C="CHART",A="MAP",N="EVENT_REPORT",j="EVENT_CHART",x="APP",R="REPORTS",M="RESOURCES",L="USERS",F="MESSAGES",z="TEXT",k="SPACER",H=e=>!!G[e.type].isVisualizationType,U=e=>"AGGREGATE"===G[e].domainType,B=e=>"TRACKER"===G[e].domainType,P=e=>G[e].defaultItemCount||5,V=e=>G[e].appName||"",G={[S]:{id:S,endPointName:"visualizations",propName:"visualization",pluralTitle:s.a.t("Visualizations"),appUrl:e=>"dhis-web-data-visualizer/#/".concat(e),appName:"Data Visualizer",defaultItemCount:10},[w]:{id:w,endPointName:"visualizations",propName:"visualization",pluralTitle:s.a.t("Pivot tables"),domainType:"AGGREGATE",isVisualizationType:!0,appUrl:e=>"dhis-web-data-visualizer/#/".concat(e),appName:"Data Visualizer"},[C]:{id:C,endPointName:"visualizations",propName:"visualization",pluralTitle:s.a.t("Charts"),domainType:"AGGREGATE",isVisualizationType:!0,appUrl:e=>"dhis-web-data-visualizer/#/".concat(e),appName:"Data Visualizer"},[A]:{id:A,endPointName:"maps",propName:"map",pluralTitle:s.a.t("Maps"),domainType:"AGGREGATE",isVisualizationType:!0,appUrl:e=>"dhis-web-maps/?id=".concat(e),appName:"Maps"},[N]:{id:N,endPointName:"eventReports",propName:"eventReport",pluralTitle:s.a.t("Event reports"),domainType:"TRACKER",isVisualizationType:!0,appUrl:e=>"dhis-web-event-reports/?id=".concat(e),appName:"Event Reports"},[j]:{id:j,endPointName:"eventCharts",propName:"eventChart",pluralTitle:s.a.t("Event charts"),domainType:"TRACKER",isVisualizationType:!0,appUrl:e=>"dhis-web-event-visualizer/?id=".concat(e),appName:"Event Visualizer"},[x]:{endPointName:"apps",propName:"appKey",pluralTitle:s.a.t("Apps")},[R]:{id:R,endPointName:"reports",propName:"reports",pluralTitle:s.a.t("Reports"),appUrl:(e,t)=>{switch(t){case"HTML":return"dhis-web-reports/#/standard-report/view/".concat(e);case"JASPER_REPORT_TABLE":case"JASPER_JDBC":default:return"api/reports/".concat(e,"/data.pdf?t=").concat((new Date).getTime())}}},[M]:{id:M,endPointName:"resources",propName:"resources",pluralTitle:s.a.t("Resources"),appUrl:e=>"api/documents/".concat(e,"/data")},[L]:{id:L,endPointName:"users",propName:"users",pluralTitle:s.a.t("Users"),appUrl:e=>"dhis-web-dashboard-integration/profile.action?id=".concat(e)},[z]:{id:z,propName:"text"},[F]:{propName:"messages"},[k]:{propName:"text"}},W=e=>G[e].endPointName,Y=(e,t,a)=>{let n;return e===x&&(n=t.launchUrl),G[e]&&G[e].appUrl&&(n="".concat(Object(O.c)(a),"/").concat(G[e].appUrl(t.id,t.type))),n},K=e=>{switch(e){case w:case N:case R:return r.a;case C:case j:return l.a;case A:return d.a;case x:return m.a;case M:return u.a;case L:return g.a;case z:return v.a;case F:return I.a;case k:return D.a;default:return T.a}}},2429:function(e,t,a){e.exports={content:"ConfirmDeleteDialog_content__EqswE"}},2430:function(e,t,a){},2433:function(e,t,a){},2439:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),i=a(485),r=a(956),o=a.n(r),l=a(196),c=a(3),d=a.n(c),p=a(12),m=a(244),h=a(8);let u=null;const E=({children:e,onInitialized:t,d2Config:a})=>{const{d2:s,d2Error:i}=(({d2Config:e={},onInitialized:t=(()=>{})})=>{const{baseUrl:a,apiVersion:s}=Object(h.b)(),[i,r]=Object(n.useState)(u),[o,l]=Object(n.useState)(void 0);return Object(n.useEffect)(()=>{u||Object(m.init)(Object(p.a)({appUrl:a,baseUrl:"".concat(a,"/api/").concat(s)},e)).then(async e=>{await t(e),u=e,r(e)}).catch(l)},[]),{d2:i,d2Error:o}})({onInitialized:t,d2Config:a});return e({d2:s,d2Error:i})};E.propTypes={children:c.func.isRequired,d2Config:c.object,onInitialized:c.func};var g=a(330),b=a(558),v=a(6),y=a.n(v),I=a(4);const f={id:"",username:"",uiLocale:"",isSuperuser:!1};const D=e=>e.user.username;var _=a(1069),T=a.n(_),O=a(358),S=a.n(O),w=a(200),C=a(210),A=a(291);const N="SPACER_ITEM_FOR_DASHBOARD_LAYOUT_CONVENIENCE",j=e=>e.type===C.k&&e.text!==N,x=e=>e.map(e=>{let t=null;return(e=>e.type===C.j)(e)?t=N:j(e)&&(t=e.text||"TEXT_ITEM_WITH_NO_CONTENT"),Object(p.a)({},e,t?{text:t}:{})}),R=e=>e.map(e=>{const t=(e=>e.type===C.k&&e.text===N)(e)?C.j:e.type,a=Object(A.g)(e.id),n=j(e)?"TEXT_ITEM_WITH_NO_CONTENT"===e.text?"":e.text:null;return Object(p.a)({},e,null!==n?{text:n}:{},{type:t},a)}),M={byId:null,items:[]},L=({state:e,dashboardId:t,prop:a,value:n})=>({byId:Object(p.a)({},e.byId,{[t]:Object(p.a)({},e.byId[t],{[a]:n})}),items:e.items});const F=e=>e.dashboards,z=(e,t)=>Object(w.f)(F(e).byId)[t],k=e=>null===F(e).byId,H=e=>Object(w.f)(F(e).byId),U=e=>F(e).items,B=e=>Object.values(H(e)).filter(e=>!0===e.starred),P=e=>Object.values(H(e)).filter(e=>!1===e.starred),V=e=>T()(e).map(e=>({id:e.id,name:e.name,displayName:e.displayName,description:e.description,displayDescription:e.displayDescription,starred:e.favorite,owner:e.user.name,created:e.created.split("T").join(" ").substr(0,16),lastUpdated:e.lastUpdated.split("T").join(" ").substr(0,16),access:e.access,numberOfItems:Object(w.e)(e.dashboardItems).length,dashboardItems:R(e.dashboardItems)}));var G=a(619),W=a.n(G),Y=a(621),K=a.n(Y);const q={},X={id:"",name:"",access:{},description:"",dashboardItems:[]};const Z=e=>e.editDashboard,J=e=>!K()(e.editDashboard),Q=e=>Object(w.f)(Z(e)).dashboardItems,$={};const ee=e=>e.editItemFilters;var te=a(243);var ae=Object(te.c)({id:(e=null,t)=>{switch(t.type){case"SET_SELECTED_ID":return Object(w.g)(t.value,null);default:return e}},isLoading:(e=!1,t)=>{switch(t.type){case"SET_SELECTED_ISLOADING":return Object(w.g)(t.value,!1);default:return e}},showDescription:(e=!1,t)=>{switch(t.type){case"SET_SELECTED_SHOWDESCRIPTION":return Object(w.g)(t.value,!1);default:return e}}});const ne=e=>e.selected,se=e=>ne(e).id,ie=e=>ne(e).isLoading,re=e=>ne(e).showDescription,oe=e=>({type:"REMOVE_EDIT_ITEM_FILTER",id:e}),le={};const ce=e=>e.itemFilters,de=e=>Object.keys(ce(e)),pe=e=>({type:"REMOVE_ITEM_FILTER",id:e});const me=e=>e.messages,he=()=>async e=>{try{const t=await(()=>{const e="/messageConversations?fields=".concat("id,messageCount,lastUpdated,messageType,displayName,read,messages[id,read,sender[id,displayName],text,lastUpdated]","&order=read:asc&pageSize=200");return Object(m.getInstance)().then(t=>t.Api.getApi().get(e)).catch(e=>console.log("Error:",e))})(),{messageConversations:a}=t;return e({type:"RECEIVED_MESSAGES",value:a})}catch(n){return t="Get Messages",a=n,console.log("Error in action ".concat(t,": ").concat(a)),a}var t,a},ue={message:{},duration:null,open:!1};const Ee=()=>({type:"CLOSE_SNACKBAR"});var ge=a(622),be=a.n(ge);const ve={},ye=e=>void 0===e||null===e;const Ie=(e,t)=>(e=>e.visualizations)(e)[t],fe=e=>({type:"ADD_VISUALIZATION",value:e});var De=a(363),_e=a.n(De),Te=a(624);const Oe=e=>console.log("Error: ",e),Se=({withFavorite:e}={})=>_e()(["id","type","shape","x","y","width~rename(w)","height~rename(h)","messages","text","appKey","".concat(Object(Te.d)().join(",")),e?"".concat(Object(Te.b)({withDimensions:e.withDimensions}).join(",")):""]),we=({withItems:e,withFavorite:t}={})=>_e()(["".concat(Object(Te.c)().join(",")),"description","displayDescription","favorite","user[".concat(Object(Te.c)({rename:!0}).join(","),"]"),"created","lastUpdated","access",e?"dashboardItems[".concat(Se({withFavorite:t}).join(","),"]"):""]),Ce=e=>Object(m.getInstance)().then(t=>t.models.dashboard.get(e,{fields:_e()(we({withItems:!0,withFavorite:{withDimensions:!1}})).join(",")})).catch(Oe);var Ae=a(1127),Ne=a.n(Ae);const je={name:"",type:"LOADING_DASHBOARD"},xe=({message:e})=>"object"===typeof e?s.a.createElement("span",null,"Loading ",s.a.createElement("span",{style:{fontWeight:800}},e.name)," ","dashboard"):e;var Re=Object(l.b)(e=>{const{message:t,duration:a,open:n}=(e=>e.snackbar||ue)(e);return{snackbarOpen:n,snackbarMessage:t,snackbarDuration:a}},{onCloseSnackbar:Ee})(e=>s.a.createElement(Ne.a,{style:{zIndex:10001},open:e.snackbarOpen,message:s.a.createElement(xe,{message:e.snackbarMessage}),autoHideDuration:e.snackbarDuration,onClose:e.onCloseSnackbar})),Me=a(267);const Le=e=>({type:"SET_SELECTED_ID",value:e}),Fe=e=>({type:"SET_SELECTED_ISLOADING",value:e}),ze=e=>async(t,a)=>{t(Fe(!0));const n=setTimeout(()=>{const n=Object(w.f)(z(a(),e)).displayName;ie(a())&&n&&(je.name=n,t({type:"RECEIVED_SNACKBAR_MESSAGE",value:{message:je,open:!0}}))},500),s=s=>{const i=V(s)[0];var r,o;t(Ye(Object(A.j)(i.dashboardItems))),r=D(a()),o=e,localStorage.setItem("dhis2.dashboard.current.".concat(r),o),i.dashboardItems.forEach(e=>{switch(e.type){case C.h:case C.b:case C.e:case C.d:case C.c:t(fe(Object(Me.a)(e)));break;case C.f:t(he())}});const l=a();return e===se(l)?J(l)?t({type:"CLEAR_ITEM_FILTERS"}):t({type:"SET_ITEM_FILTERS",filters:ee(l)}):(t({type:"CLEAR_EDIT_ITEM_FILTERS"}),t({type:"CLEAR_ITEM_FILTERS"})),t(Le(e)),t(Fe(!1)),clearTimeout(n),t({type:"CLOSE_SNACKBAR"}),s};try{return s(await t((e=>async t=>{try{const a=await Ce(e);return t(We(a)),Promise.resolve(a)}catch(a){return console.log("Error: ",a),a}})(e)))}catch(r){return i=r,console.log("Error: ",i),i}var i};var ke=a(409);const He=e=>console.log("Error: ",e),Ue=(e,t)=>{const{name:a,description:n,dashboardItems:s}=t;return e.name=a,e.description=n,e.dashboardItems=s.map(e=>Object.assign({},e,{width:e.w,height:e.h})),e.save().then(e=>e.response.uid)},Be=e=>{const t=e.type;delete e.type;const a=C.v[t].propName,n=Object(ke.generateUid)(),s=Object(A.g)(n);return{type:"ADD_DASHBOARD_ITEM",value:Object(p.a)({id:n,type:t,[a]:e.content},A.d,s)}},Pe=e=>({type:"UPDATE_DASHBOARD_ITEM",value:e}),Ve=e=>({type:"REMOVE_DASHBOARD_ITEM",value:e}),Ge=()=>async(e,t)=>{const a=Z(t()),n=Object(p.a)({},a,{dashboardItems:x(a.dashboardItems)});try{const t=n.id?await(s=n,Object(m.getInstance)().then(e=>e.models.dashboards.get(s.id).then(e=>Ue(e,s))).catch(He)):await(e=>Object(m.getInstance)().then(t=>{const a=t.models.dashboards.create();return Ue(a,e)}))(n);return e({type:"RECEIVED_NOT_EDITING"}),await e(ze(t)),Promise.resolve(t)}catch(i){(e=>{console.log("Error (Saving Dashboard): ",e)})(i)}var s},We=e=>({type:"ADD_DASHBOARDS",value:Object(w.a)(V(e))}),Ye=e=>({type:"SET_DASHBOARD_ITEMS",value:e}),Ke=()=>async e=>{const t=await Object(m.getInstance)().then(e=>e.models.dashboard.list({fields:[we().join(","),"dashboardItems[id]"].join(","),paging:"false"})).catch(Oe);var a;e((a=t.toArray(),{type:"SET_DASHBOARDS",value:Object(w.a)(V(a))}))},qe=(e,t)=>async a=>{try{return await((e,t)=>{const a="dashboards/".concat(e,"/favorite");Object(m.getInstance)().then(e=>{t?e.Api.getApi().post(a):e.Api.getApi().delete(a)})})(e,t),(e=>(a(((e,t)=>({type:"SET_DASHBOARD_STARRED",dashboardId:e,value:t}))(e,t)),e))(e)}catch(s){return n=s,console.log("Error (apiStarDashboard): ",n),n}var n},Xe=e=>async t=>{try{return await(e=>Object(m.getInstance)().then(t=>t.models.dashboards.get(e).then(e=>e.delete())).catch(Oe))(e),t({type:"RECEIVED_NOT_EDITING"}),t(Le()),t(Ye([])),await t(Ke()),Promise.resolve()}catch(a){return console.log("Error (deleteDashboard): ",a),a}};var Ze=Object(te.c)({userRows:(e=1,t)=>{switch(t.type){case"SET_CONTROLBAR_USER_ROWS":return Object(w.g)(t.value,1);default:return e}}});const Je=e=>(e=>e.controlBar)(e).userRows,Qe="controlBarRows",$e=async e=>await e.currentUser.dataStore.has("dashboard"),et=async(e,t)=>t?await e.currentUser.dataStore.get("dashboard"):await e.currentUser.dataStore.create("dashboard"),tt=async(e,t)=>{const a=await Object(m.getInstance)();(t||await et(a,$e)).set(Qe,e)},at=e=>({type:"SET_CONTROLBAR_USER_ROWS",value:e}),nt=()=>async e=>{try{const t=await(async()=>{const e=await Object(m.getInstance)(),t=await et(e,await $e(e));return t.keys&&t.keys.find(e=>e===Qe)?await t.get(Qe):(await tt(1,t),console.log("(These errors to /userDataStore/dashboard can be ignored)"),1)})();return void e(at(t))}catch(a){return t=a,console.log("Error (apiGetControlBarRows): ",t),t}var t};var st=a(241);const it=[Object(st.getDimensionById)(st.DIMENSION_ID_PERIOD),Object(st.getDimensionById)(st.DIMENSION_ID_ORGUNIT)];const rt=e=>e.dimensions,ot={keyDateFormat:"yyyy-MM-dd",keyAnalysisRelativePeriod:"LAST_12_MONTHS",keyAnalysisDigitGroupSeparator:"SPACE",displayNameProperty:"displayName",uiLocale:"en",rootOrganisationUnit:{}};const lt=e=>e.settings,ct=e=>lt(e).displayNameProperty,dt=e=>async(t,a)=>{try{const n=ct(a());return(e=>{t((e=>({type:"SET_DIMENSIONS",value:e}))(e))})((await Object(st.apiFetchDimensions)(e,n)).filter(e=>"CATEGORY"!==e.dimensionType||"CATEGORY"===e.dimensionType&&"ATTRIBUTE"===e.dataDimensionType))}catch(s){return n=s,console.log("Error (apiFetchDimensions): ",n),n}var n};var pt=a(1540),mt=a.n(pt);class ht extends s.a.Component{constructor(e){super(e),this.onStartDrag=()=>{this.setState({dragging:!0}),window.addEventListener("mousemove",this.onDrag),window.addEventListener("mouseup",this.onEndDrag)},this.onDrag=e=>{e.preventDefault(),e.stopPropagation();const t=e.clientY;this.props.onChangeHeight&&t!==this.props.height&&t>0&&requestAnimationFrame(()=>{this.props.onChangeHeight(t)})},this.onEndDrag=()=>{this.setState({dragging:!1}),window.removeEventListener("mousemove",this.onDrag),window.removeEventListener("mouseup",this.onEndDrag),this.props.onEndDrag&&this.props.onEndDrag()},this.state={dragging:!1}}renderDragHandle(){return"function"===typeof this.props.onChangeHeight?s.a.createElement("div",{className:mt.a.draghandle,style:{height:7},onMouseDown:this.onStartDrag}):null}render(){const e=Math.max(this.props.height,0)+7,t=Object.assign({height:e,backgroundColor:this.props.editMode?I.w.yellow050:I.w.white,paddingBottom:7},this.state.dragging?{transition:"none"}:{});return s.a.createElement("div",{style:t,className:mt.a.root},s.a.createElement("div",{className:mt.a.content},this.props.children),this.renderDragHandle())}}ht.defaultProps={onChangeHeight:null,onEndDrag:null};var ut=ht,Et=a(315),gt=a.n(Et);var bt=({className:e})=>s.a.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},s.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),s.a.createElement("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),s.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}));var vt=a(1541),yt=a.n(vt);var It=({starred:e,selected:t,label:a,dashboardId:n})=>{const i={selected:t};if(e){const e=t?yt.a.selected:yt.a.unselected;i.icon=s.a.createElement(bt,{className:"".concat(yt.a.icon," ").concat(e)})}return s.a.createElement(g.b,{className:yt.a.link,to:"/".concat(n),onClick:gt()(()=>(async(e,t)=>{const a=await Object(m.getInstance)(),n="dataStatistics?eventType=".concat(e,"&favorite=").concat(t);a.Api.getApi().post(n)})("DASHBOARD_VIEW",n),500)},s.a.createElement(I.e,i,a))};var ft=()=>s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:I.w.teal600,viewBox:"0 0 24 24"},s.a.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4 11h-3v3c0 .55-.45 1-1 1s-1-.45-1-1v-3H8c-.55 0-1-.45-1-1s.45-1 1-1h3V8c0-.55.45-1 1-1s1 .45 1 1v3h3c.55 0 1 .45 1 1s-.45 1-1 1z"})),Dt=a(736),_t=a.n(Dt),Tt=a(1546),Ot=a.n(Tt),St=a(1548),wt=a.n(St);var Ct=({className:e})=>s.a.createElement("svg",{className:e,fill:I.w.grey800,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},s.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),s.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),At=a(1545),Nt=a.n(At);var jt=({onClear:e})=>s.a.createElement("button",{className:Nt.a.button,onClick:e},s.a.createElement("span",null,s.a.createElement(Ct,{className:Nt.a.icon,color:"action"})));const xt=[{id:"ALL",value:"All users"},{id:"ME",value:"Created by me"},{id:"OTHERS",value:"Created by others"}],Rt=xt[0].id;var Mt=Object(te.c)({name:(e="",t)=>{switch(t.type){case"SET_DASHBOARDS_FILTER_NAME":return Object(w.g)(t.value,"");default:return e}},owner:(e=Rt,t)=>{switch(t.type){case"SET_DASHBOARDS_FILTER_OWNER":return Object(w.g)(t.value,"");default:return e}},order:(e="NAME:ASC",t)=>{switch(t.type){case"SET_DASHBOARDS_FILTER_ORDER":return Object(w.g)(t.value,"NAME:ASC");default:return e}}});const Lt=e=>e.dashboardsFilter,Ft=e=>Lt(e).name,zt={filterField:{fontSize:"14px",width:"200px",height:"30px",top:"-4px"},searchIcon:{color:I.w.grey700,width:"20px",height:"20px"}};class kt extends n.Component{constructor(e){super(e),this.setFilterValue=e=>{e.preventDefault(),this.props.onChangeName(e.target.value)},this.handleKeyUp=e=>{switch(e.keyCode){case 13:this.props.onKeypressEnter();break;case 27:this.props.onChangeName()}},this.state={value:""}}UNSAFE_componentWillReceiveProps(e){this.setState({value:e.name})}render(){const{classes:e,name:t,onChangeName:a}=this.props,n=s.a.createElement(Ot.a,{position:"start"},s.a.createElement(wt.a,{className:e.searchIcon})),i=""!==t&&null!==t?s.a.createElement(Ot.a,{position:"end"},s.a.createElement(jt,{onClear:()=>a()})):null;return s.a.createElement(_t.a,{className:e.filterField,placeholder:y.a.t("Search for a dashboard"),startAdornment:n,endAdornment:i,value:this.state.value,onChange:this.setFilterValue,onKeyUp:this.handleKeyUp})}}kt.defaultProps={name:"",onChangeName:Function.prototype};var Ht=Object(i.withStyles)(zt)(kt),Ut=a(1557),Bt=a.n(Ut);var Pt=({onClick:e,isMaxHeight:t,disabled:a})=>s.a.createElement("div",{style:{textAlign:"center"}},a?s.a.createElement("div",{className:Bt.a.disabled},y.a.t("Show more")):s.a.createElement("div",{className:Bt.a.showMore,onClick:e},t?y.a.t("Show less"):y.a.t("Show more")));const Vt=e=>40*e,Gt=e=>Vt(e)+24;var Wt=a(737),Yt=a.n(Wt);class Kt extends n.Component{constructor(...e){super(...e),this.state={rows:1},this.setInitialDashboardState=e=>{this.setState({rows:e,isMaxHeight:10===e})},this.onChangeHeight=e=>{const t=e-52,a=Math.max(1,(n=t,Math.floor((n-24)/40)));var n;if(a!==this.state.rows){const e=Math.min(a,10);this.props.onChangeHeight(e)}},this.onEndDrag=()=>tt(this.state.rows),this.onToggleMaxHeight=()=>{const e=10===this.state.rows?this.props.userRows:10;this.setState({rows:e,isMaxHeight:!this.state.isMaxHeight})},this.onSelectDashboard=()=>{this.props.history.push("/".concat(this.props.dashboards[0].id))}}componentDidMount(){this.setInitialDashboardState(this.props.userRows)}UNSAFE_componentWillReceiveProps(e){this.setInitialDashboardState(e.userRows)}render(){const{dashboards:e,name:t,selectedId:a,onChangeFilterName:n}=this.props,i=this.state.isMaxHeight?10:this.state.rows,r=Gt(i),o={padding:"".concat(10,"px 6px 0 6px"),overflowY:this.state.isMaxHeight?"auto":"hidden",height:Vt(i)+10};return s.a.createElement(ut,{height:r,onChangeHeight:this.onChangeHeight,onEndDrag:this.onEndDrag,editMode:!1},s.a.createElement("div",{style:o},s.a.createElement("div",{className:Yt.a.leftControls},s.a.createElement(g.b,{style:{display:"inline-block",textDecoration:"none",marginRight:10,position:"relative",top:"2px"},to:"/new"},s.a.createElement(ft,null)),s.a.createElement(Ht,{name:t,onChangeName:n,onKeypressEnter:this.onSelectDashboard})),Object(w.e)(e).map(e=>s.a.createElement(It,{key:e.id,label:e.displayName,starred:e.starred,dashboardId:e.id,selected:e.id===a}))),s.a.createElement(Pt,{onClick:this.onToggleMaxHeight,isMaxHeight:this.state.isMaxHeight,disabled:10===this.props.userRows}))}}const qt={onChangeHeight:at,onChangeFilterName:e=>({type:"SET_DASHBOARDS_FILTER_NAME",value:e})};var Xt=Object(b.g)(Object(l.b)(e=>({dashboards:H(e),name:Ft(e),userRows:Je(e),selectedId:se(e)}),qt,(e,t,a)=>{const n=Object.values(Object(w.f)(e.dashboards)),s=S()(n.filter(t=>t.displayName.toLowerCase().includes(e.name.toLowerCase())),"ASC","displayName");return Object(p.a)({},e,a,t,{dashboards:[...s.filter(e=>e.starred),...s.filter(e=>!e.starred)]})})(Kt));var Zt=Object(l.b)(e=>({userRows:Je(e)}))(e=>{const t=e.editMode?1:e.userRows,a=Gt(t);return s.a.createElement("div",{className:"page-container-top-margin",style:{marginTop:a}})}),Jt=a(375),Qt=a.n(Jt);var $t=({title:e})=>s.a.createElement(I.m,{dense:!0,key:e,disabled:!0,label:s.a.createElement("span",{style:{color:I.w.grey800,fontWeight:"600"}},e)});var ea=({className:e})=>s.a.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",fill:I.w.grey600,viewBox:"0 0 24 24"},s.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),s.a.createElement("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"})),ta=a(1558),aa=a.n(ta);const na=({url:e})=>s.a.createElement("a",{onClick:e=>e.stopPropagation(),className:aa.a.launchLink,target:"_blank",rel:"noopener noreferrer",href:e},s.a.createElement(ea,null)),sa=()=>s.a.createElement("button",{className:aa.a.buttonInsert},y.a.t("Insert"));var ia=({type:e,name:t,onInsert:a,url:n,visType:i})=>{const r=Object(C.q)(e),o=e===C.m?st.visTypeIcons[i]:s.a.createElement(r,{style:{fill:I.w.grey600}});return s.a.createElement(I.m,{dense:!0,onClick:a,label:s.a.createElement("div",{className:aa.a.menuItem},s.a.createElement("div",{className:aa.a.label},s.a.createElement("span",{style:{marginRight:"6px"}},o),s.a.createElement("span",null,t),n?s.a.createElement(na,{url:n}):null),s.a.createElement(sa,null))})};const ra=[{id:"additional",header:y.a.t("Additional items"),items:[{type:C.k,name:y.a.t("Text box"),content:""},{type:C.f,name:y.a.t("Messages"),content:"true"},{type:C.j,name:y.a.t("Spacer"),content:""}]}],oa=[C.m,C.e,C.d,C.c,C.l,C.g,C.i,C.a],la=[C.g,C.i,C.l];var ca=a(1559),da=a.n(ca);class pa extends n.Component{constructor(e){super(e),this.addItem=e=>()=>{const{type:t,acAddDashboardItem:a,tAddListItemContent:n}=this.props;if(t===C.a)a({type:t,content:e.key});else{const s={id:e.id,name:e.displayName||e.name};la.includes(t)?n(t,s):a({type:t,content:s})}},this.toggleSeeMore=()=>{this.setState({seeMore:!this.state.seeMore}),this.props.onChangeItemsLimit(this.props.type)},this.state={seeMore:!1}}render(){const{title:e,type:t,items:a,hasMore:n}=this.props;return s.a.createElement(s.a.Fragment,null,s.a.createElement($t,{title:e}),a.map(e=>{const a=Object(C.r)(t,e,this.context.d2);return s.a.createElement(ia,{key:e.id||e.key,type:t,visType:t===C.m?e.type:t,name:e.displayName||e.name,onInsert:this.addItem(e),url:a})}),n?s.a.createElement(I.m,{dense:!0,key:"showmore".concat(e),onClick:this.toggleSeeMore,label:s.a.createElement("button",{className:da.a.showMoreButton},this.state.seeMore?y.a.t("Show fewer"):y.a.t("Show more"))}):null,s.a.createElement(I.i,{margin:"8px 0px"}))}}pa.contextTypes={d2:d.a.object.isRequired};var ma=Object(l.b)(null,{acAddDashboardItem:Be,tAddListItemContent:(e,t)=>(a,n)=>{const s=n(),i=C.v[e].propName,r=Z(s).dashboardItems,o=r.findIndex(t=>t.type===e);let l;o>-1?(l=r[o],l[i].push(t),a(Pe(l))):(l={type:e,content:[t]},a(Be(l)))}})(pa);var ha=Object(l.b)(null,{acAddDashboardItem:Be})(({acAddDashboardItem:e,category:t})=>{const a=({type:t,content:a})=>()=>{e({type:t,content:a})};return s.a.createElement(s.a.Fragment,null,s.a.createElement($t,{title:t.header}),t.items.map(e=>s.a.createElement(ia,{key:e.type,type:e.type,name:e.name,onInsert:a(e)})))});a(1560);const ua=e=>s.a.createElement(I.j,{name:"Dashboard item search",label:y.a.t("Search for items to add to this dashboard"),type:"text",onChange:e.onChange,onFocus:e.onFocus,value:e.value});class Ea extends s.a.Component{constructor(e){super(e),this.closeList=()=>{this.setState({open:!1,filter:""})},this.openList=(e,t)=>{this.fetchItems(),this.setState({anchorEl:t.currentTarget,open:!0})},this.setFilter=(e,t)=>{this.setState({filter:t.target.value},this.fetchItems)},this.getCategorizedMenuGroups=()=>oa.filter(e=>{const t=C.v[e];return this.state.items&&this.state.items[t.endPointName]}).map(e=>{const t=C.v[e],a=Object(C.o)(e),n=this.state.items[t.endPointName],i=n.length>a,r=this.state.maxOptions.has(t.id)?n:n.slice(0,a);return s.a.createElement(ma,{key:e,type:e,title:t.pluralTitle,items:r,onChangeItemsLimit:this.fetchItems,hasMore:i})}),this.getSinglesMenuGroups=()=>ra.map(e=>s.a.createElement(ha,{key:e.id,category:e})),this.getMenuGroups=()=>this.getCategorizedMenuGroups().concat(this.getSinglesMenuGroups()),this.fetchItems=async e=>{if(e){const t=this.state.maxOptions;t.has(e)?t.delete(e):t.add(e),this.setState({maxOptions:t})}else this.setState({maxOptions:new Set});let t="?count=11";[...this.state.maxOptions.values()].length&&(t+="&max="+[...this.state.maxOptions.values()].join("&max="));const a=this.state.filter?"/".concat(this.state.filter):"";this.context.d2.Api.getApi().get("dashboards/q".concat(a).concat(t)).then(e=>this.setState({items:e})).catch(console.error)},this.state={anchorEl:null,open:!1,maxOptions:new Set,items:void 0,filter:""}}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(ua,{value:this.state.filter,onChange:this.setFilter,onFocus:this.openList}),s.a.createElement(Qt.a,{className:"dashboard-item-selector",open:this.state.open,onClose:this.closeList,anchorEl:this.state.anchorEl,anchorOrigin:{horizontal:"left",vertical:"bottom"},transformOrigin:{horizontal:"left",vertical:"top"},style:{height:"70vh"},PaperProps:{style:{width:"700px"}},disableAutoFocus:!0,disableEnforceFocus:!0,disableRestoreFocus:!0},s.a.createElement(I.l,{maxWidth:"700px"},this.getMenuGroups())))}}Ea.contextTypes={d2:d.a.object.isRequired};var ga=Ea,ba=a(1573),va=a.n(ba);const ya=({name:e,description:t,onChangeTitle:a,onChangeDescription:n})=>s.a.createElement("section",{className:va.a.section},s.a.createElement("div",{className:va.a.titleDescription},s.a.createElement(I.j,{className:va.a.title,name:"Dashboard title input",label:y.a.t("Dashboard title"),type:"text",onChange:(e,t)=>{a(t.target.value)},value:e}),s.a.createElement(I.v,{className:va.a.description,name:"Dashboard description input",label:y.a.t("Dashboard description"),onChange:(e,t)=>{n(t.target.value)},value:t})),s.a.createElement("div",{className:va.a.itemSelector},s.a.createElement(ga,null)));ya.defaultProps={name:"",description:""};const Ia={onChangeTitle:e=>({type:"RECEIVED_TITLE",value:e}),onChangeDescription:e=>({type:"RECEIVED_DESCRIPTION",value:e})};var fa=Object(l.b)(e=>{const t=Object(w.f)(Z(e));return{name:t.name,description:t.description}},Ia)(ya),Da=a(486),_a=a.n(Da),Ta=a(1726),Oa=a.n(Ta),Sa=a(1727),wa=a.n(Sa),Ca=a(1723),Aa=a.n(Ca),Na=a(1717),ja=a.n(Na),xa=a(1719),Ra=a.n(xa);const Ma=st.DIMENSION_ID_PERIOD,La=st.DIMENSION_ID_ORGUNIT;class Fa extends n.Component{constructor(...e){super(...e),this.onConfirm=e=>()=>this.props.onConfirm(e)}dialogContent(){const{displayNameProperty:e,dimension:t,selectedItems:a}=this.props,n=t.id,i={d2:this.context.d2,onSelect:this.props.onSelect,onDeselect:this.props.onDeselect,onReorder:this.props.onReorder};switch(n){case Ma:return s.a.createElement(st.PeriodDimension,Object.assign({selectedPeriods:a},i));case La:return s.a.createElement(st.OrgUnitDimension,Object.assign({displayNameProperty:e,ouItems:a},i));default:return s.a.createElement(st.DynamicDimension,Object.assign({selectedItems:a,dialogId:n,dialogTitle:t.name},i))}}render(){const{dimension:e,onClose:t}=this.props,a=e.id;return s.a.createElement(ja.a,{open:!!a,maxWidth:"lg",disableEnforceFocus:!0,onClose:t},a&&this.dialogContent(),s.a.createElement(Ra.a,null,s.a.createElement(I.a,{kind:"secondary",onClick:t},y.a.t("Cancel")),s.a.createElement(I.a,{kind:"primary",onClick:this.onConfirm(a)},y.a.t("Confirm"))))}}Fa.contextTypes={d2:d.a.object};var za=Fa;const ka={};const Ha=e=>e.activeModalDimension,Ua=e=>({type:"SET_ACTIVE_MODAL_DIMENSION",value:e});class Ba extends n.Component{constructor(e){super(e),this.openPanel=(e,t)=>{this.setState({anchorEl:t.currentTarget})},this.closePanel=()=>{this.setState({anchorEl:null})},this.closeDialog=()=>{this.setState({anchorEl:null}),this.props.clearActiveModalDimension()},this.selectDimension=e=>{this.props.setActiveModalDimension(this.props.dimensions.find(t=>t.id===e))},this.onSelectItems=({dimensionId:e,items:t})=>{this.props.setEditItemFilters(Object(p.a)({},this.props.selectedItems,{[e]:t}))},this.onDeselectItems=({dimensionId:e,itemIdsToRemove:t})=>{const a=(this.props.selectedItems[e]||[]).filter(e=>!t.includes(e.id));a.length?this.props.setEditItemFilters(Object(p.a)({},this.props.selectedItems,{[e]:a})):this.props.removeEditItemFilter(e)},this.onReorderItems=({dimensionId:e,itemIds:t})=>{const a=this.props.selectedItems[e]||[],n=t.map(e=>a.find(t=>t.id===e));this.props.setEditItemFilters(Object(p.a)({},this.props.selectedItems,{[e]:n}))},this.saveFilter=e=>{const t=this.props.selectedItems[e];t&&t.length?this.props.addItemFilter({id:e,value:[...t]}):this.props.removeItemFilter(e),this.closeDialog()},this.state={anchorEl:null}}render(){const{displayNameProperty:e,dimension:t,dimensions:a,selectedDimensions:n,selectedItems:i}=this.props;return s.a.createElement(s.a.Fragment,null,s.a.createElement(I.a,{onClick:this.openPanel},y.a.t("Add filter"),s.a.createElement(Aa.a,null)),s.a.createElement(Qt.a,{open:Boolean(this.state.anchorEl),anchorEl:this.state.anchorEl,anchorOrigin:{vertical:"bottom",horizontal:"left"},onClose:this.closePanel,style:{height:"100%"}},s.a.createElement(st.DimensionsPanel,{style:{width:"320px"},dimensions:a,onDimensionClick:this.selectDimension,selectedIds:n})),t?s.a.createElement(za,{displayNameProperty:e,dimension:t,selectedItems:i[t.id]||[],onSelect:this.onSelectItems,onDeselect:this.onDeselectItems,onReorder:this.onReorderItems,onClose:this.closeDialog,onConfirm:this.saveFilter}):null)}}var Pa=Object(l.b)(e=>({displayNameProperty:ct(e),dimension:Ha(e),dimensions:rt(e),selectedDimensions:de(e),selectedItems:ee(e)}),{clearActiveModalDimension:()=>({type:"CLEAR_ACTIVE_MODAL_DIMENSION"}),setActiveModalDimension:Ua,addItemFilter:e=>({type:"ADD_ITEM_FILTER",filter:e}),removeItemFilter:pe,removeEditItemFilter:oe,setEditItemFilters:e=>({type:"SET_EDIT_ITEM_FILTERS",filters:e})})(Ba),Va=a(1724),Ga=a.n(Va);class Wa extends n.Component{constructor(...e){super(...e),this.show=!1}toggle(){return this.show=!this.show,this.show}render(){return s.a.createElement("div",{onClick:()=>this.props.onClick(this.toggle())},s.a.createElement(Ga.a,{style:{fill:I.w.grey600}}))}}var Ya=Wa,Ka=a(1725),qa=a.n(Ka);const Xa=y.a.t("No description");class Za extends n.Component{constructor(e){super(e),this.toggleSharingDialog=()=>this.setState({sharingDialogIsOpen:!this.state.sharingDialogIsOpen}),this.state={sharingDialogIsOpen:!1}}render(){const{id:e,name:t,description:a,access:n,style:i,showDescription:r,starred:o,onStarClick:l,onInfoClick:c}=this.props,d=Object.assign({},i.title,{cursor:"default",userSelect:"text",top:"7px"}),p=o?Oa.a:wa.a;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:qa.a.titleBar},s.a.createElement("span",{style:d},t),s.a.createElement("div",{className:qa.a.actions},s.a.createElement("div",{className:qa.a.titleBarIcon,onClick:l},s.a.createElement(p,{style:{fill:I.w.grey600}})),s.a.createElement("div",{className:qa.a.titleBarIcon},s.a.createElement(Ya,{onClick:c})),s.a.createElement("div",{style:{marginLeft:"10px"}},n.update?s.a.createElement(g.b,{className:qa.a.editLink,to:"/".concat(e,"/edit")},s.a.createElement(I.a,null,y.a.t("Edit"))):null,n.manage?s.a.createElement("span",{style:{marginRight:"4px"}},s.a.createElement(I.a,{onClick:this.toggleSharingDialog},y.a.t("Share"))):null,s.a.createElement("span",{style:{marginRight:"4px"}},s.a.createElement(Pa,null))))),r?s.a.createElement("div",{className:"dashboard-description",style:Object.assign({paddingTop:"5px",paddingBottom:"5px"},i.description,a?{}:{color:"#888"})},a||Xa):null,e?s.a.createElement(_a.a,{d2:this.context.d2,id:e,type:"dashboard",open:this.state.sharingDialogIsOpen,onRequestClose:this.toggleSharingDialog}):null)}}Za.defaultProps={name:"",description:"",starred:!1,showDescription:!1,onInfoClick:null},Za.contextTypes={d2:d.a.object};var Ja=Object(l.b)(e=>{const t=se(e),a=Object(w.f)(z(e,t));return{id:t,name:a.displayName,description:a.displayDescription,dashboardItems:U(e),showDescription:re(e),starred:a.starred,access:Object(w.f)(a.access)}},null,(e,t,a)=>{const{id:n,starred:s,showDescription:i}=e,{dispatch:r}=t;return Object(p.a)({},e,a,{onStarClick:()=>r(qe(n,!s)),onInfoClick:()=>r({type:"SET_SELECTED_SHOWDESCRIPTION",value:!i})})})(Za);a(1728);const Qa={title:{position:"relative",fontSize:21,fontWeight:500,color:I.w.black,minWidth:50},description:{fontSize:14,color:I.w.grey800}};var $a=({edit:e})=>s.a.createElement("div",{className:"titlebar-wrapper",style:{padding:"20px 15px 5px 10px"}},e?s.a.createElement(fa,{style:Qa}):s.a.createElement(Ja,{style:Qa})),en=a(1729),tn=a.n(en),an=a(1738),nn=a.n(an),sn=a(1739);class rn extends n.Component{constructor(e,t){super(e),this.pluginCredentials=null,this.shouldPluginReload=e=>{const t=this.props.item===e.item,a=e.itemFilters!==this.props.itemFilters,n=Object(w.f)(this.props.visualization),s=Object(w.f)(e.visualization),i=n.id!==s.id||n.activeType!==s.activeType;return t&&(i||a)},this.reloadPlugin=e=>{if(Me.h(this.props.item,this.props.visualization)&&this.shouldPluginReload(e)){const t=Object(w.f)(e.visualization),a=this.props.visualization,n=a.activeType!==t.activeType||a.activeType!==this.props.item.type;(n||this.props.itemFilters!==e.itemFilters)&&(Me.j(this.props.item,t.activeType||this.props.item.type),Me.g(this.props.item,this.props.visualization,{credentials:this.pluginCredentials,activeType:n?a.activeType:null}))}},this.getActiveType=()=>this.props.visualization.activeType||this.props.item.type,this.d2=t.d2}componentDidMount(){var e;this.pluginCredentials=(e=this.d2,{baseUrl:Object(w.c)(e),auth:e.Api.getApi().defaultHeaders.Authorization}),Me.h(this.props.item,this.props.visualization)&&Me.g(this.props.item,this.props.visualization,{credentials:this.pluginCredentials,activeType:this.props.editMode?null:this.getActiveType(),options:this.props.options})}componentDidUpdate(e){this.reloadPlugin(e)}render(){const{classes:e,item:t,visualization:a,style:n}=this.props;return Me.h(t,a)?s.a.createElement("div",{id:Object(A.f)(t.id),style:n}):s.a.createElement("div",{className:e.textDiv},y.a.t("Unable to load the plugin for this item"))}}rn.contextTypes={d2:d.a.object},rn.defaultProps={style:{},item:{},itemFilters:{},options:{},visualization:{}};var on=rn;const ln=()=>s.a.createElement("svg",{height:"18",viewBox:"0 0 18 18",width:"18",xmlns:"http://www.w3.org/2000/svg"},s.a.createElement("path",{d:"m4 7.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm10 0c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm-5 0c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5z",fill:"#6e7a8a"})),cn=()=>s.a.createElement("svg",{height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",style:{margin:"3px 2px 0 2px"}},s.a.createElement("path",{d:"m20 2h-16c-1.1 0-1.99.9-1.99 2l-.01 18 4-4h14c1.1 0 2-.9 2-2v-12c0-1.1-.9-2-2-2zm-2 12h-12v-2h12zm0-3h-12v-2h12zm0-3h-12v-2h12z",fill:"#6e7a8a",fillRule:"evenodd",transform:"translate(-2 -2)"})),dn=()=>s.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",fill:I.w.grey600},s.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),s.a.createElement("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}));var pn=a(1740),mn=a.n(pn);class hn extends s.a.Component{constructor(e){super(e),this.state={errorFound:!1}}componentDidCatch(e,t){this.setState({errorFound:!0}),console.log("error: ",e),console.log("info: ",t)}render(){return this.state.errorFound?s.a.createElement("p",{className:mn.a.container},s.a.createElement("span",{className:mn.a.icon},s.a.createElement(dn,null)),s.a.createElement("span",{className:mn.a.message},y.a.t("There was a problem loading this dashboard item"))):this.props.children}}var un=hn,En=a(1742),gn=a.n(En),bn=a(1741),vn=a.n(bn);var yn=({onClick:e})=>s.a.createElement("button",{type:"button",className:vn.a.deleteItemButton,onClick:e,title:y.a.t("Delete item")},s.a.createElement(gn.a,{style:{fill:I.w.red500}})),In=a(1743),fn=a.n(In);const Dn=s.a.forwardRef(({itemId:e,acRemoveDashboardItem:t,actionButtons:a,title:n,editMode:i},r)=>s.a.createElement("div",{className:fn.a.itemHeaderWrap,ref:r},s.a.createElement("p",{className:fn.a.itemTitle},n),i?s.a.createElement("div",{className:fn.a.itemActionsWrap},s.a.createElement(yn,{onClick:()=>t(e)})):a&&s.a.createElement("div",{className:fn.a.itemActionsWrap},a)));Dn.displayName="ItemHeader";const _n={acRemoveDashboardItem:Ve};var Tn=Object(l.b)(e=>({editMode:J(e)}),_n,null,{forwardRef:!0})(Dn),On=a(604),Sn=a.n(On),wn=a(617),Cn=a.n(wn),An=a(618),Nn=a.n(An),jn=a(1744),xn=a.n(jn);const Rn={fill:I.w.grey600};var Mn=e=>{const[t,a]=Object(n.useState)(null),{item:i,visualization:r,onSelectActiveType:o,d2:l,activeType:c}=e,d=Object(C.t)(i.type),p=()=>{u(),o(d?C.d:C.h)},m=()=>{u(),o(d?C.c:C.b)},h=()=>{u(),o(C.e)},u=()=>a(null),E=r.type||i.type,g=!Object(st.isSingleValue)(E)&&!Object(st.isYearOverYear)(E)&&E!==st.VIS_TYPE_GAUGE&&E!==st.VIS_TYPE_PIE,b=e.activeFooter?y.a.t("Hide interpretations and details"):y.a.t("Show interpretations and details"),v=()=>s.a.createElement(s.a.Fragment,null,c!==C.b&&c!==C.c&&s.a.createElement(I.m,{dense:!0,label:y.a.t("View as Chart"),onClick:m,icon:s.a.createElement(Cn.a,{style:Rn})}),c!==C.h&&c!==C.d&&s.a.createElement(I.m,{dense:!0,label:y.a.t("View as Table"),onClick:p,icon:s.a.createElement(Sn.a,{style:Rn})}),Object(C.s)(i.type)&&c!==C.e&&s.a.createElement(I.m,{dense:!0,label:y.a.t("View as Map"),onClick:h,icon:s.a.createElement(Nn.a,{style:Rn})}));return Object(Me.h)(i,r)?s.a.createElement(s.a.Fragment,null,s.a.createElement(I.a,{small:!0,secondary:!0,onClick:(e,t)=>a(t.currentTarget)},s.a.createElement(ln,null)),t&&s.a.createElement(Qt.a,{open:Boolean(t),onClose:u,anchorEl:t},s.a.createElement(I.l,null,g&&s.a.createElement(s.a.Fragment,null,s.a.createElement(v,null),s.a.createElement(I.i,null)),s.a.createElement(I.m,{dense:!0,icon:s.a.createElement(xn.a,{style:{fill:"#6e7a8a"}}),label:y.a.t("Open in {{appName}} app",{appName:Object(C.n)(i.type)}),href:Object(Me.d)(i,l),target:"_blank"}),s.a.createElement(I.m,{dense:!0,icon:s.a.createElement(cn,null),label:b,onClick:()=>{e.onToggleFooter(),null!==t&&u()}})))):null},Ln=a(1745),Fn=a.n(Ln);const zn={scrollContainer:{overflowY:"auto",height:"340px"},line:{margin:"-1px 0px 0px",height:"1px",border:"none",backgroundColor:I.w.grey100}};class kn extends n.Component{render(){const e=Object(Me.c)(this.props.item);return s.a.createElement("div",{className:"dashboard-item-footer"},s.a.createElement("hr",{style:zn.line}),s.a.createElement("div",{style:zn.scrollContainer},s.a.createElement(Fn.a,{d2:this.context.d2,item:this.props.item,type:this.props.item.type.toLowerCase(),id:e,appName:"dashboard"})))}}kn.contextTypes={d2:d.a.object.isRequired};var Hn=kn;var Un=e=>{let t=void 0,a=void 0;return(...n)=>(t&&n.length===t.length&&n.every((e,a)=>e===t[a])||(t=n,a=e(...n)),a)},Bn=a(2030),Pn=a.n(Bn);var Vn=()=>s.a.createElement("div",{className:Pn.a.center},s.a.createElement(I.f,null)),Gn=a(2031),Wn=a.n(Gn);class Yn extends n.Component{constructor(e,t){super(e),this.state={showFooter:!1,configLoaded:!1,pluginIsLoaded:!1},this.applyFilters=(e,t)=>{if(!Object.keys(t).length)return e;const a=e.rows.map(e=>Object(p.a)({},e)),n=e.columns.map(e=>Object(p.a)({},e)),s=e.filters.map(e=>Object(p.a)({},e));return Object.keys(t).forEach(e=>{if(t[e]){let i=!1;[a,n,s].forEach(a=>a.filter(t=>t.dimension===e).forEach(a=>{i=!0,a.items=t[e]})),i||s.push({dimension:e,items:t[e]})}}),Object(p.a)({},e,{rows:a,columns:n,filters:s})},this.getUniqueKey=Un(()=>nn()()),this.pluginCredentials=null,this.getPluginComponent=()=>{const e=this.getActiveType(),t=this.memoizedGetVisualizationConfig(this.props.visualization,this.props.item.type,e);if(!t)return s.a.createElement("div",{className:Wn.a.textDiv},y.a.t("No data to display"));const a=this.props.item.originalHeight-this.headerRef.current.clientHeight-12-Os,n=Object(p.a)({},this.props,{visualization:t,classes:Wn.a,style:this.memoizedGetContentStyle(a,this.contentRef?this.contentRef.offsetHeight:null,this.props.editMode)});switch(e){case C.m:case C.b:case C.h:return s.a.createElement(s.a.Fragment,null,!this.state.pluginIsLoaded&&s.a.createElement("div",{style:n.style},s.a.createElement(Vn,null)),s.a.createElement(sn.a,{d2:this.d2,visualization:this.memoizedApplyFilters(t,n.itemFilters),onLoadingComplete:this.onLoadingComplete,forDashboard:!0,style:n.style}));case C.e:if(n.item.type===C.e){const e=n.visualization.mapViews.map(e=>e.layer.includes("thematic")||e.layer.includes("event")?this.memoizedApplyFilters(e,n.itemFilters):e);n.visualization=Object(p.a)({},n.visualization,{mapViews:e})}else n.visualization=this.memoizedApplyFilters(n.visualization,n.itemFilters);return n.options=Object(p.a)({},n.options,{hideTitle:!0}),s.a.createElement(on,n);default:return n.visualization=this.memoizedApplyFilters(n.visualization,n.itemFilters),s.a.createElement(on,n)}},this.onLoadingComplete=()=>{this.setState({pluginIsLoaded:!0})},this.onToggleFooter=()=>{this.setState({showFooter:!this.state.showFooter},this.props.onToggleItemExpanded(this.props.item.id))},this.onSelectActiveType=e=>{e!==this.getActiveType()&&(Me.j(this.props.item,this.getActiveType()),this.props.onSelectActiveType(this.props.visualization.id,e))},this.getActiveType=()=>this.props.visualization.activeType||this.props.item.type,this.pluginIsAvailable=()=>Me.h(this.props.item,this.props.visualization),this.getContentStyle=(e,t,a)=>({height:a&&t||e}),this.d2=t.d2,this.contentRef=s.a.createRef(),this.headerRef=s.a.createRef(),this.memoizedApplyFilters=Un(this.applyFilters),this.memoizedGetVisualizationConfig=Un(Me.f),this.memoizedGetContentStyle=Un(this.getContentStyle)}async componentDidMount(){this.props.onVisualizationLoaded(await Me.b(this.props.item)),this.setState({configLoaded:!0})}componentDidUpdate(e,t){!t.pluginIsLoaded||e.visualization===this.props.visualization&&e.itemFilters===this.props.itemFilters||this.setState({pluginIsLoaded:!1})}render(){const{item:e,editMode:t,itemFilters:a}=this.props,{showFooter:n}=this.state,i=s.a.createElement(Mn,{item:e,visualization:this.props.visualization,onSelectActiveType:this.onSelectActiveType,onToggleFooter:this.onToggleFooter,d2:this.d2,activeType:this.getActiveType(),activeFooter:this.state.showFooter});return s.a.createElement(s.a.Fragment,null,s.a.createElement(Tn,{title:Me.e(e),itemId:e.id,actionButtons:i,ref:this.headerRef}),s.a.createElement(un,null,s.a.createElement("div",{key:this.getUniqueKey(a),className:"dashboard-item-content",ref:e=>this.contentRef=e},this.state.configLoaded&&this.getPluginComponent())),!t&&n?s.a.createElement(Hn,{item:e}):null)}}Yn.contextTypes={d2:d.a.object},Yn.defaultProps={item:{},editMode:!1,onToggleItemExpanded:Function.prototype,itemFilters:{},visualization:{}};var Kn=Object(l.b)((e,t)=>({itemFilters:ce(e),visualization:Ie(e,Me.a(t.item).id)}),e=>({onVisualizationLoaded:t=>e(fe(t)),onSelectActiveType:(t,a,n)=>e(((e,t)=>({type:"SET_ACTIVE_VISUALIZATION_TYPE",id:e,activeType:t}))(t,a))}))(Yn);const qn={backgroundColor:I.w.grey200,border:"none",height:"1px",margin:"0px 0px 5px 0px"};var Xn=()=>s.a.createElement("hr",{style:qn});a(2032);const Zn={PRIVATE:"Private",VALIDATION_RESULT:"Validation",TICKET:"Ticket",SYSTEM:"System"},Jn={list:{listStyleType:"none",paddingLeft:"0px"},seeAll:{textAlign:"center",fontSize:"13px",marginBottom:"5px"},sender:{fontSize:"13px",lineHeight:"15px",margin:0,color:I.w.grey800},snippet:{color:I.w.grey800,fontSize:"13px",lineHeight:"15px",maxHeight:"30px",overflow:"hidden"}};class Qn extends n.Component{constructor(...e){super(...e),this.state={uiLocale:""},this.getMessageHref=e=>{const t=e?"#/".concat(e.messageType,"/").concat(e.id):"";return"".concat(this.context.baseUrl,"/dhis-web-messaging/").concat(t)},this.getMessageSender=e=>{const t=e.messages.slice(-1)[0];return t.sender?t.sender.displayName:""},this.getMessageItems=()=>{const e=this.props.editMode?null:"view";return this.props.messages.map(t=>{const a="PRIVATE"===t.messageType?this.getMessageSender(t):Zn[t.messageType],n=t.read?null:"unread",i=t.messages.slice(-1)[0],r=i.lastUpdated;return s.a.createElement("li",{className:"message-item ".concat(e),key:t.id,onClick:()=>{this.props.editMode||(document.location.href=this.getMessageHref(t))}},s.a.createElement("p",{className:"message-title ".concat(n)},t.displayName," (",t.messageCount,")"),s.a.createElement("p",{style:Jn.sender},a," - ",Object(w.b)(r,this.state.uiLocale)),s.a.createElement("p",{style:Jn.snippet},i.text))})}}async componentDidMount(){const e=await this.context.d2.currentUser.userSettings.get("keyUiLocale");this.setState({uiLocale:e})}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(Tn,{title:y.a.t("Messages"),itemId:this.props.item.id}),s.a.createElement(Xn,null),this.props.messages.length>0&&s.a.createElement("div",{className:"dashboard-item-content"},s.a.createElement("ul",{style:Jn.list},this.getMessageItems()),s.a.createElement("div",{style:Jn.seeAll},s.a.createElement("a",{href:this.getMessageHref()},y.a.t("See all messages")))))}}Qn.contextTypes={d2:d.a.object,baseUrl:d.a.string};var $n=Object(l.b)(e=>({messages:Object.values(me(e))}),null)(Qn),es=a(435),ts=a.n(es);var as=e=>s.a.createElement(s.a.Fragment,null,s.a.createElement(Tn,{title:y.a.t('Item type "{{type}}" not supported',{type:e.item.type}),itemId:e.item.id}),s.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"90%"}},s.a.createElement(ts.a,{style:{width:100,height:100,align:"center"},color:"disabled"})));var ns=({className:e})=>s.a.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:I.w.grey500},s.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),s.a.createElement("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"}));var ss=({className:e})=>s.a.createElement("svg",{className:e,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:I.w.red500},s.a.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),s.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}));var is=a(2033),rs=a.n(is);const os=e=>C.v[e.type].pluralTitle,ls=(e,t)=>{const{item:a,editMode:n,tRemoveListItemContent:i}=e,r=(e=>Object(w.e)(e[C.v[e.type].propName]).filter((e,t,a)=>a.findIndex(t=>t.id===e.id)===t))(a);return s.a.createElement(s.a.Fragment,null,s.a.createElement(Tn,{title:os(a),itemId:a.id}),s.a.createElement(Xn,null),s.a.createElement("div",{className:"dashboard-item-content"},s.a.createElement("ul",{className:rs.a.list},r.map(e=>s.a.createElement("li",{className:rs.a.item,key:e.id},s.a.createElement(ns,{className:rs.a.itemicon}),(e=>{const r=s.a.createElement("button",{className:rs.a.deletebutton,onClick:()=>i(a,e)},s.a.createElement(ss,{className:rs.a.deleteicon}));return s.a.createElement(s.a.Fragment,null,s.a.createElement("a",{className:rs.a.link,style:{color:I.w.grey900},href:Object(C.r)(a.type,e,t.d2)},e.name),n?r:null)})(e))))))};ls.contextTypes={d2:d.a.object};var cs=Object(l.b)(null,{tRemoveListItemContent:(e,t)=>a=>{const n=C.v[e.type].propName,s=e[n].filter(e=>e.id!==t.id);s.length?(e[n]=s,a(Pe(e))):a(Ve(e))}})(ls),ds=a(304);const ps={textDiv:{padding:"10px",whiteSpace:"pre-line",lineHeight:"20px"},textField:{fontSize:"14px",fontStretch:"normal",width:"90%",margin:"0 auto",display:"block",lineHeight:"24px"},container:{marginBottom:"20px",marginTop:"20px"}};var ms=Object(l.b)((e,t)=>{const a=(t.editMode?Q(e):U(e)).find(e=>e.id===t.item.id);return{text:a?a.text:""}},{acUpdateDashboardItem:Pe})(e=>{const{item:t,editMode:a,text:n,acUpdateDashboardItem:i}=e,r=e=>{const a=Object(p.a)({},t,{text:e.target.value});i(a)};return s.a.createElement(s.a.Fragment,null,a?s.a.createElement(s.a.Fragment,null,s.a.createElement(Tn,{title:y.a.t("Text item"),itemId:t.id}),s.a.createElement(Xn,null),s.a.createElement("div",{className:"dashboard-item-content"},s.a.createElement(ds.Editor,{onEdit:r},s.a.createElement(_t.a,{value:n,multiline:!0,fullWidth:!0,style:ps.textField,placeholder:y.a.t("Add text here"),onChange:r})))):(()=>{const e=Object.assign({},ps.textField,ps.textDiv);return s.a.createElement("div",{className:"dashboard-item-content",style:ps.container},s.a.createElement(ds.Parser,{style:e},n))})())});const hs=(e,t,a)=>{let n="".concat(e.launchUrl,"?dashboardItemId=").concat(t.id);if(a&&a.ou&&a.ou.length){const e=a.ou.map(e=>e.split("/").slice(-1)[0]);n+="&userOrgUnit=".concat(e.join(","))}return n},us=({item:e,itemFilters:t},a)=>{let n;const i=e.appKey;return i&&(n=a.d2.system.installedApps.find(e=>e.key===i)),n&&n.name&&n.launchUrl?s.a.createElement(s.a.Fragment,null,s.a.createElement(Tn,{title:n.name,itemId:e.id}),s.a.createElement(Xn,null),s.a.createElement("iframe",{title:n.name,src:hs(n,e,t),className:"dashboard-item-content",style:{border:"none"}})):s.a.createElement(s.a.Fragment,null,s.a.createElement(Tn,{title:"".concat(i," app not found")}),s.a.createElement(Xn,null),s.a.createElement("div",{className:"dashboard-item-content",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"90%"}},s.a.createElement(ts.a,{color:"disabled",disabled:!0,style:{width:100,height:100,align:"center"}})))};us.contextTypes={d2:d.a.object};var Es=Object(l.b)(e=>({itemFilters:ce(e)}))(us);const gs={margin:"21px 28px",fontSize:"14px",lineHeight:"18px",color:I.w.grey600};var bs=e=>s.a.createElement(s.a.Fragment,null,s.a.createElement(Tn,{title:y.a.t("Spacer"),itemId:e.item.id}),s.a.createElement("p",{style:gs},y.a.t("Use a spacer to create empty vertical space between other dashboard items.")));const vs=e=>{const t=(e=>{switch(e){case C.m:case C.h:case C.b:case C.e:case C.c:case C.d:return Kn;case C.f:return $n;case C.g:case C.i:case C.l:return cs;case C.k:return ms;case C.j:return bs;case C.a:return Es;default:return as}})(e.item.type);return s.a.createElement(t,{item:e.item,editMode:e.editMode,itemFilters:e.editMode?le:e.itemFilters,onToggleItemExpanded:e.onToggleItemExpanded})};var ys=({text:e})=>s.a.createElement("div",{style:{padding:"50px 10px",textAlign:"center",fontSize:"15px",fontWeight:500,color:I.w.grey600}},e),Is=(a(2034),a(2035),a(2036),a(2435)),fs=a(887),Ds=a.n(fs);class _s extends n.Component{constructor(...e){super(...e),this.state={shouldLoad:!1},this.containerRef=null,this.shouldLoadHandler=null}checkShouldLoad(){const e=this.props.bufferFactor*window.innerHeight;if(!this.containerRef)return;const t=this.containerRef.getBoundingClientRect();console.log(t),t.bottom>-e&&t.top<window.innerHeight+e&&(this.setState({shouldLoad:!0}),this.removeHandler())}registerHandler(){this.shouldLoadHandler=gt()(()=>this.checkShouldLoad(),this.props.debounceMs),[window,...document.getElementsByClassName("app-shell-app")].forEach(e=>{e.addEventListener("scroll",this.shouldLoadHandler)})}removeHandler(){[window,...document.getElementsByClassName("app-shell-app")].forEach(e=>{e.removeEventListener("scroll",this.shouldLoadHandler)})}componentDidMount(){this.registerHandler(),this.checkShouldLoad()}componentWillUnmount(){this.removeHandler()}render(){const e=this.props,{children:t,className:a,style:n}=e,i=Object(Is.a)(e,["children","className","style"]),{shouldLoad:r}=this.state,o=Ds()(i,["onMouseDown","onTouchStart","onMouseUp","onTouchEnd"]);return s.a.createElement("div",Object.assign({ref:e=>this.containerRef=e,style:n,className:a},o),r&&t)}}_s.defaultProps={debounceMs:100,bufferFactor:.25};var Ts=_s;const Os=4;class Ss extends n.Component{constructor(...e){super(...e),this.state={expandedItems:{}},this.onToggleItemExpanded=e=>{const t="boolean"===typeof this.state.expandedItems[e]&&this.state.expandedItems[e],a=Object(p.a)({},this.state.expandedItems);a[e]=!t,this.setState({expandedItems:a})},this.onRemoveItem=e=>{this.props.acRemoveDashboardItem(e)},this.onLayoutChange=e=>{this.props.edit&&this.props.acUpdateDashboardLayout(e)},this.onResizeStop=(e,t,a)=>{Object(A.i)(a.i);const n=this.props.dashboardItems.find(e=>e.id===a.i);n&&Object(C.u)(n)&&Object(Me.i)(n)},this.onRemoveItemWrapper=e=>()=>this.onRemoveItem(e),this.adjustHeightForExpanded=e=>{const t=this.state.expandedItems[e.id];return t&&!0===t?Object.assign({},e,{h:e.h+17}):e},this.getItemComponent=e=>{const t=[e.type,this.props.edit?"edit":"view"].join(" ");return s.a.createElement(Ts,{key:e.i,className:t},s.a.createElement(vs,{item:e,editMode:this.props.edit,onToggleItemExpanded:this.onToggleItemExpanded}))},this.getItemComponents=e=>e.map(e=>this.getItemComponent(e))}UNSAFE_componentWillReceiveProps(e){e.edit&&this.setState({expandedItems:{}})}render(){const{edit:e,isLoading:t,dashboardItems:a}=this.props;if(!t&&!a.length)return s.a.createElement(ys,{text:y.a.t("There are no items on this dashboard")});const n=e?a:a.map(this.adjustHeightForExpanded);return s.a.createElement("div",{className:"grid-wrapper"},t?s.a.createElement(I.s,null,s.a.createElement(I.f,null)):null,s.a.createElement(tn.a,{onLayoutChange:this.onLayoutChange,onResizeStop:this.onResizeStop,className:"layout",layout:n,margin:A.c,cols:Object(A.e)(),rowHeight:A.b,width:window.innerWidth,compactType:A.a,isDraggable:e,isResizable:e,draggableCancel:"input,textarea"},this.getItemComponents(n)))}}Ss.defaultProps={dashboardItems:[]};const ws={acUpdateDashboardLayout:e=>({type:"RECEIVED_DASHBOARD_LAYOUT",value:e}),acRemoveDashboardItem:Ve};var Cs=Object(l.b)((e,t)=>{const a=t.edit?Z(e):z(e,se(e)),n=t.edit?Q(e):U(e);return{isLoading:ie(e)||!a,dashboardItems:n}},ws,(e,t,a)=>{const n=Object(w.e)(e.dashboardItems).filter(A.h);return Object(p.a)({},t,{edit:a.edit,isLoading:e.isLoading,dashboardItems:n,onItemResize:A.i})})(Ss),As=a(2037);const Ns={badgeContainer:{margin:"2px",padding:"0 16px",borderRadius:"4px",color:I.w.white,backgroundColor:"#212934",height:36,display:"flex",alignItems:"center"},badge:{fontSize:"13px",cursor:"pointer",whiteSpace:"nowrap"},badgeRemove:{fontSize:"12px",textDecoration:"underline",marginLeft:"24px",cursor:"pointer"}};class js extends n.Component{constructor(...e){super(...e),this.onClick=e=>()=>this.props.onClick(e),this.onRemove=e=>()=>this.props.onRemove(e)}render(){const{data:e}=this.props;return s.a.createElement("div",{style:Ns.badgeContainer},s.a.createElement("span",{style:Ns.badge,onClick:this.onClick(e.id)},"".concat(e.name,": ").concat(e.values.length>1?y.a.t("{{count}} selected",{count:e.values.length}):e.values[0].name)),s.a.createElement("span",{style:Ns.badgeRemove,onClick:this.onRemove(e.id)},y.a.t("Remove")))}}js.defaultProps={onClick:Function.prototype,onRemove:Function.prototype};var xs=js,Rs=a(2038),Ms=a.n(Rs);class Ls extends n.Component{constructor(...e){super(...e),this.onBadgeRemove=e=>{this.props.removeItemFilter(e),this.props.removeEditItemFilter(e)},this.onBadgeClick=e=>{this.props.setActiveModalDimension({id:e,name:this.props.filters.find(t=>t.id===e).name})}}render(){const{filters:e,userRows:t}=this.props,a=Gt(t)+10;return e.length?s.a.createElement("div",{className:Ms.a.bar,style:{top:a}},e.map(e=>s.a.createElement(xs,{key:e.id,data:e,onClick:this.onBadgeClick,onRemove:this.onBadgeRemove}))):null}}Ls.defaultProps={filters:[],removeItemFIlter:Function.prototype,removeEditItemFilter:Function.prototype};const Fs=Object(As.a)([ce,rt],(e,t)=>Object.keys(e).reduce((a,n)=>(a.push({id:n,name:t.find(e=>e.id===n).name,values:e[n].map(e=>({id:e.id,name:e.displayName||e.name}))}),a),[]));var zs=Object(l.b)(e=>({filters:Fs(e),userRows:Je(e)}),{setActiveModalDimension:Ua,removeItemFilter:pe,removeEditItemFilter:oe})(Ls);var ks=e=>s.a.createElement(s.a.Fragment,null,s.a.createElement($a,{edit:e.editMode}),s.a.createElement(zs,null),s.a.createElement(Cs,{edit:e.editMode}));const Hs=({hasDashboardContent:e,dashboardsIsEmpty:t})=>{const a=t?y.a.t("No dashboards found. Use the + button to create a new dashboard."):y.a.t("Requested dashboard not found");return e?s.a.createElement(ks,{editMode:!1}):s.a.createElement(ys,{text:a})};var Us=Object(l.b)(e=>{const t=H(e);return{id:se(e),dashboardsIsEmpty:K()(t),dashboardsLoaded:!k(e)}})(({id:e,dashboardsIsEmpty:t,dashboardsLoaded:a})=>{const n=e&&!t,i=!a||null===e;return s.a.createElement(s.a.Fragment,null,s.a.createElement(Xt,null),s.a.createElement(Zt,null),s.a.createElement("div",{className:"dashboard-wrapper"},i?null:s.a.createElement(Hs,{hasDashboardContent:n,dashboardsIsEmpty:t})))}),Bs=a(2039),Ps=a.n(Bs),Vs=a(2429),Gs=a.n(Vs);var Ws=({dashboardName:e,onDeleteConfirmed:t,onContinueEditing:a,open:n})=>{const i=[s.a.createElement(I.a,{key:"cancel",secondary:!0,onClick:a},y.a.t("Cancel")),s.a.createElement(I.a,{key:"delete",destructive:!0,onClick:t},y.a.t("Delete"))];return n&&s.a.createElement(I.n,{onClose:a,small:!0,position:"middle"},s.a.createElement(I.q,null,y.a.t("Delete dashboard")),s.a.createElement(I.p,null,s.a.createElement("span",{className:Gs.a.content},y.a.t('Deleting dashboard "{{ dashboardName }}" will remove it for all users. This action cannot be undone. Are you sure you want to permanently delete this dashboard?',{dashboardName:e}))),s.a.createElement(I.o,null,s.a.createElement(I.b,null,i)))};const Ys={height:40,paddingTop:"15px",marginLeft:"15px",marginRight:"15px"};class Ks extends n.Component{constructor(...e){super(...e),this.state={translationDialogIsOpen:!1,dashboardModel:void 0,confirmDeleteDialogOpen:!1,redirectUrl:void 0},this.onConfirmDelete=()=>{this.setState({confirmDeleteDialogOpen:!0})},this.onSave=()=>{this.props.onSave().then(e=>{this.setState({redirectUrl:"/".concat(e)})})},this.onDiscard=()=>{this.props.onDiscardChanges();const e=this.props.dashboardId?"/".concat(this.props.dashboardId):"/";this.setState({redirectUrl:e})},this.onContinueEditing=()=>{this.setState({confirmDeleteDialogOpen:!1})},this.onDeleteConfirmed=()=>{this.setState({confirmDeleteDialogOpen:!1}),this.props.onDelete(this.props.dashboardId).then(()=>{this.setState({redirectUrl:"/"})})},this.onTranslationsSaved=async e=>{if(e&&e.length){const t=await this.context.d2.currentUser.userSettings.get("keyDbLocale"),a=e.find(e=>e.locale===t&&"NAME"===e.property);a&&a.value&&this.props.onTranslate(this.props.dashboardId,a.value)}},this.fetchDashboardModel=()=>{this.props.dashboardId&&!this.state.dashboardModel&&Ce(this.props.dashboardId).then(e=>this.setState({dashboardModel:e}))},this.toggleTranslationDialog=()=>{this.setState({translationDialogIsOpen:!this.state.translationDialogIsOpen})},this.confirmDeleteDialog=()=>this.props.deleteAccess&&this.props.dashboardId?s.a.createElement(Ws,{dashboardName:this.props.dashboardName,onDeleteConfirmed:this.onDeleteConfirmed,onContinueEditing:this.onContinueEditing,open:this.state.confirmDeleteDialogOpen}):null,this.translationDialog=()=>this.state.dashboardModel&&this.state.dashboardModel.id?s.a.createElement(Ps.a,{className:"translation-dialog",d2:this.context.d2,open:this.state.translationDialogIsOpen,onRequestClose:this.toggleTranslationDialog,objectToTranslate:this.state.dashboardModel,fieldsToTranslate:["name","description"],onTranslationSaved:this.onTranslationsSaved,onTranslationError:e=>console.log("translation update error",e)}):null}componentDidMount(){this.fetchDashboardModel()}componentDidUpdate(){this.fetchDashboardModel()}render(){if(this.state.redirectUrl)return s.a.createElement(b.a,{to:this.state.redirectUrl});const{dashboardId:e,deleteAccess:t,updateAccess:a}=this.props,n=Gt(1),i=a?y.a.t("Exit without saving"):y.a.t("Go to dashboards");return s.a.createElement(s.a.Fragment,null,s.a.createElement(ut,{height:n,editMode:!0},s.a.createElement("div",{style:Ys},a?s.a.createElement("div",{className:Yt.a.leftControls},s.a.createElement("span",{style:{marginRight:"15px"}},s.a.createElement(I.a,{primary:!0,onClick:this.onSave},y.a.t("Save changes"))),e?s.a.createElement("span",{style:{marginRight:"15px"}},s.a.createElement(I.a,{onClick:this.toggleTranslationDialog},y.a.t("Translate"))):null,e&&t?s.a.createElement(I.a,{onClick:this.onConfirmDelete},y.a.t("Delete")):null):null,s.a.createElement("div",{className:Yt.a.rightControls},s.a.createElement(I.a,{secondary:!0,onClick:this.onDiscard},i)))),this.translationDialog(),this.confirmDeleteDialog())}}Ks.contextTypes={d2:d.a.object};var qs=Object(l.b)(e=>{const t=Z(e);let a,n;return(e=>!K()(e.editDashboard)&&""===Z(e).id)(e)?(a=!0,n=!0):(n=!!t.access&&t.access.update,a=!!t.access&&t.access.delete),{dashboardId:t.id,dashboardName:t.name,deleteAccess:a,updateAccess:n}},e=>({onSave:()=>e(Ge()).then(e=>e),onDelete:t=>e(Xe(t)),onDiscardChanges:()=>e({type:"RECEIVED_NOT_EDITING"}),onTranslate:(t,a)=>e(((e,t)=>({type:"SET_DASHBOARD_DISPLAY_NAME",dashboardId:e,value:t}))(t,a))}))(Ks);const Xs=({updateAccess:e})=>e?s.a.createElement(ks,{editMode:!0}):s.a.createElement(ys,{text:y.a.t("No access")});class Zs extends n.Component{constructor(...e){super(...e),this.state={initialized:!1},this.initEditDashboard=()=>{this.props.dashboard&&(this.setState({initialized:!0}),this.props.setEditDashboard(this.props.dashboard,this.props.items))},this.getDashboardContent=()=>{const e=!this.props.dashboardsLoaded||null===this.props.id;return s.a.createElement("div",{className:"dashboard-wrapper"},e?null:s.a.createElement(Xs,{updateAccess:this.props.updateAccess}))}}componentDidMount(){this.initEditDashboard()}componentDidUpdate(){this.state.initialized||this.initEditDashboard()}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(qs,null),s.a.createElement(Zt,{editMode:!0}),this.getDashboardContent())}}var Js=Object(l.b)(e=>{const t=se(e),a=t?z(e,t):null;return{dashboard:a,id:t,updateAccess:!(!a||!a.access)&&a.access.update,items:U(e),dashboardsLoaded:!k(e)}},{setEditDashboard:(e,t)=>({type:"RECEIVED_EDIT_DASHBOARD",value:Object(p.a)({},e,{dashboardItems:t})})})(Zs);class Qs extends n.Component{componentDidMount(){this.props.setNewDashboard()}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(qs,null),s.a.createElement(Zt,{editMode:!0}),s.a.createElement("div",{className:"dashboard-wrapper"},s.a.createElement(ks,{editMode:!0})))}}var $s=Object(l.b)(null,{setNewDashboard:()=>({type:"START_NEW_DASHBOARD"})})(Qs);class ei extends n.Component{constructor(...e){super(...e),this.setDashboard=()=>{if(this.props.dashboardsLoaded){const e=this.props.match.params.dashboardId||null;this.props.selectDashboard(e),this.scrollToTop()}},this.scrollToTop=()=>{window.scrollTo(0,0)}}componentDidMount(){this.setDashboard()}componentDidUpdate(){this.setDashboard()}render(){switch(this.props.mode){case"edit":return s.a.createElement(Js,null);case"new":return s.a.createElement($s,null);default:return s.a.createElement(Us,null)}}}var ti=Object(l.b)(e=>({dashboardsLoaded:!k(e)}),{selectDashboard:e=>async(t,a)=>{try{const n=a();let i=null;if(e)i=z(n,e)||null;else{const e=(s=D(n),localStorage.getItem("dhis2.dashboard.current.".concat(s))||void 0),t=z(n,e);i=e&&t?t:(e=>[...S()(B(e),"ASC","displayName"),...S()(P(e),"ASC","displayName")])(n)[0]}t(i?ze(i.id):Le())}catch(i){return n=i,console.log("Error (apiFetchDashboards): ",n),n}var n,s}})(ei);a(2430);class ai extends n.Component{componentDidMount(){this.props.setCurrentUser(this.props.d2.currentUser),this.props.fetchDashboards(),this.props.setControlBarRows(),this.props.setDimensions(this.props.d2)}getChildContext(){return{baseUrl:this.props.baseUrl,i18n:y.a,d2:this.props.d2}}render(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(I.h,{colors:!0,spacers:!0}),s.a.createElement(g.a,null,s.a.createElement(b.d,null,s.a.createElement(b.b,{exact:!0,path:"/",render:e=>s.a.createElement(ti,Object.assign({},e,{mode:"view"}))}),s.a.createElement(b.b,{exact:!0,path:"/new",render:e=>s.a.createElement(ti,Object.assign({},e,{mode:"new"}))}),s.a.createElement(b.b,{exact:!0,path:"/:dashboardId",render:e=>s.a.createElement(ti,Object.assign({},e,{mode:"view"}))}),s.a.createElement(b.b,{exact:!0,path:"/:dashboardId/edit",render:e=>s.a.createElement(ti,Object.assign({},e,{mode:"edit"}))}))),s.a.createElement(Re,null))}}ai.childContextTypes={baseUrl:d.a.string,i18n:d.a.object,d2:d.a.object};var ni=Object(l.b)(null,e=>({setCurrentUser:t=>e({type:"RECEIVED_USER",value:t}),fetchDashboards:()=>e(Ke()),setControlBarRows:()=>e(nt()),setDimensions:t=>e(dt(t))}))(ai),si=(a(2431),a(2432));var ii=(e="LIST",t)=>{switch(t.type){case"SET_STYLE":return Object(w.g)(t.value,"LIST");default:return e}};var ri=Object(te.c)({dashboards:(e=M,t)=>{switch(t.type){case"SET_DASHBOARDS":return{byId:t.value,items:[]};case"ADD_DASHBOARDS":return Object(p.a)({},e,{byId:Object(p.a)({},e.byId,t.value)});case"SET_DASHBOARD_STARRED":return L({state:e,dashboardId:t.dashboardId,prop:"starred",value:t.value});case"SET_DASHBOARD_DISPLAY_NAME":return L({state:e,dashboardId:t.dashboardId,prop:"displayName",value:t.value});case"SET_DASHBOARD_ITEMS":return Object(p.a)({},e,{items:t.value});default:return e}},selected:ae,dashboardsFilter:Mt,controlBar:Ze,visualizations:(e=ve,t)=>{switch(t.type){case"ADD_VISUALIZATION":return Object(p.a)({},e,{[t.value.id]:be()(Object(p.a)({},Object(w.f)(e[t.value.id]),t.value),ye)});case"SET_ACTIVE_VISUALIZATION_TYPE":return Object(p.a)({},e,{[t.id]:be()(Object(p.a)({},Object(w.f)(e[t.id]),{activeType:t.activeType}),ye)});default:return e}},messages:(e={},t)=>{switch(t.type){case"RECEIVED_MESSAGES":{const a=Object(w.a)(t.value);return W()(e,{$merge:a})}default:return e}},user:(e=f,t)=>{switch(t.type){case"RECEIVED_USER":return{id:(a=t.value).id,username:a.username,uiLocale:a.settings.keyUiLocale,isSuperuser:a.authorities.has("ALL")};default:return e}var a},editDashboard:(e=q,t)=>{switch(t.type){case"RECEIVED_EDIT_DASHBOARD":{const e={};return Object.keys(X).map(a=>e[a]=t.value[a]),e}case"RECEIVED_NOT_EDITING":return q;case"START_NEW_DASHBOARD":return X;case"RECEIVED_TITLE":return Object.assign({},e,{name:t.value});case"RECEIVED_DESCRIPTION":return Object.assign({},e,{description:t.value});case"ADD_DASHBOARD_ITEM":return W()(e,{dashboardItems:{$unshift:[t.value]}});case"REMOVE_DASHBOARD_ITEM":{const a=t.value,n=e.dashboardItems.findIndex(e=>e.id===a);return n>-1?W()(e,{dashboardItems:{$splice:[[n,1]]}}):e}case"RECEIVED_DASHBOARD_LAYOUT":{const a=Object(w.e)(e.dashboardItems);let n=!1;const s=t.value.map(({x:e,y:t,w:s,h:i,i:r})=>{const o=a.find(e=>e.id===r);return o.x!==e||o.y!==t||o.w!==s||o.h!==i?(n=!0,Object.assign({},o,{w:s,h:i,x:e,y:t})):o});return n?Object(p.a)({},e,{dashboardItems:s}):e}case"UPDATE_DASHBOARD_ITEM":{const a=t.value,n=e.dashboardItems.findIndex(e=>e.id===a.id);if(n>-1){return W()(e,{dashboardItems:{$splice:[[n,1,Object.assign({},a)]]}})}return e}default:return e}},itemFilters:(e=le,t)=>{switch(t.type){case"ADD_ITEM_FILTER":return Object(p.a)({},e,{[t.filter.id]:t.filter.value});case"REMOVE_ITEM_FILTER":{const a=Object(p.a)({},e);return delete a[t.id],a}case"SET_ITEM_FILTERS":return t.filters;case"CLEAR_ITEM_FILTERS":return le;default:return e}},editItemFilters:(e=$,t)=>{switch(t.type){case"REMOVE_EDIT_ITEM_FILTER":{const a=Object(p.a)({},e);return delete a[t.id],a}case"SET_EDIT_ITEM_FILTERS":return t.filters;case"CLEAR_EDIT_ITEM_FILTERS":return $;default:return e}},style:ii,snackbar:(e=ue,t)=>{switch(t.type){case"RECEIVED_SNACKBAR_MESSAGE":return Object(p.a)({},e,t.value);case"CLOSE_SNACKBAR":return ue;default:return e}},dimensions:(e=it,t)=>{switch(t.type){case"SET_DIMENSIONS":return[...it,...t.value];default:return e}},settings:(e=ot,t)=>{switch(t.type){case"SET_SETTINGS":return Object.assign({},t.value);case"ADD_SETTINGS":return Object(p.a)({},e,t.value);default:return e}},activeModalDimension:(e=ka,t)=>{switch(t.type){case"SET_ACTIVE_MODAL_DIMENSION":return t.value;case"CLEAR_ACTIVE_MODAL_DIMENSION":return ka;default:return e}}});var oi=()=>{const e=[si.a],t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||te.d;return window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__,Object(te.e)(ri,t(Object(te.a)(...e)))};a(2433);const li={schemas:["chart","map","report","reportTable","eventChart","eventReport","dashboard","organisationUnit","userGroup"]},ci=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_DHIS2_APP_NAME:"dashboard-app",REACT_APP_DHIS2_BASE_URL:".."}).REACT_APP_DHIS2_AUTHORIZATION||null;ci&&(li.headers={Authorization:ci});t.default=()=>s.a.createElement(l.a,{store:oi()},s.a.createElement(i.MuiThemeProvider,{theme:Object(i.createMuiTheme)(o.a)},s.a.createElement(E,{d2Config:li},({d2:e})=>e?s.a.createElement(ni,{d2:e}):null)))},267:function(e,t,a){"use strict";(function(e){a.d(t,"h",(function(){return h})),a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return E})),a.d(t,"e",(function(){return g})),a.d(t,"d",(function(){return b})),a.d(t,"g",(function(){return v})),a.d(t,"b",(function(){return y})),a.d(t,"i",(function(){return I})),a.d(t,"j",(function(){return f})),a.d(t,"f",(function(){return D}));var n=a(12),s=a(207),i=a.n(s),r=a(241),o=a(624),l=a(210),c=a(200),d=a(291);const p={[l.e]:"mapPlugin",[l.d]:"eventReportPlugin",[l.c]:"eventChartPlugin"},m=t=>{if((e=>[l.b,l.h].includes(e))(t))return!0;return e[p[t]]},h=(e={},t={})=>{const a=t.activeType||e.type;return!!m(a)},u=e=>{if(!i()(e))return null;return e[l.v[e.type].propName]||e.reportTable||e.chart||e.map||e.eventReport||e.eventChart||{}},E=e=>u(e).id,g=e=>u(e).name,b=(e,t)=>{const a=Object(c.c)(t),n=l.v[e.type].appUrl(E(e));return"".concat(a,"/").concat(n)},v=async(e,t,{credentials:a,activeType:s,options:i={}})=>{const r=Object(n.a)({},t,i,{el:Object(d.f)(e.id)}),o=s||e.type;((e,t,a)=>{e&&e.load&&(e.url=a.baseUrl,e.loadingIndicator=!0,e.dashboard=!0,a.auth&&(e.auth=a.auth),e.load(t))})(m(o),r,a)},y=async e=>await Object(o.a)(E(e),e.type,{fields:e.type===l.e?Object(o.e)():null}),I=e=>{const t=m(e.type);t&&t.resize&&t.resize(Object(d.f)(e.id))},f=(e,t)=>{const a=m(t);a&&a.unmount&&a.unmount(Object(d.f)(e.id))},D=(e,t,a)=>{if(t===l.e&&t!==a){const t=(s=e).mapViews&&s.mapViews.find(e=>e.layer.includes("thematic"));return void 0===t?null:Object(c.d)(Object(n.a)({},e,t,{mapViews:void 0,type:a===l.b?r.VIS_TYPE_COLUMN:r.VIS_TYPE_PIVOT_TABLE}))}return t===l.h&&a===l.b?Object(c.d)(Object(n.a)({},e,{type:r.VIS_TYPE_COLUMN})):t===l.b&&a===l.h?Object(c.d)(Object(n.a)({},e,{type:r.VIS_TYPE_PIVOT_TABLE})):Object(c.d)(e);var s}}).call(this,a(195))},291:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return c})),a.d(t,"e",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"g",(function(){return h})),a.d(t,"j",(function(){return u})),a.d(t,"f",(function(){return E})),a.d(t,"i",(function(){return g}));var n=a(1123),s=a.n(n),i=a(200);const r="vertical",o=10,l=[10,10],c={x:0,y:0,w:20,h:29},d=()=>60,p=e=>Number.isInteger(e)&&e>=0,m=e=>p(e.x)&&p(e.y)&&p(e.w)&&p(e.h),h=e=>({i:e,minH:4}),u=e=>e.map((e,t)=>{const a=m(e)?e:Object.assign({},e,(e=>{if(!p(e))throw new Error("Invalid grid block number");const t=e%2,a=Math.floor(e/2),n=Math.floor(29.5),s=2*o;return{x:t*n,y:a*s,w:n,h:s}})(t));return Object.assign({},a,(e=>({originalHeight:Math.round(o*e.h+Math.max(0,e.h-1)*l[1])}))(a))}),E=e=>"item-".concat(e);function g(e){const t=Object(i.f)(document.querySelector("#".concat(E(e))));s()(t.setViewportSize)&&setTimeout(()=>t.setViewportSize(t.clientWidth-5,t.clientHeight-5),10)}},624:function(e,t,a){"use strict";a.d(t,"c",(function(){return o})),a.d(t,"b",(function(){return p})),a.d(t,"d",(function(){return m})),a.d(t,"e",(function(){return h})),a.d(t,"a",(function(){return u}));var n=a(244),s=a(363),i=a.n(s),r=a(210);const o=({rename:e}={})=>["id","".concat(e?"displayName~rename(name)":"name,displayName")],l=({withItems:e})=>i()(["dimension","legendSet[id]","filter","programStage",e?"items[".concat(["dimensionItem~rename(id)","displayName~rename(name)","dimensionItemType"].join(","),"]"):""]),c=({withItems:e})=>["columns[".concat(l({withItems:e}).join(","),"]"),"rows[".concat(l({withItems:e}).join(","),"]"),"filters[".concat(l({withItems:e}).join(","),"]")],d=({withDimensions:e,withOptions:t})=>i()(["".concat(o({rename:!0}).join(",")),"displayDescription~rename(description)",e?"".concat(c({withItems:!0}).join(",")):"",t?["*","!attributeDimensions","!attributeValues","!category","!categoryDimensions","!categoryOptionGroupSetDimensions","!columnDimensions","!dataDimensionItems","!dataElementDimensions","!dataElementGroupSetDimensions","!filterDimensions","!itemOrganisationUnitGroups","!lastUpdatedBy","!organisationUnitGroupSetDimensions","!organisationUnitLevels","!organisationUnits","!programIndicatorDimensions","!relativePeriods","!reportParams","!rowDimensions","!series","!translations","!userOrganisationUnit","!userOrganisationUnitChildren","!userOrganisationUnitGrandChildren"].join(","):""]),p=({withDimensions:e})=>["reportTable[".concat(d({withDimensions:e}).join(","),"]"),"chart[".concat(["type",...d({withDimensions:e})].join(","),"]"),"map[".concat(d({withDimensions:e}).join(","),"]"),"eventReport[".concat(d({withDimensions:e}).join(","),"]"),"eventChart[".concat(d({withDimensions:e}).join(","),"]")],m=()=>["reports[".concat(["type",...o({rename:!0})].join(","),"]"),"resources[".concat(o({rename:!0}).join(","),"]"),"users[".concat(o({rename:!0}).join(","),"]")],h=()=>["".concat(o({rename:!0}).join(",")),"user,longitude,latitude,zoom,basemap","mapViews[".concat(d({withDimensions:!0,withOptions:!0}),"]")],u=(e,t,{fields:a})=>Object(n.getInstance)().then(n=>n.Api.getApi().get("".concat(Object(r.p)(t),"/").concat(e),{fields:a||d({withDimensions:!0,withOptions:!0})}))},737:function(e,t,a){e.exports={leftControls:"DashboardsBar_leftControls__k-Y57",rightControls:"DashboardsBar_rightControls__1cyr1"}}}]);
//# sourceMappingURL=app.83308447.chunk.js.map