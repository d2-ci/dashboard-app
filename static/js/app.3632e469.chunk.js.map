{"version":3,"file":"static/js/app.3632e469.chunk.js","mappings":"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","sources":["D2App/reducers/activeModalDimension.js","D2App/actions/activeModalDimension.js","D2App/api/fetchAllDashboards.js","D2App/modules/util.js","D2App/reducers/dashboards.js","D2App/actions/dashboards.js","D2App/reducers/dashboardsFilter.js","D2App/modules/dashboardModes.js","D2App/modules/itemTypes.js","D2App/modules/smallScreen.js","D2App/modules/gridUtil.js","D2App/modules/uiBackendItemConverter.js","D2App/api/metadata.js","D2App/api/fetchDashboard.js","D2App/modules/getCustomDashboards.js","D2App/api/editDashboard.js","D2App/reducers/editDashboard.js","D2App/actions/editDashboard.js","D2App/reducers/itemActiveTypes.js","D2App/actions/itemActiveTypes.js","D2App/reducers/dimensions.js","D2App/reducers/itemFilters.js","D2App/actions/itemFilters.js","D2App/reducers/printDashboard.js","D2App/actions/printDashboard.js","D2App/api/messages.js","D2App/reducers/messages.js","D2App/components/Item/MessagesItem/actions.js","D2App/modules/localStorage.js","D2App/reducers/selected.js","D2App/reducers/visualizations.js","D2App/actions/visualizations.js","D2App/actions/selected.js","D2App/reducers/showDescription.js","D2App/api/userDataStore.js","D2App/api/description.js","D2App/actions/showDescription.js","webpack://@dhis2/app-shell/./src/D2App/components/styles/DashboardContainer.module.css?85e0","D2App/components/DashboardContainer.js","webpack://@dhis2/app-shell/./src/D2App/components/styles/NoContentMessage.module.css?b91f","D2App/components/NoContentMessage.js","webpack://@dhis2/app-shell/./src/D2App/components/styles/Notice.module.css?5db1","D2App/components/Notice.js","D2App/components/WindowDimensionsProvider.js","D2App/modules/setHeaderbarVisible.js","webpack://@dhis2/app-shell/./src/D2App/pages/print/styles/PrintActionsBar.module.css?1acf","D2App/pages/print/ActionsBar.js","webpack://@dhis2/app-shell/./src/D2App/pages/print/styles/PrintInfo.module.css?a4ad","D2App/pages/print/PrintInfo.js","D2App/components/Item/ItemHeader/DeleteItemButton.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/ItemHeader/styles/ItemHeader.module.css?966b","D2App/components/Item/ItemHeader/EditItemActions.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/ItemHeader/styles/PrintItemInfo.module.css?f5fe","D2App/components/Item/ItemHeader/PrintItemInfo.js","D2App/components/Item/ItemHeader/ViewItemActions.js","D2App/components/Item/ItemHeader/ViewItemTags.js","D2App/components/Item/ItemHeader/ItemHeader.js","D2App/components/Item/AppItem/getIframeSrc.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/AppItem/styles/AppItem.module.css?758f","D2App/components/Item/AppItem/Item.js","D2App/reducers/slideshow.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/ListItem/Item.module.css?2819","D2App/components/Item/ListItem/Item.js","D2App/api/userSettings.js","D2App/components/UserSettingsProvider.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/MessagesItem/styles/Item.module.css?9ee6","D2App/components/Item/MessagesItem/Item.js","D2App/components/Item/MessagesItem/getFormattedDate.js","D2App/components/Item/NotSupportedItem/Item.js","D2App/components/Item/PageBreakItem/Item.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/PrintTitlePageItem/styles/Item.module.css?230c","D2App/components/Item/PrintTitlePageItem/Item.js","D2App/components/Item/SpacerItem/Item.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/TextItem/styles/TextItem.module.css?bc11","D2App/components/Item/TextItem/Item.js","D2App/actions/slideshow.js","D2App/api/dataStatistics.js","D2App/modules/item.js","D2App/api/fetchVisualization.js","D2App/api/systemSettings.js","D2App/components/SystemSettingsProvider.js","D2App/components/Item/VisualizationItem/assets/icons.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/VisualizationItem/styles/FatalErrorBoundary.module.css?ea31","D2App/components/Item/VisualizationItem/FatalErrorBoundary.js","D2App/modules/getGridItemDomElementClassName.js","D2App/components/Item/VisualizationItem/getGridItemElement.js","D2App/components/MenuItemWithTooltip.js","D2App/components/Item/VisualizationItem/getThematicMapViews.js","D2App/components/Item/VisualizationItem/ItemContextMenu/ViewAsMenuItems.js","D2App/components/Item/VisualizationItem/ItemContextMenu/ItemContextMenu.js","D2App/components/Item/VisualizationItem/InterpretationReplyForm.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/VisualizationItem/styles/ItemFooter.module.css?0dc3","D2App/components/Item/VisualizationItem/ItemFooter.js","D2App/components/Item/VisualizationItem/memoizeOne.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/VisualizationItem/styles/Item.module.css?f93b","D2App/components/Item/VisualizationItem/getVisualizationContainerDomId.js","D2App/components/Item/VisualizationItem/Visualization/loadExternalScript.js","D2App/components/Item/VisualizationItem/Visualization/plugin.js","D2App/modules/isLLVersionCompatible.js","D2App/components/Item/VisualizationItem/Visualization/getFilteredVisualization.js","D2App/components/Item/VisualizationItem/Visualization/getVisualizationConfig.js","D2App/reducers/iframePluginStatus.js","D2App/modules/getCacheableSectionId.js","D2App/modules/useCacheableSection.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/VisualizationItem/Visualization/styles/VisualizationErrorMessage.module.css?5a61","D2App/components/Item/VisualizationItem/Visualization/MissingPluginMessage.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/VisualizationItem/Visualization/styles/IframePlugin.module.css?7da0","D2App/components/Item/VisualizationItem/Visualization/VisualizationErrorMessage.js","D2App/components/Item/VisualizationItem/Visualization/IframePlugin.js","D2App/actions/iframePluginStatus.js","D2App/components/Item/VisualizationItem/Visualization/LegacyPlugin.js","webpack://@dhis2/app-shell/./src/D2App/components/Item/VisualizationItem/Visualization/styles/Visualization.module.css?0267","D2App/components/Item/VisualizationItem/Visualization/Visualization.js","D2App/components/Item/VisualizationItem/Item.js","D2App/components/Item/Item.js","D2App/modules/getFirstOfType.js","D2App/pages/print/printUtils.js","D2App/pages/print/StaticGrid.js","D2App/pages/print/PrintLayoutItemGrid.js","webpack://@dhis2/app-shell/./src/D2App/pages/print/styles/PrintLayoutDashboard.module.css?c441","D2App/pages/print/PrintLayoutDashboard.js","webpack://@dhis2/app-shell/./src/D2App/components/styles/ConfirmActionDialog.module.css?11b3","D2App/components/ConfirmActionDialog.js","D2App/pages/edit/deleteDashboardMutation.js","D2App/modules/getFilteredDimensions.js","D2App/modules/useDimensions.js","D2App/actions/dimensions.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/styles/FilterSettingsDialog.module.css?a2d0","D2App/pages/edit/FilterSettingsDialog.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/styles/ActionsBar.module.css?c479","D2App/pages/edit/ActionsBar.js","D2App/components/ProgressiveLoadingContainer.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/styles/ItemGrid.module.css?c8c1","D2App/pages/edit/ItemGrid.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/styles/EditDashboard.module.css?fc93","D2App/pages/edit/assets/LayoutFixed.js","D2App/pages/edit/assets/LayoutFreeflow.js","D2App/modules/useDebounce.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/ItemSelector/styles/ContentMenuItem.module.css?1d5b","D2App/pages/edit/ItemSelector/ContentMenuItem.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/ItemSelector/styles/HeaderMenuItem.module.css?b9dc","D2App/pages/edit/ItemSelector/HeaderMenuItem.js","D2App/pages/edit/ItemSelector/selectableItems.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/ItemSelector/styles/CategorizedMenuGroup.module.css?9ae2","D2App/pages/edit/ItemSelector/CategorizedMenuGroup.js","D2App/pages/edit/ItemSelector/actions.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/ItemSelector/styles/ItemSearchField.module.css?3ec8","D2App/pages/edit/ItemSelector/ItemSearchField.js","D2App/pages/edit/ItemSelector/SinglesMenuGroup.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/ItemSelector/styles/ItemSelector.module.css?5d4a","D2App/pages/edit/ItemSelector/ItemSelector.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/styles/LayoutModal.module.css?150f","D2App/pages/edit/LayoutModal.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/styles/TitleBar.module.css?92ac","D2App/pages/edit/TitleBar.js","D2App/pages/edit/EditDashboard.js","webpack://@dhis2/app-shell/./src/D2App/pages/edit/styles/NewDashboard.module.css?5a4e","D2App/pages/edit/NewDashboard.js","D2App/pages/print/PrintItemGrid.js","webpack://@dhis2/app-shell/./src/D2App/pages/print/styles/PrintDashboard.module.css?9fe8","D2App/pages/print/PrintDashboard.js","D2App/components/DropdownButton/assets/Arrow.js","webpack://@dhis2/app-shell/./src/D2App/components/DropdownButton/DropdownButton.module.css?4b0c","D2App/components/DropdownButton/DropdownButton.js","D2App/components/DashboardsBar/InformationBlock/FilterDialog.js","D2App/components/DashboardsBar/InformationBlock/FilterSelector.js","webpack://@dhis2/app-shell/./src/D2App/components/DashboardsBar/InformationBlock/styles/ActionsBar.module.css?338d","D2App/components/DashboardsBar/InformationBlock/ActionsBar.js","D2App/components/DashboardsBar/InformationBlock/LastUpdatedTag.js","webpack://@dhis2/app-shell/./src/D2App/components/DashboardsBar/InformationBlock/styles/StarDashboardButton.module.css?0b12","D2App/components/DashboardsBar/InformationBlock/StarDashboardButton.js","webpack://@dhis2/app-shell/./src/D2App/components/DashboardsBar/InformationBlock/styles/InformationBlock.module.css?bb78","D2App/components/DashboardsBar/InformationBlock/InformationBlock.js","D2App/components/DashboardsBar/InformationBlock/apiStarDashboard.js","D2App/components/DashboardsBar/NavigationMenu/IconNavigation.js","D2App/components/IconOfflineSaved.js","webpack://@dhis2/app-shell/./src/D2App/components/DashboardsBar/NavigationMenu/styles/NavigationMenuItem.module.css?2615","D2App/components/DashboardsBar/NavigationMenu/NavigationMenuItem.js","webpack://@dhis2/app-shell/./src/D2App/components/DashboardsBar/NavigationMenu/styles/NavigationMenu.module.css?e2d6","D2App/components/DashboardsBar/NavigationMenu/NavigationMenu.js","D2App/actions/dashboardsFilter.js","webpack://@dhis2/app-shell/./src/D2App/components/DashboardsBar/styles/DashboardsBar.module.css?b99b","D2App/components/DashboardsBar/index.js","D2App/components/DashboardsBar/DashboardsBar.js","webpack://@dhis2/app-shell/./src/D2App/pages/start/styles/DashboardLink.module.css?ac5b","D2App/pages/start/DashboardLink.js","webpack://@dhis2/app-shell/./src/D2App/pages/start/styles/StartScreen.module.css?99f2","D2App/pages/start/StartScreen.js","D2App/pages/start/LandingPage.js","D2App/pages/start/index.js","D2App/components/LoadingMask.js","D2App/reducers/passiveViewRegistered.js","webpack://@dhis2/app-shell/./src/D2App/pages/view/styles/ViewDashboard.module.css?15c8","webpack://@dhis2/app-shell/./src/D2App/pages/view/styles/Description.module.css?0a4a","D2App/pages/view/Description.js","webpack://@dhis2/app-shell/./src/D2App/pages/view/FilterBar/styles/FilterBadge.module.css?425b","D2App/pages/view/FilterBar/FilterBadge.js","webpack://@dhis2/app-shell/./src/D2App/pages/view/FilterBar/styles/FilterBar.module.css?c887","D2App/pages/view/FilterBar/FilterBar.js","webpack://@dhis2/app-shell/./src/D2App/pages/view/styles/SlideshowFiltersInfo.module.css?fdc8","D2App/pages/view/SlideshowFiltersInfo.js","webpack://@dhis2/app-shell/./src/D2App/pages/view/styles/SlideshowControlbar.module.css?576f","D2App/pages/view/SlideshowControlbar.js","webpack://@dhis2/app-shell/./src/D2App/pages/view/styles/ItemGrid.module.css?2207","D2App/pages/view/useSlideshow.js","D2App/pages/view/ItemGrid.js","D2App/pages/view/ViewDashboardContent.js","D2App/pages/view/ViewDashboard.js","D2App/actions/passiveViewRegistered.js","D2App/pages/view/CacheableViewDashboard.js","D2App/components/App.js","D2App/reducers/index.js","D2App/configureStore.js","D2App/locales/index.js","D2App/AppWrapper.js"],"sourcesContent":["export const SET_ACTIVE_MODAL_DIMENSION = 'SET_ACTIVE_MODAL_DIMENSION';\nexport const CLEAR_ACTIVE_MODAL_DIMENSION = 'CLEAR_ACTIVE_MODAL_DIMENSION';\nexport const DEFAULT_STATE_ACTIVE_MODAL_DIMENSION = {};\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_STATE_ACTIVE_MODAL_DIMENSION;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_ACTIVE_MODAL_DIMENSION:\n      {\n        return action.value;\n      }\n    case CLEAR_ACTIVE_MODAL_DIMENSION:\n      {\n        return DEFAULT_STATE_ACTIVE_MODAL_DIMENSION;\n      }\n    default:\n      return state;\n  }\n});\nexport const sGetActiveModalDimension = state => state.activeModalDimension;","import { SET_ACTIVE_MODAL_DIMENSION, CLEAR_ACTIVE_MODAL_DIMENSION } from '../reducers/activeModalDimension.js';\nexport const acSetActiveModalDimension = value => ({\n  type: SET_ACTIVE_MODAL_DIMENSION,\n  value\n});\nexport const acClearActiveModalDimension = () => ({\n  type: CLEAR_ACTIVE_MODAL_DIMENSION\n});","export const dashboardsQuery = {\n  resource: 'dashboards',\n  params: {\n    fields: ['id', 'displayName', 'favorite~rename(starred)'],\n    paging: false\n  }\n};\nexport const apiFetchDashboards = async dataEngine => {\n  try {\n    const dashboardsData = await dataEngine.query({\n      dashboards: dashboardsQuery\n    });\n    return dashboardsData.dashboards.dashboards;\n  } catch (error) {\n    console.log('Error: ', error);\n  }\n};","import isObject from 'lodash/isObject.js';\nexport function orArray(param) {\n  return Array.isArray(param) ? param : [];\n}\nexport function orObject(param) {\n  return isObject(param) ? param : {};\n}\n\n// object\nexport function arrayToIdMap(array) {\n  return array.reduce((obj, item) => {\n    obj[item.id] = item;\n    return obj;\n  }, {});\n}\n\n// reducer validator\nexport const validateReducer = (value, defaultValue) => value === undefined || value === null ? defaultValue : value;","/** @module reducers/dashboards */\n\nimport arraySort from 'd2-utilizr/lib/arraySort.js';\nimport { orObject } from '../modules/util.js';\nexport const SET_DASHBOARDS = 'SET_DASHBOARDS';\nexport const ADD_DASHBOARDS = 'ADD_DASHBOARDS';\nexport const SET_DASHBOARD_STARRED = 'SET_DASHBOARD_STARRED';\nexport const EMPTY_DASHBOARDS = {};\nexport const DEFAULT_STATE_DASHBOARDS = null;\n\n/**\n * Reducer that computes and returns the new state based on the given action\n * @function\n * @param {Object} state The current state\n * @param {Object} action The action to be evaluated\n * @returns {Object}\n */\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_STATE_DASHBOARDS;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_DASHBOARDS:\n      {\n        return action.value;\n      }\n    case ADD_DASHBOARDS:\n      {\n        return {\n          ...state,\n          ...action.value\n        };\n      }\n    case SET_DASHBOARD_STARRED:\n      {\n        return {\n          ...state,\n          [action.id]: {\n            ...state[action.id],\n            starred: action.value\n          }\n        };\n      }\n    default:\n      return state;\n  }\n});\n\n// root selector\n\nexport const sGetDashboardsRoot = state => state.dashboards;\n\n// selector level 1\n\n/**\n * Selector which returns a dashboard by id from the state object\n * If no matching dashboard is found it returns undefined\n * If dashboards is null, then the dashboards api request\n * has not yet completed. If dashboards is an empty object\n * then the dashboards api request is complete, but no dashboards\n * were returned\n *\n * @function\n * @param {Object} state The current state\n * @param {Number} id The id of the dashboard\n * @returns {Object | undefined}\n */\nexport const sGetDashboardById = (state, id) => (sGetDashboardsRoot(state) || EMPTY_DASHBOARDS)[id];\nexport const sGetDashboardStarred = (state, id) => sGetDashboardById(state, id).starred;\nexport const sDashboardsIsFetching = state => {\n  return sGetDashboardsRoot(state) === null;\n};\n\n/**\n * Selector which returns all dashboards\n *\n * @function\n * @param {Object} state The current state\n * @returns {Object | undefined}\n */\nexport const sGetAllDashboards = state => orObject(sGetDashboardsRoot(state));\n\n// selector level 2\n\nconst sGetStarredDashboards = state => Object.values(sGetAllDashboards(state)).filter(dashboard => dashboard.starred === true);\nconst sGetUnstarredDashboards = state => Object.values(sGetAllDashboards(state)).filter(dashboard => dashboard.starred === false);\n\n// selector level 3\n\nexport const sGetDashboardsSortedByStarred = state => [...arraySort(sGetStarredDashboards(state), 'ASC', 'displayName'), ...arraySort(sGetUnstarredDashboards(state), 'ASC', 'displayName')];","import { apiFetchDashboards } from '../api/fetchAllDashboards.js';\nimport { arrayToIdMap } from '../modules/util.js';\nimport { SET_DASHBOARDS, ADD_DASHBOARDS, SET_DASHBOARD_STARRED } from '../reducers/dashboards.js';\n\n// actions\n\nexport const acSetDashboards = dashboards => ({\n  type: SET_DASHBOARDS,\n  value: arrayToIdMap(dashboards)\n});\nexport const acAppendDashboards = dashboards => ({\n  type: ADD_DASHBOARDS,\n  value: arrayToIdMap(dashboards)\n});\nexport const acSetDashboardStarred = (id, isStarred) => ({\n  type: SET_DASHBOARD_STARRED,\n  id,\n  value: isStarred\n});\n\n// thunks\n\nexport const tFetchDashboards = () => async (dispatch, getState, dataEngine) => {\n  const dashboards = await apiFetchDashboards(dataEngine);\n  return dispatch(acSetDashboards(dashboards));\n};","import { validateReducer } from '../modules/util.js';\nexport const SET_DASHBOARDS_FILTER = 'SET_DASHBOARDS_FILTER';\nexport const CLEAR_DASHBOARDS_FILTER = 'CLEAR_DASHBOARDS_FILTER';\nexport const DEFAULT_STATE_DASHBOARDS_FILTER = '';\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_STATE_DASHBOARDS_FILTER;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_DASHBOARDS_FILTER:\n      {\n        return validateReducer(action.value, DEFAULT_STATE_DASHBOARDS_FILTER);\n      }\n    case CLEAR_DASHBOARDS_FILTER:\n      {\n        return DEFAULT_STATE_DASHBOARDS_FILTER;\n      }\n    default:\n      return state;\n  }\n});\n\n// selectors\n\nexport const sGetDashboardsFilter = state => state.dashboardsFilter;","export const EDIT = 'edit';\nexport const NEW = 'new';\nexport const VIEW = 'view';\nexport const PRINT = 'print';\nexport const PRINT_LAYOUT = 'print-layout';\nexport const isEditMode = mode => [EDIT, NEW].includes(mode);\nexport const isPrintMode = mode => [PRINT, PRINT_LAYOUT].includes(mode);\nexport const isViewMode = mode => mode === VIEW;","import { VIS_TYPE_PIVOT_TABLE } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { IconApps24, IconEmptyFrame24, IconFileDocument24, IconLink24, IconMail24, IconQuestion24, IconTable24, IconTextBox24, IconUser24, IconVisualizationColumn24, IconWorld24 } from '@dhis2/ui';\n\n// Item types\nexport const VISUALIZATION = 'VISUALIZATION';\nexport const REPORT_TABLE = 'REPORT_TABLE';\nexport const CHART = 'CHART';\nexport const MAP = 'MAP';\nexport const EVENT_REPORT = 'EVENT_REPORT';\nexport const EVENT_CHART = 'EVENT_CHART';\nexport const EVENT_VISUALIZATION = 'EVENT_VISUALIZATION';\nexport const APP = 'APP';\nexport const REPORTS = 'REPORTS';\nexport const RESOURCES = 'RESOURCES';\nexport const USERS = 'USERS';\nexport const MESSAGES = 'MESSAGES';\nexport const TEXT = 'TEXT';\nexport const SPACER = 'SPACER';\nexport const PAGEBREAK = 'PAGEBREAK';\nexport const PRINT_TITLE_PAGE = 'PRINT_TITLE_PAGE';\nconst DOMAIN_TYPE_AGGREGATE = 'AGGREGATE';\nconst DOMAIN_TYPE_TRACKER = 'TRACKER';\n\n// Dashboard helpers\nexport const isVisualizationType = item => {\n  var _itemTypeMap$item$typ;\n  return !!((_itemTypeMap$item$typ = itemTypeMap[item.type]) !== null && _itemTypeMap$item$typ !== void 0 && _itemTypeMap$item$typ.isVisualizationType);\n};\nexport const hasMapView = itemType => itemTypeMap[itemType].domainType === DOMAIN_TYPE_AGGREGATE;\nexport const isTrackerDomainType = itemType => itemTypeMap[itemType].domainType === DOMAIN_TYPE_TRACKER;\nexport const getDefaultItemCount = itemType => itemTypeMap[itemType].defaultItemCount || 5;\nexport const getAppName = itemType => itemTypeMap[itemType].appName || '';\nexport const getItemTypeForVis = item => {\n  if (item.type === VISUALIZATION) {\n    if (item.visualization.type === VIS_TYPE_PIVOT_TABLE) {\n      return REPORT_TABLE;\n    } else {\n      return CHART;\n    }\n  }\n  return item.type;\n};\n\n// Item type map\nexport const itemTypeMap = {\n  [VISUALIZATION]: {\n    id: VISUALIZATION,\n    endPointName: 'visualizations',\n    dataStatisticsName: 'VISUALIZATION_VIEW',\n    propName: 'visualization',\n    pluralTitle: i18n.t('Visualizations'),\n    domainType: DOMAIN_TYPE_AGGREGATE,\n    isVisualizationType: true,\n    appUrl: id => `dhis-web-data-visualizer/#/${id}`,\n    appName: 'Data Visualizer',\n    appKey: 'data-visualizer',\n    defaultItemCount: 10,\n    supportsFullscreen: true\n  },\n  [REPORT_TABLE]: {\n    id: REPORT_TABLE,\n    endPointName: 'visualizations',\n    dataStatisticsName: 'REPORT_TABLE_VIEW',\n    propName: 'visualization',\n    pluralTitle: i18n.t('Pivot tables'),\n    domainType: DOMAIN_TYPE_AGGREGATE,\n    isVisualizationType: true,\n    appUrl: id => `dhis-web-data-visualizer/#/${id}`,\n    appName: 'Data Visualizer',\n    supportsFullscreen: true\n  },\n  [CHART]: {\n    id: CHART,\n    endPointName: 'visualizations',\n    propName: 'visualization',\n    dataStatisticsName: 'CHART_VIEW',\n    pluralTitle: i18n.t('Charts'),\n    domainType: DOMAIN_TYPE_AGGREGATE,\n    isVisualizationType: true,\n    appUrl: id => `dhis-web-data-visualizer/#/${id}`,\n    appName: 'Data Visualizer',\n    supportsFullscreen: true\n  },\n  [MAP]: {\n    id: MAP,\n    endPointName: 'maps',\n    dataStatisticsName: 'MAP_VIEW',\n    propName: 'map',\n    pluralTitle: i18n.t('Maps'),\n    domainType: DOMAIN_TYPE_AGGREGATE,\n    isVisualizationType: true,\n    appUrl: id => `dhis-web-maps/?id=${id}`,\n    appName: 'Maps',\n    supportsFullscreen: true\n  },\n  [EVENT_REPORT]: {\n    id: EVENT_REPORT,\n    endPointName: 'eventReports',\n    propName: 'eventReport',\n    pluralTitle: i18n.t('Event reports'),\n    domainType: DOMAIN_TYPE_TRACKER,\n    isVisualizationType: true,\n    appUrl: id => `dhis-web-event-reports/?id=${id}`,\n    appName: 'Event Reports',\n    supportsFullscreen: true\n  },\n  [EVENT_CHART]: {\n    id: EVENT_CHART,\n    endPointName: 'eventCharts',\n    propName: 'eventChart',\n    pluralTitle: i18n.t('Event charts'),\n    domainType: DOMAIN_TYPE_TRACKER,\n    isVisualizationType: true,\n    appUrl: id => `dhis-web-event-visualizer/?id=${id}`,\n    appName: 'Event Visualizer',\n    supportsFullscreen: true\n  },\n  [EVENT_VISUALIZATION]: {\n    id: EVENT_VISUALIZATION,\n    endPointName: 'eventVisualizations',\n    propName: 'eventVisualization',\n    pluralTitle: i18n.t('Line lists'),\n    domainType: DOMAIN_TYPE_TRACKER,\n    isVisualizationType: true,\n    // TODO change to the path for the bundled app\n    appUrl: id => `api/apps/line-listing/index.html#/${id}`,\n    appName: 'Line Listing',\n    appKey: 'line-listing',\n    supportsFullscreen: true\n  },\n  [APP]: {\n    endPointName: 'apps',\n    propName: 'appKey',\n    pluralTitle: i18n.t('Apps'),\n    supportsFullscreen: true\n  },\n  [REPORTS]: {\n    id: REPORTS,\n    endPointName: 'reports',\n    propName: 'reports',\n    pluralTitle: i18n.t('Reports'),\n    appUrl: (id, type) => {\n      switch (type) {\n        case 'HTML':\n          return `dhis-web-reports/#/standard-report/view/${id}`;\n        case 'JASPER_REPORT_TABLE':\n        case 'JASPER_JDBC':\n        default:\n          return `api/reports/${id}/data.pdf?t=${new Date().getTime()}`;\n      }\n    },\n    supportsFullscreen: true\n  },\n  [RESOURCES]: {\n    id: RESOURCES,\n    endPointName: 'resources',\n    propName: 'resources',\n    pluralTitle: i18n.t('Resources'),\n    appUrl: id => `api/documents/${id}/data`,\n    supportsFullscreen: true\n  },\n  [USERS]: {\n    id: USERS,\n    endPointName: 'users',\n    propName: 'users',\n    pluralTitle: i18n.t('Users'),\n    appUrl: id => `dhis-web-dashboard-integration/profile.action?id=${id}`,\n    supportsFullscreen: false\n  },\n  [TEXT]: {\n    id: TEXT,\n    propName: 'text',\n    supportsFullscreen: true\n  },\n  [MESSAGES]: {\n    propName: 'messages',\n    supportsFullscreen: false\n  },\n  [SPACER]: {\n    propName: 'text',\n    supportsFullscreen: false\n  },\n  [PAGEBREAK]: {\n    propName: 'text',\n    supportsFullscreen: false\n  },\n  [PRINT_TITLE_PAGE]: {\n    propName: 'text',\n    supportsFullscreen: false\n  }\n};\nexport const getEndPointName = type => itemTypeMap[type].endPointName;\nexport const getDataStatisticsName = type => itemTypeMap[type].dataStatisticsName || null;\nexport const getItemUrl = (type, item, baseUrl) => {\n  let url;\n  if (type === APP) {\n    url = item.launchUrl;\n  }\n  if (itemTypeMap[type] && itemTypeMap[type].appUrl) {\n    url = `${baseUrl}/${itemTypeMap[type].appUrl(item.id, item.type)}`;\n  }\n  return url;\n};\nexport const itemTypeSupportsFullscreen = type => {\n  var _itemTypeMap$type;\n  return (_itemTypeMap$type = itemTypeMap[type]) === null || _itemTypeMap$type === void 0 ? void 0 : _itemTypeMap$type.supportsFullscreen;\n};\nexport const getItemIcon = type => {\n  switch (type) {\n    case REPORT_TABLE:\n    case EVENT_REPORT:\n      return IconTable24;\n    case REPORTS:\n      return IconFileDocument24;\n    case CHART:\n    case EVENT_CHART:\n    case EVENT_VISUALIZATION:\n      return IconVisualizationColumn24;\n    case MAP:\n      return IconWorld24;\n    case APP:\n      return IconApps24;\n    case RESOURCES:\n      return IconLink24;\n    case USERS:\n      return IconUser24;\n    case TEXT:\n      return IconTextBox24;\n    case MESSAGES:\n      return IconMail24;\n    case SPACER:\n      return IconEmptyFrame24;\n    default:\n      return IconQuestion24;\n  }\n};","const SMALL_SCREEN_BREAKPOINT = 480;\nexport const isSmallScreen = width => width <= SMALL_SCREEN_BREAKPOINT;\nexport const getBreakpoint = containerWidth => SMALL_SCREEN_BREAKPOINT - (window.innerWidth - containerWidth);","// Dimensions for the react-grid-layout\nimport { generateUid } from 'd2/uid.js';\nimport sortBy from 'lodash/sortBy.js';\nimport { acSetHideGrid, acUpdateDashboardItemShapes } from '../actions/editDashboard.js';\nimport { isVisualizationType, itemTypeMap, PAGEBREAK, PRINT_TITLE_PAGE } from './itemTypes.js';\nimport { isSmallScreen } from './smallScreen.js';\nexport const GRID_COMPACT_TYPE = 'vertical'; // vertical | horizonal | null\nexport const GRID_ROW_HEIGHT_PX = 16;\nexport const MARGIN_PX = [4, 4];\nconst SM_SCREEN_MIN_ITEM_GRID_HEIGHT = 13; // minimum of ~320px\nexport const SM_SCREEN_GRID_COLUMNS = 1;\nexport const MARGIN_SM_PX = [4, 4];\nexport const GRID_PADDING_PX = [0, 0];\n// make an assumption about the original item w/h ratio\n// assumes grid width of ~1200px at time dashboard was created\nconst GRID_COL_WIDTH_PX = 16;\nexport const GRID_COLUMNS = 60;\n\n// Dimensions for getShape\nexport const NEW_ITEM_SHAPE = {\n  x: 0,\n  y: 0,\n  w: 20,\n  h: 29\n};\nconst NUMBER_OF_ITEM_COLS = 2;\nconst MAX_ITEM_GRID_WIDTH = GRID_COLUMNS - 1;\nexport const MAX_ITEM_GRID_HEIGHT = 34;\nexport const MAX_ITEM_GRID_HEIGHT_OIPP = 35;\nexport const MAX_ITEM_GRID_WIDTH_OIPP = 56;\nconst MIN_ITEM_GRID_HEIGHT = 4;\n\n// isNonNegativeInteger\n\nconst isNonNegativeInteger = x => Number.isInteger(x) && x >= 0;\n\n// Does the item have all the shape properties?\n\nexport const hasShape = item => isNonNegativeInteger(item.x) && isNonNegativeInteger(item.y) && isNonNegativeInteger(item.w) && isNonNegativeInteger(item.h);\n\n// returns a rectangular grid block dimensioned with x, y, w, h in grid units.\n// based on a grid with 3 items across\nconst getShape = i => {\n  const col = i % NUMBER_OF_ITEM_COLS;\n  const row = Math.floor(i / NUMBER_OF_ITEM_COLS);\n  const itemWidth = Math.floor(MAX_ITEM_GRID_WIDTH / NUMBER_OF_ITEM_COLS);\n  const itemHeight = GRID_ROW_HEIGHT_PX * 2;\n  return {\n    x: col * itemWidth,\n    y: row * itemHeight,\n    w: itemWidth,\n    h: itemHeight\n  };\n};\n\n/**\n * Returns an array of items containing the x, y, w, h dimensions\n * and the item's originalheight in pixels\n * and dimensions to create the small layout (x, y, w, h)\n * @function\n * @param {Array} items\n * @returns {Array}\n */\n\nexport const withShape = function () {\n  let items = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  const itemsWithShape = items.map((item, i) => hasShape(item) ? item : Object.assign({}, item, getShape(i)));\n  return itemsWithShape.map(item => Object.assign({}, item, {\n    originalH: item.h\n  }));\n};\nconst getGridUnitsForSmFromPx = hPx => {\n  const gridUnitHeightPx = GRID_ROW_HEIGHT_PX + MARGIN_SM_PX[1];\n  return Math.round((hPx + MARGIN_SM_PX[1]) / gridUnitHeightPx);\n};\nexport const getProportionalHeight = (item, gridWidthPx) => {\n  // get w/h ratio of the original item\n  const wPx = getItemWHPx(item.w, GRID_COL_WIDTH_PX, MARGIN_PX[0]);\n  const hPx = getItemWHPx(item.h, GRID_ROW_HEIGHT_PX, MARGIN_PX[1]);\n  const ratioWH = wPx / hPx;\n  if (!isVisualizationType(item)) {\n    return getGridUnitsForSmFromPx(hPx);\n  }\n\n  // get new height in px based on the ratio\n  const newColWidthPx = (gridWidthPx - MARGIN_SM_PX[0] * (SM_SCREEN_GRID_COLUMNS - 1) - GRID_PADDING_PX[0] * 2) / SM_SCREEN_GRID_COLUMNS;\n  const newWPx = newColWidthPx * SM_SCREEN_GRID_COLUMNS;\n  const newHPx = Math.round(newWPx / ratioWH);\n\n  //convert height in px back to grid units\n  const h = getGridUnitsForSmFromPx(newHPx);\n\n  // item must be at least the set minimum\n  return h < SM_SCREEN_MIN_ITEM_GRID_HEIGHT ? SM_SCREEN_MIN_ITEM_GRID_HEIGHT : h;\n};\nexport const getSmallLayout = (items, windowWidthPx) => sortBy(items, ['y', 'x']).map((item, i) => Object.assign({}, item, {\n  x: 0,\n  y: i,\n  w: SM_SCREEN_GRID_COLUMNS,\n  h: getProportionalHeight(item, windowWidthPx)\n}));\nexport const getGridItemProperties = itemId => {\n  return {\n    i: itemId,\n    minH: MIN_ITEM_GRID_HEIGHT\n  };\n};\nexport const getPageBreakItemShape = function (yPos) {\n  let isStatic = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return {\n    x: 0,\n    y: yPos,\n    w: MAX_ITEM_GRID_WIDTH,\n    h: 5,\n    static: !!isStatic,\n    minH: 1\n  };\n};\nexport const getPrintTitlePageItemShape = isOneItemPerPage => {\n  return {\n    x: 0,\n    y: 0,\n    w: isOneItemPerPage ? MAX_ITEM_GRID_WIDTH_OIPP : MAX_ITEM_GRID_WIDTH,\n    h: MAX_ITEM_GRID_HEIGHT,\n    static: true,\n    minH: 1\n  };\n};\n\n/**\n * Calculates the grid item's height in pixels based\n * on the height in grid units. This calculation\n * is copied directly from react-grid-layout\n * calculateUtils.js (calcGridItemWHPx)\n *\n * Each row's px height is the sum of the GRID_ROW_HEIGHT_PX + MARGIN-Y\n * So the calculation is:\n * GRID_ROW_HEIGHT_PX * Number of rows\n * +\n * yMargin * Number of rows-1\n *\n * @param {Object} item item containing shape (x, y, w, h)\n */\nexport const getItemHeightPx = (item, windowWidthPx) => {\n  if (isSmallScreen(windowWidthPx)) {\n    const h = item.smallOriginalH ? item.smallOriginalH : getProportionalHeight(item, windowWidthPx);\n    return getItemWHPx(h, GRID_ROW_HEIGHT_PX, MARGIN_SM_PX[1]);\n  }\n  return getItemWHPx(item.originalH, GRID_ROW_HEIGHT_PX, MARGIN_PX[1]);\n};\nconst getItemWHPx = (gridUnits, colOrRowSize, marginPx) => Math.round(colOrRowSize * gridUnits + Math.max(0, gridUnits - 1) * marginPx);\n\n// Auto layout\n\nconst getNumberOfColUnits = function (columns) {\n  let maxColUnits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : GRID_COLUMNS;\n  if (columns.length < 1 || columns.length > maxColUnits) {\n    return null;\n  }\n  return Math.floor(maxColUnits / columns.length);\n};\nconst sortItems = items => items.slice().sort((a, b) => a.y - b.y || a.x - b.x || a.h - b.h || a.w - b.w);\nexport const getAutoItemShapes = (dashboardItems, columns, maxColUnits) => {\n  const numberOfColUnits = getNumberOfColUnits(columns, maxColUnits);\n  if (!numberOfColUnits || !dashboardItems.length) {\n    return null;\n  }\n  const items = sortItems(dashboardItems);\n  const itemsWithNewShape = [];\n  const itemHeight = NEW_ITEM_SHAPE.h;\n  for (let i = 0, colIdx = 0, rowIdx = 0, item; i < items.length; i++) {\n    item = items[i];\n    itemsWithNewShape.push({\n      ...item,\n      w: numberOfColUnits,\n      h: itemHeight,\n      x: numberOfColUnits * colIdx,\n      y: itemHeight * rowIdx\n    });\n    colIdx = colIdx + 1;\n    if (colIdx === columns.length) {\n      colIdx = 0;\n      rowIdx = rowIdx + 1;\n    }\n  }\n  return itemsWithNewShape;\n};\nexport const addToItemsStart = (dashboardItems, columns, newDashboardItem) => {\n  if (!columns.length) {\n    // when no layout\n    return [{\n      ...NEW_ITEM_SHAPE,\n      ...newDashboardItem\n    }, ...dashboardItems];\n  } else {\n    return getAutoItemShapes([...dashboardItems, {\n      ...newDashboardItem,\n      x: 0,\n      y: 0,\n      w: 0,\n      h: 0\n    }], columns);\n  }\n};\nexport const addToItemsEnd = (dashboardItems, columns, newDashboardItem) => {\n  const items = [...dashboardItems, {\n    ...NEW_ITEM_SHAPE,\n    ...newDashboardItem,\n    y: dashboardItems.reduce((mx, item) => Math.max(mx, item.y + item.h), 0)\n  }];\n  return columns.length ? getAutoItemShapes(items, columns) : items;\n};\nexport const updateItems = function (items, dispatch) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const {\n    reload\n  } = options;\n  if (reload) {\n    dispatch(acSetHideGrid(true));\n    dispatch(acUpdateDashboardItemShapes(items));\n    setTimeout(() => dispatch(acSetHideGrid(false)), 0);\n  } else {\n    dispatch(acUpdateDashboardItemShapes(items));\n  }\n};\nexport const hasLayout = layout => {\n  var _layout$columns;\n  return Boolean(layout === null || layout === void 0 ? void 0 : (_layout$columns = layout.columns) === null || _layout$columns === void 0 ? void 0 : _layout$columns.length);\n};\nexport const getDashboardItem = item => {\n  var _itemTypeMap$type;\n  const type = item.type;\n  const itemPropName = (_itemTypeMap$type = itemTypeMap[type]) === null || _itemTypeMap$type === void 0 ? void 0 : _itemTypeMap$type.propName;\n  const id = generateUid();\n  const gridItemProperties = getGridItemProperties(id);\n  let shape;\n  if (type === PAGEBREAK) {\n    const yPos = item.yPos || 0;\n    shape = getPageBreakItemShape(yPos, item.isStatic);\n  } else if (type === PRINT_TITLE_PAGE) {\n    shape = getPrintTitlePageItemShape();\n  } else {\n    shape = NEW_ITEM_SHAPE;\n  }\n  return {\n    id,\n    type,\n    position: item.position || null,\n    [itemPropName]: item.content,\n    ...NEW_ITEM_SHAPE,\n    ...gridItemProperties,\n    ...shape\n  };\n};","import { getGridItemProperties } from './gridUtil.js';\nimport { TEXT, SPACER } from './itemTypes.js';\nexport const spacerContent = 'SPACER_ITEM_FOR_DASHBOARD_LAYOUT_CONVENIENCE';\nexport const emptyTextItemContent = 'TEXT_ITEM_WITH_NO_CONTENT';\nconst isBackendSpacerType = item => item.type === TEXT && item.text === spacerContent;\nconst isUiSpacerType = item => item.type === SPACER;\nconst isTextType = item => item.type === TEXT && item.text !== spacerContent;\nexport const convertUiItemsToBackend = items => items.map(item => {\n  let text = null;\n  if (isUiSpacerType(item)) {\n    text = spacerContent;\n  } else if (isTextType(item)) {\n    text = item.text || emptyTextItemContent;\n  }\n  return {\n    ...item,\n    ...(text ? {\n      text\n    } : {})\n  };\n});\nexport const convertBackendItemsToUi = items => items.map(item => {\n  const type = isBackendSpacerType(item) ? SPACER : item.type;\n  const gridProperties = getGridItemProperties(item.id);\n  const text = isTextType(item) ? item.text === emptyTextItemContent ? '' : item.text : null;\n  return {\n    ...item,\n    ...(text !== null ? {\n      text\n    } : {}),\n    type,\n    ...gridProperties\n  };\n});","import arrayClean from 'd2-utilizr/lib/arrayClean.js';\n\n// Id, name\nexport const getIdNameFields = function () {\n  let {\n    rename\n  } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return ['id', `${rename ? 'displayName~rename(name)' : 'name,displayName'}`];\n};\n\n// Item\nexport const getItemFields = () => ['dimensionItem~rename(id)', 'displayName~rename(name)', 'dimensionItemType'];\n\n// Dimension\nexport const getDimensionFields = _ref => {\n  let {\n    withItems,\n    withRepetition\n  } = _ref;\n  return arrayClean(['dimension', 'legendSet[id]', 'filter', 'programStage', withItems ? `items[${getItemFields().join(',')}]` : ``, withRepetition ? 'repetition' : '', 'dimensionType', 'program[id]', 'optionSet[id]', 'valueType']);\n};\n\n// Axis\nexport const getAxesFields = _ref2 => {\n  let {\n    withItems,\n    withRepetition\n  } = _ref2;\n  return [`columns[${getDimensionFields({\n    withItems,\n    withRepetition\n  }).join(',')}]`, `rows[${getDimensionFields({\n    withItems,\n    withRepetition\n  }).join(',')}]`, `filters[${getDimensionFields({\n    withItems,\n    withRepetition\n  }).join(',')}]`];\n};\n\n// Favorite\nexport const getFavoriteFields = _ref3 => {\n  let {\n    withDimensions,\n    withOptions,\n    withRepetition\n  } = _ref3;\n  return arrayClean([`${getIdNameFields({\n    rename: true\n  }).join(',')}`, 'type', 'displayDescription~rename(description)', withDimensions ? `${getAxesFields({\n    withItems: true,\n    withRepetition\n  }).join(',')}` : ``, withOptions ? ['*', '!attributeDimensions', '!attributeValues', '!category', '!categoryDimensions', '!categoryOptionGroupSetDimensions', '!columnDimensions', '!dataDimensionItems', '!dataElementDimensions', '!dataElementGroupSetDimensions', '!filterDimensions', '!itemOrganisationUnitGroups', '!lastUpdatedBy', '!organisationUnitGroupSetDimensions', '!organisationUnitLevels', '!organisationUnits', '!programIndicatorDimensions', '!relativePeriods', '!reportParams', '!rowDimensions', '!translations', '!userOrganisationUnit', '!userOrganisationUnitChildren', '!userOrganisationUnitGrandChildren'].join(',') : '']);\n};\nexport const getFavoritesFields = () => [`visualization[${getFavoriteFields({\n  withDimensions: false\n}).join(',')}]`, `map[${getFavoriteFields({\n  withDimensions: false\n}).join(',')}]`, `eventReport[${getFavoriteFields({\n  withDimensions: false\n}).join(',')}]`, `eventChart[${getFavoriteFields({\n  withDimensions: false\n}).join(',')}]`, `eventVisualization[${getFavoriteFields({\n  withDimensions: false\n}).join(',')}]`];\n\n// List item\nexport const getListItemFields = () => [`reports[${['type', ...getIdNameFields({\n  rename: true\n})].join(',')}]`, `resources[${getIdNameFields({\n  rename: true\n}).join(',')}]`, `users[${getIdNameFields({\n  rename: true\n}).join(',')}]`];\n\n// Map\nexport const getMapFields = () => {\n  const favoriteFields = getFavoriteFields({\n    withDimensions: true,\n    withOptions: true\n  });\n  const teFields = 'program[id,displayName~rename(name)],programStage[id,displayName~rename(name)],trackedEntityType[id,displayName~rename(name)]';\n  return [`${getIdNameFields({\n    rename: true\n  }).join(',')}`, 'user,longitude,latitude,zoom,basemap', `mapViews[${favoriteFields.concat(teFields)}]`];\n};","import arrayClean from 'd2-utilizr/lib/arrayClean.js';\nimport { isViewMode } from '../modules/dashboardModes.js';\nimport { getCustomDashboards } from '../modules/getCustomDashboards.js';\nimport { withShape } from '../modules/gridUtil.js';\nimport { getIdNameFields, getListItemFields, getFavoritesFields } from './metadata.js';\nconst getDashboardItemsFields = () => arrayClean(['id', 'type', 'shape', 'x', 'y', 'width~rename(w)', 'height~rename(h)', 'messages', 'text', 'appKey', `${getListItemFields().join(',')}`, `${getFavoritesFields().join(',')}`]);\nconst baseDashboardFields = arrayClean(['id', 'displayName', 'displayDescription', 'favorite~rename(starred)', 'access', 'restrictFilters', 'allowedFilters', 'layout', 'itemConfig', `dashboardItems[${getDashboardItemsFields().join(',')}]`]);\nexport const viewDashboardQuery = {\n  resource: 'dashboards',\n  id: _ref => {\n    let {\n      id\n    } = _ref;\n    return id;\n  },\n  params: {\n    fields: baseDashboardFields\n  }\n};\nexport const editDashboardQuery = {\n  resource: 'dashboards',\n  id: _ref2 => {\n    let {\n      id\n    } = _ref2;\n    return id;\n  },\n  params: {\n    fields: arrayClean([...baseDashboardFields, `user[${getIdNameFields({\n      rename: true\n    }).join(',')}]`, 'name', 'code', 'description', 'created', 'favorites', 'lastUpdated', 'href' // needed for d2-ui-translations-dialog\n    ])\n  }\n};\n\n// Get more info about selected dashboard\nexport const apiFetchDashboard = async function (dataEngine, id) {\n  let {\n    mode = null,\n    forSave = false\n  } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  const query = isViewMode(mode) ? viewDashboardQuery : editDashboardQuery;\n  try {\n    const dashboardData = await dataEngine.query({\n      dashboard: query\n    }, {\n      variables: {\n        id\n      }\n    });\n    const dashboard = dashboardData.dashboard;\n    if (!forSave) {\n      return getCustomDashboards(Object.assign({}, dashboard, {\n        dashboardItems: withShape(dashboard.dashboardItems)\n      }))[0];\n    }\n    return dashboard;\n  } catch (error) {\n    console.log('Error: ', error);\n  }\n};","import arrayFrom from 'd2-utilizr/lib/arrayFrom.js';\nimport { convertBackendItemsToUi } from './uiBackendItemConverter.js';\n\n/**\n * Returns the array of dashboards, customized for ui\n * @function\n * @param {Array} data The original dashboard list\n * @returns {Array}\n */\nexport const getCustomDashboards = data => arrayFrom(data).map(d => {\n  var _d$allowedFilters;\n  return {\n    id: d.id,\n    name: d.name,\n    code: d.code,\n    displayName: d.displayName,\n    description: d.description,\n    displayDescription: d.displayDescription,\n    starred: d.starred,\n    created: d.created,\n    lastUpdated: d.lastUpdated,\n    access: d.access,\n    dashboardItems: convertBackendItemsToUi(d.dashboardItems),\n    restrictFilters: d.restrictFilters,\n    allowedFilters: (_d$allowedFilters = d.allowedFilters) !== null && _d$allowedFilters !== void 0 ? _d$allowedFilters : [],\n    href: d.href,\n    layout: d.layout,\n    itemConfig: d.itemConfig\n  };\n});","import { EDIT } from '../modules/dashboardModes.js';\nimport { apiFetchDashboard } from './fetchDashboard.js';\nexport const createDashboardMutation = {\n  resource: 'dashboards',\n  type: 'create',\n  data: _ref => {\n    let {\n      data\n    } = _ref;\n    return data;\n  }\n};\nexport const updateDashboardMutation = {\n  resource: 'dashboards',\n  type: 'update',\n  id: _ref2 => {\n    let {\n      id\n    } = _ref2;\n    return id;\n  },\n  data: _ref3 => {\n    let {\n      data\n    } = _ref3;\n    return data;\n  },\n  params: {\n    skipTranslation: true,\n    skipSharing: true\n  }\n};\nconst generatePayload = function () {\n  let dashboard = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let data = arguments.length > 1 ? arguments[1] : undefined;\n  return {\n    ...dashboard,\n    name: data.name,\n    code: data.code,\n    description: data.description,\n    dashboardItems: data.dashboardItems.map(item => ({\n      ...item,\n      width: item.w,\n      height: item.h\n    })),\n    allowedFilters: data.allowedFilters,\n    restrictFilters: data.restrictFilters,\n    layout: data.layout,\n    itemConfig: data.itemConfig\n  };\n};\nexport const updateDashboard = async (dataEngine, data) => {\n  const dashboard = await apiFetchDashboard(dataEngine, data.id, {\n    mode: EDIT,\n    forSave: true\n  });\n  const {\n    response\n  } = await dataEngine.mutate(updateDashboardMutation, {\n    variables: {\n      id: data.id,\n      data: generatePayload(dashboard, data)\n    }\n  });\n  return response.uid;\n};\nexport const postDashboard = async (dataEngine, data) => {\n  const {\n    response\n  } = await dataEngine.mutate(createDashboardMutation, {\n    variables: {\n      data: generatePayload({}, data)\n    }\n  });\n  return response.uid;\n};","/** @module reducers/editDashboard */\n// import { generateUid } from 'd2/uid'\nimport update from 'immutability-helper';\nimport isEmpty from 'lodash/isEmpty.js';\nimport { getDashboardItem } from '../modules/gridUtil.js';\n// import {\n//     getGridItemProperties,\n//     getPageBreakItemShape,\n//     getPrintTitlePageItemShape,\n//     NEW_ITEM_SHAPE,\n// } from '../modules/gridUtil'\n// import { itemTypeMap, PAGEBREAK, PRINT_TITLE_PAGE } from '../modules/itemTypes'\nimport { orArray, orObject } from '../modules/util.js';\nexport const RECEIVED_EDIT_DASHBOARD = 'RECEIVED_EDIT_DASHBOARD';\nexport const RECEIVED_NOT_EDITING = 'RECEIVED_NOT_EDITING';\nexport const START_NEW_DASHBOARD = 'START_NEW_DASHBOARD';\nexport const RECEIVED_TITLE = 'RECEIVED_TITLE';\nexport const RECEIVED_CODE = 'RECEIVED_CODE';\nexport const RECEIVED_DESCRIPTION = 'RECEIVED_DESCRIPTION';\nexport const ADD_DASHBOARD_ITEM = 'ADD_DASHBOARD_ITEM';\nexport const REMOVE_DASHBOARD_ITEM = 'REMOVE_DASHBOARD_ITEM';\nexport const UPDATE_DASHBOARD_ITEM = 'UPDATE_DASHBOARD_ITEM';\nexport const RECEIVED_DASHBOARD_ITEM_SHAPES = 'RECEIVED_DASHBOARD_ITEM_SHAPES';\nexport const SET_PRINT_PREVIEW_VIEW = 'SET_PRINT_PREVIEW_VIEW';\nexport const CLEAR_PRINT_PREVIEW_VIEW = 'CLEAR_PRINT_PREVIEW_VIEW';\nexport const RECEIVED_FILTER_SETTINGS = 'RECEIVED_FILTER_SETTINGS';\nexport const RECEIVED_HIDE_GRID = 'RECEIVED_HIDE_GRID';\nexport const RECEIVED_LAYOUT_COLUMNS = 'RECEIVED_LAYOUT_COLUMNS';\nexport const RECEIVED_ITEM_CONFIG_INSERT_POSITION = 'RECEIVED_ITEM_CONFIG_INSERT_POSITION';\nexport const EMPTY_STATE_EDIT_DASHBOARD = {};\nexport const DEFAULT_STATE_EDIT_DASHBOARD = {\n  id: '',\n  name: '',\n  code: '',\n  access: {\n    update: true,\n    delete: true\n  },\n  allowedFilters: [],\n  description: '',\n  dashboardItems: [],\n  restrictFilters: false,\n  printPreviewView: false,\n  isDirty: false,\n  href: '',\n  hideGrid: false,\n  layout: {\n    columns: []\n  },\n  itemConfig: {\n    insertPosition: 'END'\n  }\n};\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_STATE_EDIT_DASHBOARD;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case RECEIVED_EDIT_DASHBOARD:\n      {\n        const newState = {};\n        Object.keys(DEFAULT_STATE_EDIT_DASHBOARD).forEach(k => newState[k] = action.value[k]);\n        newState.printPreviewView = DEFAULT_STATE_EDIT_DASHBOARD.printPreviewView;\n        newState.isDirty = DEFAULT_STATE_EDIT_DASHBOARD.isDirty;\n        return newState;\n      }\n    case RECEIVED_NOT_EDITING:\n      return EMPTY_STATE_EDIT_DASHBOARD;\n    case SET_PRINT_PREVIEW_VIEW:\n      return Object.assign({}, state, {\n        printPreviewView: true\n      });\n    case CLEAR_PRINT_PREVIEW_VIEW:\n      return Object.assign({}, state, {\n        printPreviewView: false\n      });\n    case START_NEW_DASHBOARD:\n      return DEFAULT_STATE_EDIT_DASHBOARD;\n    case RECEIVED_TITLE:\n      {\n        return Object.assign({}, state, {\n          name: action.value,\n          isDirty: true\n        });\n      }\n    case RECEIVED_CODE:\n      {\n        return Object.assign({}, state, {\n          code: action.value,\n          isDirty: true\n        });\n      }\n    case RECEIVED_DESCRIPTION:\n      {\n        return Object.assign({}, state, {\n          description: action.value,\n          isDirty: true\n        });\n      }\n    case ADD_DASHBOARD_ITEM:\n      {\n        const dashboardItem = getDashboardItem(action.value);\n        if (!dashboardItem.position) {\n          return update(state, {\n            dashboardItems: {\n              $unshift: [dashboardItem]\n            },\n            isDirty: {\n              $set: true\n            }\n          });\n        }\n        return update(state, {\n          dashboardItems: {\n            $splice: [[parseInt(dashboardItem.position), 0, dashboardItem]]\n          },\n          isDirty: {\n            $set: true\n          }\n        });\n      }\n    case REMOVE_DASHBOARD_ITEM:\n      {\n        const idToRemove = action.value;\n        const dashboardItemIndex = state.dashboardItems.findIndex(item => item.id === idToRemove);\n        if (dashboardItemIndex > -1) {\n          return update(state, {\n            dashboardItems: {\n              $splice: [[dashboardItemIndex, 1]]\n            },\n            isDirty: {\n              $set: true\n            }\n          });\n        }\n        return state;\n      }\n    case RECEIVED_DASHBOARD_ITEM_SHAPES:\n      {\n        if (!action.value) {\n          return state;\n        }\n        const stateItems = orArray(state.dashboardItems);\n        if (stateItems.length !== action.value.length) {\n          return {\n            ...state,\n            dashboardItems: action.value\n          };\n        }\n        let shapesHaveChanged = false;\n        const newStateItems = action.value.map(_ref => {\n          let {\n            x,\n            y,\n            w,\n            h,\n            i\n          } = _ref;\n          const stateItem = stateItems.find(si => si.id === i);\n          if (!(stateItem.x === x && stateItem.y === y && stateItem.w === w && stateItem.h === h)) {\n            shapesHaveChanged = true;\n            return Object.assign({}, stateItem, {\n              w,\n              h,\n              x,\n              y\n            });\n          }\n          return stateItem;\n        });\n        return {\n          ...state,\n          dashboardItems: shapesHaveChanged ? newStateItems : state.dashboardItems,\n          isDirty: shapesHaveChanged\n        };\n      }\n    case UPDATE_DASHBOARD_ITEM:\n      {\n        const dashboardItem = action.value;\n        const dashboardItemIndex = state.dashboardItems.findIndex(item => item.id === dashboardItem.id);\n        if (dashboardItemIndex > -1) {\n          const newState = update(state, {\n            dashboardItems: {\n              $splice: [[dashboardItemIndex, 1, Object.assign({}, dashboardItem)]]\n            },\n            isDirty: {\n              $set: true\n            }\n          });\n          return newState;\n        }\n        return state;\n      }\n    case RECEIVED_FILTER_SETTINGS:\n      {\n        return Object.assign({}, state, {\n          allowedFilters: action.value.allowedFilters,\n          restrictFilters: action.value.restrictFilters,\n          isDirty: true\n        });\n      }\n    case RECEIVED_HIDE_GRID:\n      {\n        return {\n          ...state,\n          hideGrid: action.value\n        };\n      }\n    case RECEIVED_LAYOUT_COLUMNS:\n      {\n        return {\n          ...state,\n          layout: {\n            ...state.layout,\n            columns: action.value\n          }\n        };\n      }\n    case RECEIVED_ITEM_CONFIG_INSERT_POSITION:\n      {\n        return {\n          ...state,\n          itemConfig: {\n            ...state.itemConfig,\n            insertPosition: action.value\n          }\n        };\n      }\n    default:\n      return state;\n  }\n});\n\n// root selector\n\nexport const sGetEditDashboardRoot = state => state.editDashboard;\n\n// selectors\n\nexport const sGetIsEditing = state => !isEmpty(state.editDashboard);\nexport const sGetIsPrintPreviewView = state => sGetEditDashboardRoot(state).printPreviewView;\nexport const sGetEditDashboardName = state => sGetEditDashboardRoot(state).name;\nexport const sGetEditDashboardCode = state => sGetEditDashboardRoot(state).code;\nexport const sGetEditDashboardDescription = state => sGetEditDashboardRoot(state).description;\nexport const sGetEditDashboardItems = state => orObject(sGetEditDashboardRoot(state)).dashboardItems;\nexport const sGetEditIsDirty = state => sGetEditDashboardRoot(state).isDirty;\nexport const sGetHideGrid = state => sGetEditDashboardRoot(state).hideGrid;\nconst getLayout = editDashboard => editDashboard.layout;\nexport const sGetLayout = state => orObject(getLayout(sGetEditDashboardRoot(state)));\nconst getColumns = layout => layout.columns;\nexport const sGetLayoutColumns = state => orArray(getColumns(sGetLayout(state)));\nconst getItemConfig = editDashboard => editDashboard.itemConfig;\nexport const sGetItemConfig = state => orObject(getItemConfig(sGetEditDashboardRoot(state)));\nconst getInsertPosition = itemConfig => itemConfig.insertPosition;\nexport const sGetItemConfigInsertPosition = state => getInsertPosition(sGetItemConfig(state));","import i18n from '@dhis2/d2-i18n';\nimport { updateDashboard, postDashboard } from '../api/editDashboard.js';\nimport { addToItemsEnd, addToItemsStart, getAutoItemShapes, getDashboardItem, updateItems } from '../modules/gridUtil.js';\nimport { convertUiItemsToBackend } from '../modules/uiBackendItemConverter.js';\nimport { RECEIVED_EDIT_DASHBOARD, START_NEW_DASHBOARD, RECEIVED_NOT_EDITING, RECEIVED_TITLE, RECEIVED_DESCRIPTION, RECEIVED_DASHBOARD_ITEM_SHAPES, ADD_DASHBOARD_ITEM, UPDATE_DASHBOARD_ITEM, REMOVE_DASHBOARD_ITEM, SET_PRINT_PREVIEW_VIEW, CLEAR_PRINT_PREVIEW_VIEW, RECEIVED_FILTER_SETTINGS, sGetEditDashboardRoot, RECEIVED_HIDE_GRID, RECEIVED_LAYOUT_COLUMNS, RECEIVED_ITEM_CONFIG_INSERT_POSITION, sGetEditDashboardItems, sGetLayoutColumns, sGetItemConfigInsertPosition, RECEIVED_CODE } from '../reducers/editDashboard.js';\nimport { tFetchDashboards } from './dashboards.js';\n\n// actions\n\nexport const acSetEditDashboard = dashboard => ({\n  type: RECEIVED_EDIT_DASHBOARD,\n  value: dashboard\n});\nexport const acSetEditNewDashboard = () => ({\n  type: START_NEW_DASHBOARD\n});\nexport const acClearEditDashboard = () => ({\n  type: RECEIVED_NOT_EDITING\n});\nexport const acSetPrintPreviewView = () => ({\n  type: SET_PRINT_PREVIEW_VIEW\n});\nexport const acClearPrintPreviewView = () => ({\n  type: CLEAR_PRINT_PREVIEW_VIEW\n});\nexport const acSetDashboardTitle = value => ({\n  type: RECEIVED_TITLE,\n  value\n});\nexport const acSetDashboardCode = value => ({\n  type: RECEIVED_CODE,\n  value\n});\nexport const acSetDashboardDescription = value => ({\n  type: RECEIVED_DESCRIPTION,\n  value\n});\nexport const acUpdateDashboardItemShapes = value => ({\n  type: RECEIVED_DASHBOARD_ITEM_SHAPES,\n  value\n});\nexport const acAddDashboardItem = item => ({\n  type: ADD_DASHBOARD_ITEM,\n  value: item\n});\nexport const acUpdateDashboardItem = item => ({\n  type: UPDATE_DASHBOARD_ITEM,\n  value: item\n});\nexport const acRemoveDashboardItem = value => ({\n  type: REMOVE_DASHBOARD_ITEM,\n  value\n});\nexport const acSetFilterSettings = value => ({\n  type: RECEIVED_FILTER_SETTINGS,\n  value\n});\nexport const acSetHideGrid = value => ({\n  type: RECEIVED_HIDE_GRID,\n  value\n});\nexport const acSetLayoutColumns = value => ({\n  type: RECEIVED_LAYOUT_COLUMNS,\n  value\n});\nexport const acSetItemConfigInsertPosition = value => ({\n  type: RECEIVED_ITEM_CONFIG_INSERT_POSITION,\n  value\n});\n\n// thunks\n\n// no layout + end: add to new row at the end, default size\n// no layout + start: add to 0,0, default size\n// layout + end: calculate and add to \"next shape in layout\"\n// layout + start: add to 0,0,0,0, sort, remount\n\nexport const tSetDashboardItems = (itemToAdd, itemIdToRemove) => (dispatch, getState) => {\n  const insertPosition = sGetItemConfigInsertPosition(getState());\n  const columns = sGetLayoutColumns(getState());\n  let items = [...sGetEditDashboardItems(getState())];\n  let dashboardItemsWithShapes;\n  if (!itemToAdd && !itemIdToRemove) {\n    // changing columns\n\n    if (!columns.length) {\n      // freeflow\n      updateItems(items, dispatch);\n    } else {\n      dashboardItemsWithShapes = getAutoItemShapes(items, columns);\n      updateItems(dashboardItemsWithShapes, dispatch, {\n        reload: true\n      });\n    }\n  } else {\n    if (itemIdToRemove) {\n      items = items.filter(item => item.id !== itemIdToRemove);\n    }\n    if (!itemToAdd) {\n      dashboardItemsWithShapes = getAutoItemShapes(items, columns);\n      updateItems(dashboardItemsWithShapes, dispatch);\n    } else {\n      const newDashboardItem = getDashboardItem(itemToAdd);\n      switch (insertPosition) {\n        case 'START':\n          dashboardItemsWithShapes = addToItemsStart(items, columns, newDashboardItem);\n          break;\n        case 'END':\n        default:\n          dashboardItemsWithShapes = addToItemsEnd(items, columns, newDashboardItem);\n      }\n      updateItems(dashboardItemsWithShapes, dispatch);\n    }\n  }\n};\nexport const tSaveDashboard = () => async (dispatch, getState, dataEngine) => {\n  const dashboard = sGetEditDashboardRoot(getState());\n  const dashboardToSave = {\n    ...dashboard,\n    dashboardItems: convertUiItemsToBackend(dashboard.dashboardItems),\n    name: dashboard.name || i18n.t('Untitled dashboard')\n  };\n  const dashboardId = dashboardToSave.id ? await updateDashboard(dataEngine, dashboardToSave) : await postDashboard(dataEngine, dashboardToSave);\n\n  // update the dashboard list\n  await dispatch(tFetchDashboards());\n  return Promise.resolve(dashboardId);\n};","export const SET_ITEM_ACTIVE_TYPE = 'SET_ITEM_ACTIVE_TYPE';\nexport const CLEAR_ITEM_ACTIVE_TYPES = 'CLEAR_ITEM_ACTIVE_TYPES';\nexport const DEFAULT_STATE_ITEM_ACTIVE_TYPES = {};\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_STATE_ITEM_ACTIVE_TYPES;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_ITEM_ACTIVE_TYPE:\n      {\n        return {\n          ...state,\n          [action.id]: action.activeType\n        };\n      }\n    case CLEAR_ITEM_ACTIVE_TYPES:\n      {\n        return DEFAULT_STATE_ITEM_ACTIVE_TYPES;\n      }\n    default:\n      return state;\n  }\n});\nexport const sGetItemActiveType = (state, id) => state.itemActiveTypes[id];","import { SET_ITEM_ACTIVE_TYPE, CLEAR_ITEM_ACTIVE_TYPES } from '../reducers/itemActiveTypes.js';\nexport const acSetItemActiveType = (id, activeType) => {\n  const action = {\n    type: SET_ITEM_ACTIVE_TYPE,\n    id,\n    activeType\n  };\n  return action;\n};\nexport const acClearItemActiveTypes = () => ({\n  type: CLEAR_ITEM_ACTIVE_TYPES\n});","import { getDimensionById, DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT } from '@dhis2/analytics';\nexport const SET_DIMENSIONS = 'SET_DIMENSIONS';\nconst PE_OU_DIMENSIONS = [getDimensionById(DIMENSION_ID_PERIOD), getDimensionById(DIMENSION_ID_ORGUNIT)];\nconst INITIAL_DIMENSIONS = [];\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : INITIAL_DIMENSIONS;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_DIMENSIONS:\n      {\n        return [...PE_OU_DIMENSIONS, ...action.value];\n      }\n    default:\n      return state;\n  }\n});\nexport const sGetDimensions = state => state.dimensions;","import { createSelector } from 'reselect';\nimport { sGetDimensions } from './dimensions.js';\nexport const CLEAR_ITEM_FILTERS = 'CLEAR_ITEM_FILTERS';\nexport const ADD_ITEM_FILTER = 'ADD_ITEM_FILTER';\nexport const REMOVE_ITEM_FILTER = 'REMOVE_ITEM_FILTER';\nexport const DEFAULT_STATE_ITEM_FILTERS = {};\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_STATE_ITEM_FILTERS;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_ITEM_FILTER:\n      {\n        return {\n          ...state,\n          [action.filter.id]: action.filter.value\n        };\n      }\n    case REMOVE_ITEM_FILTER:\n      {\n        const newState = {\n          ...state\n        };\n        delete newState[action.id];\n        return newState;\n      }\n    case CLEAR_ITEM_FILTERS:\n      {\n        return DEFAULT_STATE_ITEM_FILTERS;\n      }\n    default:\n      return state;\n  }\n});\n\n// selectors\n\nexport const sGetItemFiltersRoot = state => state.itemFilters;\n\n// simplify the filters structure to:\n// [{ id: 'pe', name: 'Period', values: [{ id: 2019: name: '2019' }, {id: 'LAST_MONTH', name: 'Last month' }]}, ...]\nexport const sGetNamedItemFilters = createSelector([sGetItemFiltersRoot, sGetDimensions], (filters, dimensions) => Object.keys(filters).reduce((arr, id) => {\n  arr.push({\n    id: id,\n    name: dimensions.find(dimension => dimension.id === id).name,\n    values: filters[id].map(value => ({\n      id: value.id,\n      name: value.displayName || value.name\n    }))\n  });\n  return arr;\n}, []));","import { ADD_ITEM_FILTER, REMOVE_ITEM_FILTER, CLEAR_ITEM_FILTERS } from '../reducers/itemFilters.js';\nexport const FILTER_ORG_UNIT = 'ou';\n\n// actions\n\nexport const acAddItemFilter = filter => ({\n  type: ADD_ITEM_FILTER,\n  filter\n});\nexport const acRemoveItemFilter = id => ({\n  type: REMOVE_ITEM_FILTER,\n  id\n});\nexport const acClearItemFilters = () => ({\n  type: CLEAR_ITEM_FILTERS\n});","/** @module reducers/editDashboard */\nimport update from 'immutability-helper';\nimport isEmpty from 'lodash/isEmpty.js';\nimport { orArray } from '../modules/util.js';\nexport const SET_PRINT_DASHBOARD = 'SET_PRINT_DASHBOARD';\nexport const CLEAR_PRINT_DASHBOARD = 'CLEAR_PRINT_DASHBOARD';\nexport const ADD_PRINT_DASHBOARD_ITEM = 'ADD_PRINT_DASHBOARD_ITEM';\nexport const SET_PRINT_DASHBOARD_LAYOUT = 'SET_PRINT_DASHBOARD_LAYOUT';\nexport const REMOVE_PRINT_DASHBOARD_ITEM = 'REMOVE_PRINT_DASHBOARD_ITEM';\nexport const UPDATE_PRINT_DASHBOARD_ITEM = 'UPDATE_PRINT_DASHBOARD_ITEM';\nexport const DEFAULT_STATE_PRINT_DASHBOARD = {};\nconst DEFAULT_DASHBOARD_ITEMS = [];\nexport const NEW_PRINT_DASHBOARD_STATE = {\n  id: '',\n  name: '',\n  access: {},\n  description: '',\n  dashboardItems: DEFAULT_DASHBOARD_ITEMS\n};\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_STATE_PRINT_DASHBOARD;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_PRINT_DASHBOARD:\n      {\n        const newState = {};\n        Object.keys(NEW_PRINT_DASHBOARD_STATE).map(k => newState[k] = action.value[k]);\n        return newState;\n      }\n    case CLEAR_PRINT_DASHBOARD:\n      return DEFAULT_STATE_PRINT_DASHBOARD;\n    case ADD_PRINT_DASHBOARD_ITEM:\n      if (!action.value.position) {\n        return update(state, {\n          dashboardItems: {\n            $unshift: [action.value]\n          }\n        });\n      }\n      return update(state, {\n        dashboardItems: {\n          $splice: [[parseInt(action.value.position), 0, action.value]]\n        }\n      });\n    case REMOVE_PRINT_DASHBOARD_ITEM:\n      {\n        const idToRemove = action.value;\n        const dashboardItemIndex = state.dashboardItems.findIndex(item => item.id === idToRemove);\n        if (dashboardItemIndex > -1) {\n          return update(state, {\n            dashboardItems: {\n              $splice: [[dashboardItemIndex, 1]]\n            }\n          });\n        }\n        return state;\n      }\n    case UPDATE_PRINT_DASHBOARD_ITEM:\n      {\n        const dashboardItem = action.value;\n        const dashboardItemIndex = state.dashboardItems.findIndex(item => item.id === dashboardItem.id);\n        if (dashboardItemIndex > -1) {\n          const newState = update(state, {\n            dashboardItems: {\n              $splice: [[dashboardItemIndex, 1, Object.assign({}, dashboardItem)]]\n            }\n          });\n          return newState;\n        }\n        return state;\n      }\n    case SET_PRINT_DASHBOARD_LAYOUT:\n      {\n        const stateItems = orArray(state.dashboardItems);\n        let layoutHasChanged = false;\n        const newStateItems = action.value.map(_ref => {\n          let {\n            x,\n            y,\n            w,\n            h,\n            i\n          } = _ref;\n          const stateItem = stateItems.find(si => si.id === i);\n          if (!(stateItem.x === x && stateItem.y === y && stateItem.w === w && stateItem.h === h)) {\n            layoutHasChanged = true;\n            return Object.assign({}, stateItem, {\n              w,\n              h,\n              x,\n              y\n            });\n          }\n          return stateItem;\n        });\n        return layoutHasChanged ? {\n          ...state,\n          dashboardItems: newStateItems\n        } : state;\n      }\n    default:\n      return state;\n  }\n});\n\n// root selector\n\nexport const sGetPrintDashboardRoot = state => state.printDashboard;\n\n// selectors\n\nexport const sGetIsPrinting = state => !isEmpty(state.printDashboard);\nexport const sGetPrintDashboardName = state => sGetPrintDashboardRoot(state).name;\nexport const sGetPrintDashboardDescription = state => sGetPrintDashboardRoot(state).description;\nexport const sGetPrintDashboardItems = state => {\n  var _sGetPrintDashboardRo;\n  return ((_sGetPrintDashboardRo = sGetPrintDashboardRoot(state)) === null || _sGetPrintDashboardRo === void 0 ? void 0 : _sGetPrintDashboardRo.dashboardItems) || DEFAULT_DASHBOARD_ITEMS;\n};","import { generateUid } from 'd2/uid.js';\nimport { NEW_ITEM_SHAPE, getGridItemProperties, getPageBreakItemShape, getPrintTitlePageItemShape } from '../modules/gridUtil.js';\nimport { itemTypeMap, PAGEBREAK } from '../modules/itemTypes.js';\nimport { SET_PRINT_DASHBOARD, CLEAR_PRINT_DASHBOARD, SET_PRINT_DASHBOARD_LAYOUT, ADD_PRINT_DASHBOARD_ITEM, REMOVE_PRINT_DASHBOARD_ITEM, UPDATE_PRINT_DASHBOARD_ITEM } from '../reducers/printDashboard.js';\n\n// actions\n\nexport const acSetPrintDashboard = dashboard => ({\n  type: SET_PRINT_DASHBOARD,\n  value: dashboard\n});\nexport const acClearPrintDashboard = () => ({\n  type: CLEAR_PRINT_DASHBOARD\n});\nexport const acUpdatePrintDashboardLayout = value => ({\n  type: SET_PRINT_DASHBOARD_LAYOUT,\n  value\n});\nexport const acAddPrintDashboardItem = item => {\n  const type = item.type;\n  delete item.type;\n  const itemPropName = itemTypeMap[type].propName;\n  const id = generateUid();\n  const gridItemProperties = getGridItemProperties(id);\n  let shape;\n  if (type === PAGEBREAK) {\n    const yPos = item.yPos || 0;\n    shape = getPageBreakItemShape(yPos, item.isStatic);\n  } else {\n    shape = getPrintTitlePageItemShape(item.isOneItemPerPage);\n  }\n  return {\n    type: ADD_PRINT_DASHBOARD_ITEM,\n    value: {\n      id,\n      type,\n      position: item.position || null,\n      [itemPropName]: item.content,\n      ...NEW_ITEM_SHAPE,\n      ...gridItemProperties,\n      ...shape\n    }\n  };\n};\nexport const acRemovePrintDashboardItem = value => ({\n  type: REMOVE_PRINT_DASHBOARD_ITEM,\n  value\n});\nexport const acUpdatePrintDashboardItem = item => ({\n  type: UPDATE_PRINT_DASHBOARD_ITEM,\n  value: item\n});","export const messageConversationsQuery = {\n  resource: 'messageConversations',\n  params: {\n    fields: 'id,messageCount,lastUpdated,messageType,displayName,read,messages[id,read,sender[id,displayName],text,lastUpdated]',\n    order: 'read:asc',\n    pageSize: 200\n  }\n};\nexport const getMessages = async dataEngine => {\n  try {\n    const {\n      messageConversations\n    } = await dataEngine.query({\n      messageConversations: messageConversationsQuery\n    });\n    return messageConversations.messageConversations;\n  } catch (error) {\n    console.log('Error:', error);\n  }\n};","import update from 'immutability-helper';\nimport { arrayToIdMap } from '../modules/util.js';\nexport const RECEIVED_MESSAGES = 'RECEIVED_MESSAGES';\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case RECEIVED_MESSAGES:\n      {\n        const conversations = arrayToIdMap(action.value);\n        const newState = update(state, {\n          $merge: conversations\n        });\n        return newState;\n      }\n    default:\n      return state;\n  }\n});\n\n// selectors\n\nexport const sGetMessagesRoot = state => state.messages;","import { getMessages } from '../../../api/messages.js';\nimport { RECEIVED_MESSAGES } from '../../../reducers/messages.js';\nconst onError = (action, error) => {\n  console.log(`Error in action ${action}: ${error}`);\n  return error;\n};\nexport const receivedMessages = value => ({\n  type: RECEIVED_MESSAGES,\n  value\n});\nexport const tGetMessages = dataEngine => async dispatch => {\n  try {\n    const messageConversations = await getMessages(dataEngine);\n    return dispatch(receivedMessages(messageConversations));\n  } catch (err) {\n    return onError('Get Messages', err);\n  }\n};","export const getPreferredDashboardId = username => localStorage.getItem(`dhis2.dashboard.current.${username}`) || undefined;\nexport const storePreferredDashboardId = (username, dashboardId) => {\n  localStorage.setItem(`dhis2.dashboard.current.${username}`, dashboardId);\n};\nexport const getPluginOverrides = () => process.env.NODE_ENV !== 'production' && JSON.parse(localStorage.getItem('dhis2.dashboard.pluginOverrides')) || undefined;","export const SET_SELECTED = 'SET_SELECTED';\nexport const CLEAR_SELECTED = 'CLEAR_SELECTED';\nexport const DEFAULT_SELECTED_STATE = {};\nconst SELECTED_PROPERTIES = {\n  id: '',\n  displayName: '',\n  displayDescription: '',\n  access: {},\n  restrictFilters: false,\n  allowedFilters: [],\n  dashboardItems: [],\n  layout: [],\n  itemConfig: {}\n};\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_SELECTED_STATE;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_SELECTED:\n      {\n        const newState = {};\n        Object.keys(SELECTED_PROPERTIES).map(k => newState[k] = action.value[k]);\n        return newState;\n      }\n    case CLEAR_SELECTED:\n      {\n        return DEFAULT_SELECTED_STATE;\n      }\n    default:\n      return state;\n  }\n});\n\n// Selectors\n\nexport const sGetSelected = state => state.selected;\nexport const sGetSelectedId = state => sGetSelected(state).id;\nexport const sGetSelectedDisplayName = state => sGetSelected(state).displayName;\nexport const sGetSelectedDisplayDescription = state => sGetSelected(state).displayDescription;\nexport const sGetSelectedDashboardItems = state => sGetSelected(state).dashboardItems || SELECTED_PROPERTIES.dashboardItems;\nexport const sGetIsNullDashboardItems = state => sGetSelected(state).dashboardItems === undefined;","import objectClean from 'd2-utilizr/lib/objectClean.js';\nimport { orObject } from '../modules/util.js';\n\n/** @module reducers/visualizations */\n\nexport const ADD_VISUALIZATION = 'ADD_VISUALIZATION';\nexport const CLEAR_VISUALIZATIONS = 'CLEAR_VISUALIZATIONS';\nexport const DEFAULT_STATE_VISUALIZATIONS = {};\nconst isEmpty = p => p === undefined || p === null;\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_STATE_VISUALIZATIONS;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case ADD_VISUALIZATION:\n      {\n        return {\n          ...state,\n          [action.value.id]: objectClean({\n            ...orObject(state[action.value.id]),\n            ...action.value\n          }, isEmpty)\n        };\n      }\n    case CLEAR_VISUALIZATIONS:\n      {\n        return DEFAULT_STATE_VISUALIZATIONS;\n      }\n    default:\n      return state;\n  }\n});\n\n// root selector\nconst sGetVisualizationsRoot = state => state.visualizations;\n\n// selectors level 1\nexport const sGetVisualization = (state, id) => {\n  return sGetVisualizationsRoot(state)[id];\n};","import { ADD_VISUALIZATION, CLEAR_VISUALIZATIONS } from '../reducers/visualizations.js';\nexport const acAddVisualization = value => ({\n  type: ADD_VISUALIZATION,\n  value\n});\nexport const acClearVisualizations = () => ({\n  type: CLEAR_VISUALIZATIONS\n});","import { apiFetchDashboard } from '../api/fetchDashboard.js';\nimport { tGetMessages } from '../components/Item/MessagesItem/actions.js';\nimport { VIEW } from '../modules/dashboardModes.js';\nimport { MESSAGES } from '../modules/itemTypes.js';\nimport { storePreferredDashboardId } from '../modules/localStorage.js';\nimport { SET_SELECTED, CLEAR_SELECTED, sGetSelectedId } from '../reducers/selected.js';\nimport { acAppendDashboards } from './dashboards.js';\nimport { acClearItemActiveTypes } from './itemActiveTypes.js';\nimport { acClearItemFilters } from './itemFilters.js';\nimport { acClearVisualizations } from './visualizations.js';\n\n// actions\n\nexport const acSetSelected = value => ({\n  type: SET_SELECTED,\n  value\n});\nexport const acClearSelected = () => ({\n  type: CLEAR_SELECTED\n});\n\n// thunks\nexport const tSetSelectedDashboardById = (id, username) => async (dispatch, getState, dataEngine) => {\n  const dashboard = await apiFetchDashboard(dataEngine, id, {\n    mode: VIEW\n  });\n  dispatch(acAppendDashboards([{\n    id: dashboard.id,\n    displayName: dashboard.displayName,\n    starred: dashboard.starred\n  }]));\n  if (username) {\n    storePreferredDashboardId(username, id);\n  }\n  if (id !== sGetSelectedId(getState())) {\n    dispatch(acClearItemFilters());\n    dispatch(acClearVisualizations());\n    dispatch(acClearItemActiveTypes());\n  }\n  dashboard.dashboardItems.some(item => item.type === MESSAGES) && dispatch(tGetMessages(dataEngine));\n  dispatch(acSetSelected(dashboard));\n};\nexport const tSetSelectedDashboardByIdOffline = (id, username) => (dispatch, getState) => {\n  if (username) {\n    storePreferredDashboardId(username, id);\n  }\n  if (id !== sGetSelectedId(getState())) {\n    dispatch(acClearItemFilters());\n    dispatch(acClearVisualizations());\n    dispatch(acClearItemActiveTypes());\n  }\n  dispatch(acSetSelected({\n    id\n  }));\n};","export const SET_SHOW_DESCRIPTION = 'SET_SHOW_DESCRIPTION';\nexport const DEFAULT_STATE_SHOW_DESCRIPTION = false;\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_STATE_SHOW_DESCRIPTION;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case SET_SHOW_DESCRIPTION:\n      {\n        return action.value;\n      }\n    default:\n      return state;\n  }\n});\nexport const sGetShowDescription = state => state.showDescription;","import { getInstance } from 'd2';\nexport const NAMESPACE = 'dashboard';\nexport const hasDashboardNamespace = async d2 => await d2.currentUser.dataStore.has(NAMESPACE);\nconst getNamespace = async d2 => {\n  const hasNamespace = await hasDashboardNamespace(d2);\n  return hasNamespace ? await d2.currentUser.dataStore.get(NAMESPACE) : await d2.currentUser.dataStore.create(NAMESPACE);\n};\nexport const apiPostUserDataStoreValue = async (key, value) => {\n  const d2 = await getInstance();\n  const ns = await getNamespace(d2);\n  return ns.set(key, value);\n};\nexport const apiGetUserDataStoreValue = async (key, defaultValue) => {\n  var _ns$keys;\n  const d2 = await getInstance();\n  const ns = await getNamespace(d2);\n  const hasKey = ns === null || ns === void 0 ? void 0 : (_ns$keys = ns.keys) === null || _ns$keys === void 0 ? void 0 : _ns$keys.find(k => k === key);\n  if (hasKey) {\n    return await ns.get(key);\n  } else {\n    await apiPostUserDataStoreValue(key, defaultValue, ns);\n    console.log('(These errors to /userDataStore can be ignored)');\n    return defaultValue;\n  }\n};","import { DEFAULT_STATE_SHOW_DESCRIPTION } from '../reducers/showDescription.js';\nimport { apiGetUserDataStoreValue, apiPostUserDataStoreValue } from './userDataStore.js';\nconst KEY_SHOW_DESCRIPTION = 'showDescription';\nexport const apiGetShowDescription = async () => await apiGetUserDataStoreValue(KEY_SHOW_DESCRIPTION, DEFAULT_STATE_SHOW_DESCRIPTION);\nexport const apiPostShowDescription = value => apiPostUserDataStoreValue(KEY_SHOW_DESCRIPTION, value);","import { apiGetShowDescription } from '../api/description.js';\nimport { SET_SHOW_DESCRIPTION } from '../reducers/showDescription.js';\nexport const acSetShowDescription = value => ({\n  type: SET_SHOW_DESCRIPTION,\n  value\n});\nexport const tSetShowDescription = () => async dispatch => {\n  const onSuccess = value => {\n    dispatch(acSetShowDescription(value));\n  };\n  try {\n    const showDescription = await apiGetShowDescription();\n    return onSuccess(showDescription);\n  } catch (err) {\n    console.error('Error (apiGetShowDescription): ', err);\n    return err;\n  }\n};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"DashboardContainer_container__o9UOO\",\"contentWrap\":\"DashboardContainer_contentWrap__ydw3d\"};","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useRef, useState, useEffect, createContext, useContext } from 'react';\nimport classes from './styles/DashboardContainer.module.css';\nconst ContainerWidthContext = /*#__PURE__*/createContext(0);\nconst DashboardContainer = _ref => {\n  let {\n    children\n  } = _ref;\n  const [containerWidth, setContainerWidth] = useState(0);\n  const ref = useRef(null);\n  useEffect(() => {\n    const resizeObserver = new ResizeObserver(entries => {\n      setContainerWidth(entries[0].contentRect.width);\n    });\n    resizeObserver.observe(ref.current);\n    return () => {\n      resizeObserver.disconnect();\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.container, 'dashboard-scroll-container'),\n    \"data-test\": \"inner-scroll-container\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: ref,\n    className: classes.contentWrap\n  }, /*#__PURE__*/React.createElement(ContainerWidthContext.Provider, {\n    value: containerWidth\n  }, children)));\n};\nDashboardContainer.propTypes = {\n  children: PropTypes.node\n};\nexport const useContainerWidth = () => useContext(ContainerWidthContext);\nexport default DashboardContainer;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"NoContentMessage_container__l9U5K\"};","import { colors } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './styles/NoContentMessage.module.css';\nconst NoContentMessage = _ref => {\n  let {\n    text\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(\"svg\", {\n    width: \"48\",\n    height: \"48\",\n    viewBox: \"0 0 48 48\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6.4387 47.8477L6.82684 45.8858C7.20466 45.9605 7.59673 46 8 46H10V48H8C7.46572 48 6.94367 47.9476 6.4387 47.8477ZM38 48V46H40C40.4033 46 40.7953 45.9605 41.1732 45.8858L41.5613 47.8477C41.0563 47.9476 40.5343 48 40 48H38ZM44.4449 46.6525L43.3323 44.9906C43.9875 44.552 44.552 43.9875 44.9906 43.3323L46.6525 44.4449C46.0685 45.3173 45.3173 46.0685 44.4449 46.6525ZM48 10H46V8C46 7.59673 45.9605 7.20466 45.8858 6.82684L47.8477 6.4387C47.9476 6.94367 48 7.46572 48 8V10ZM46.6525 3.55507L44.9906 4.66771C44.552 4.01254 43.9875 3.44804 43.3323 3.00941L44.4449 1.34748C45.3173 1.93154 46.0685 2.68266 46.6525 3.55507ZM10 0H8C7.46572 0 6.94367 0.0523755 6.4387 0.152272L6.82684 2.11425C7.20466 2.0395 7.59673 2 8 2H10V0ZM3.55508 1.34748L4.66771 3.00941C4.01254 3.44804 3.44804 4.01254 3.00941 4.66771L1.34748 3.55507C1.93154 2.68266 2.68266 1.93154 3.55508 1.34748ZM0 38H2V40C2 40.4033 2.0395 40.7953 2.11425 41.1732L0.152272 41.5613C0.0523755 41.0563 0 40.5343 0 40V38ZM3.55507 46.6525L4.66771 44.9906C4.01254 44.552 3.44804 43.9875 3.00941 43.3323L1.34748 44.4449C1.93154 45.3173 2.68266 46.0685 3.55507 46.6525ZM0 34H2V30H0V34ZM0 26H2V22H0V26ZM0 18H2V14H0V18ZM0 10H2V8C2 7.59673 2.0395 7.20466 2.11425 6.82684L0.152272 6.4387C0.0523756 6.94367 0 7.46572 0 8V10ZM14 0V2H18V0H14ZM22 0V2H26V0H22ZM30 0V2H34V0H30ZM38 0V2H40C40.4033 2 40.7953 2.0395 41.1732 2.11425L41.5613 0.152272C41.0563 0.0523755 40.5343 0 40 0H38ZM48 14H46V18H48V14ZM48 22H46V26H48V22ZM48 30H46V34H48V30ZM48 38H46V40C46 40.4033 45.9605 40.7953 45.8858 41.1732L47.8477 41.5613C47.9476 41.0563 48 40.5343 48 40V38ZM34 48V46H30V48H34ZM26 48V46H22V48H26ZM18 48V46H14V48H18Z\",\n    fill: colors.grey500\n  })), /*#__PURE__*/React.createElement(\"p\", null, text));\n};\nNoContentMessage.propTypes = {\n  text: PropTypes.string\n};\nexport default NoContentMessage;","// extracted by mini-css-extract-plugin\nexport default {\"noticeContainer\":\"Notice_noticeContainer__v5QDw\"};","import { NoticeBox, CenteredContent } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './styles/Notice.module.css';\nconst Notice = _ref => {\n  let {\n    title,\n    message\n  } = _ref;\n  return /*#__PURE__*/React.createElement(CenteredContent, {\n    position: \"top\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.noticeContainer\n  }, /*#__PURE__*/React.createElement(NoticeBox, {\n    title: title,\n    warning: true\n  }, message)));\n};\nNotice.propTypes = {\n  message: PropTypes.node,\n  title: PropTypes.string\n};\nexport default Notice;","import debounce from 'lodash/debounce.js';\nimport PropTypes from 'prop-types';\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nexport const WindowDimensionsCtx = /*#__PURE__*/createContext(null);\nconst windowDims = () => ({\n  height: window.innerHeight,\n  width: window.innerWidth\n});\nconst WindowDimensionsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [dimensions, setDimensions] = useState(windowDims());\n  useEffect(() => {\n    const handleResize = debounce(() => {\n      setDimensions(windowDims());\n    }, 100);\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  return /*#__PURE__*/React.createElement(WindowDimensionsCtx.Provider, {\n    value: dimensions\n  }, children);\n};\nWindowDimensionsProvider.propTypes = {\n  children: PropTypes.node.isRequired\n};\nexport default WindowDimensionsProvider;\nexport const useWindowDimensions = () => {\n  return useContext(WindowDimensionsCtx);\n};","export const setHeaderbarVisible = show => {\n  const header = document.getElementsByTagName('header')[0];\n  if (show) {\n    header.classList.remove('hidden');\n  } else {\n    header.classList.add('hidden');\n  }\n};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"PrintActionsBar_container__YNrJp\",\"actions\":\"PrintActionsBar_actions__O+PSZ\",\"link\":\"PrintActionsBar_link__prkuA\",\"buttonSmall\":\"PrintActionsBar_buttonSmall__d4hf7\",\"buttonLarge\":\"PrintActionsBar_buttonLarge__cO99a\"};","import i18n from '@dhis2/d2-i18n';\nimport { Button, colors, IconChevronLeft24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport classes from './styles/PrintActionsBar.module.css';\n\n// set in PrintActionsBar.module.css\nexport const PRINT_ACTIONS_BAR_HEIGHT = 44;\nexport const PRINT_ACTIONS_BAR_HEIGHT_SM = 36;\nconst PrintActionsBar = _ref => {\n  let {\n    id\n  } = _ref;\n  const getExitPrintButton = isSmall => /*#__PURE__*/React.createElement(Button, {\n    className: isSmall ? classes.buttonSmall : classes.buttonLarge,\n    small: isSmall\n  }, /*#__PURE__*/React.createElement(IconChevronLeft24, {\n    color: colors.grey700\n  }), i18n.t('Exit print preview'));\n  const getPrintButton = isSmall => /*#__PURE__*/React.createElement(Button, {\n    className: isSmall ? classes.buttonSmall : classes.buttonLarge,\n    small: isSmall,\n    onClick: window.print\n  }, i18n.t('Print'));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.actions\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: classes.link,\n    to: `/${id}`\n  }, getExitPrintButton(true), getExitPrintButton(false)), getPrintButton(true), getPrintButton(false)));\n};\nPrintActionsBar.defaultValues = {\n  id: '/'\n};\nPrintActionsBar.propTypes = {\n  id: PropTypes.string\n};\nexport default PrintActionsBar;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"PrintInfo_container__poZzQ\",\"title\":\"PrintInfo_title__1-FMy\",\"printSuggestions\":\"PrintInfo_printSuggestions__4yrnk\",\"divider\":\"PrintInfo_divider__mlTyc\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './styles/PrintInfo.module.css';\nconst PrintInfo = _ref => {\n  let {\n    isLayout\n  } = _ref;\n  const layoutStyle = isLayout ? i18n.t('dashboard layout') : i18n.t('one item per page');\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.title\n  }, `${i18n.t('Print Preview')}: ${layoutStyle}`), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.printSuggestions\n  }, /*#__PURE__*/React.createElement(\"p\", null, `${i18n.t('For best print results')}:`), /*#__PURE__*/React.createElement(\"ul\", null, /*#__PURE__*/React.createElement(\"li\", null, i18n.t('Use Chrome or Edge web browser')), /*#__PURE__*/React.createElement(\"li\", null, i18n.t('Wait for all dashboard items to load before printing')), /*#__PURE__*/React.createElement(\"li\", null, i18n.t('Use A4 landscape paper size, default margin settings and turn on background graphics in the browser print dialog')))), /*#__PURE__*/React.createElement(\"hr\", {\n    className: classes.divider\n  }));\n};\nPrintInfo.propTypes = {\n  isLayout: PropTypes.bool\n};\nexport default PrintInfo;","import i18n from '@dhis2/d2-i18n';\nimport { colors, Button, Tooltip, IconDelete24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst DeleteItemButton = _ref => {\n  let {\n    onClick\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('Remove this item'),\n    placement: \"bottom\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    small: true,\n    onClick: onClick,\n    icon: /*#__PURE__*/React.createElement(IconDelete24, {\n      color: colors.red600\n    }),\n    dataTest: \"delete-item-button\"\n  }));\n};\nDeleteItemButton.propTypes = {\n  onClick: PropTypes.func\n};\nexport default DeleteItemButton;","// extracted by mini-css-extract-plugin\nexport default {\"itemHeaderWrap\":\"ItemHeader_itemHeaderWrap__Buh5L\",\"itemTitle\":\"ItemHeader_itemTitle__5qM4-\",\"itemHeaderRightWrap\":\"ItemHeader_itemHeaderRightWrap__lPjvp\",\"itemActionsWrap\":\"ItemHeader_itemActionsWrap__QsoZw\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acRemoveDashboardItem, tSetDashboardItems } from '../../../actions/editDashboard.js';\nimport { sGetEditDashboardItems, sGetLayoutColumns } from '../../../reducers/editDashboard.js';\nimport DeleteItemButton from './DeleteItemButton.js';\nimport classes from './styles/ItemHeader.module.css';\nconst EditItemActions = _ref => {\n  let {\n    itemId,\n    onDeleteItem\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.itemActionsWrap\n  }, /*#__PURE__*/React.createElement(DeleteItemButton, {\n    onClick: () => onDeleteItem(itemId)\n  }));\n};\nEditItemActions.propTypes = {\n  itemId: PropTypes.string,\n  onDeleteItem: PropTypes.func\n};\nconst mapDispatchToProps = {\n  onDeleteItem: itemId => (dispatch, getState) => {\n    const columns = sGetLayoutColumns(getState());\n    const dashboardItems = sGetEditDashboardItems(getState());\n    if (!columns.length || dashboardItems.length === 1) {\n      dispatch(acRemoveDashboardItem(itemId));\n    } else {\n      dispatch(tSetDashboardItems(null, itemId));\n    }\n  }\n};\nexport default connect(null, mapDispatchToProps)(EditItemActions);","// extracted by mini-css-extract-plugin\nexport default {\"warning\":\"PrintItemInfo_warning__FqXSu\"};","import i18n from '@dhis2/d2-i18n';\nimport { Tooltip, colors, IconWarning24 } from '@dhis2/ui';\nimport React from 'react';\nimport classes from './styles/PrintItemInfo.module.css';\nconst PrintWarning = () => /*#__PURE__*/React.createElement(\"div\", {\n  className: classes.warning\n}, /*#__PURE__*/React.createElement(Tooltip, {\n  content: i18n.t('This item has been shortened to fit on one page'),\n  placement: \"bottom\"\n}, /*#__PURE__*/React.createElement(IconWarning24, {\n  color: colors.grey600\n})));\nexport default PrintWarning;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './styles/ItemHeader.module.css';\nconst ViewItemActions = _ref => {\n  let {\n    actionButtons\n  } = _ref;\n  return actionButtons ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.itemActionsWrap\n  }, actionButtons) : null;\n};\nViewItemActions.propTypes = {\n  actionButtons: PropTypes.node\n};\nexport default ViewItemActions;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './styles/ItemHeader.module.css';\nconst ViewItemTags = _ref => {\n  let {\n    tags\n  } = _ref;\n  return tags ? /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.itemTagsWrap\n  }, tags) : null;\n};\nViewItemTags.propTypes = {\n  tags: PropTypes.node\n};\nexport default ViewItemTags;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { VIEW, EDIT, PRINT_LAYOUT } from '../../../modules/dashboardModes.js';\nimport EditItemActions from './EditItemActions.js';\nimport PrintItemInfo from './PrintItemInfo.js';\nimport classes from './styles/ItemHeader.module.css';\nimport ViewItemActions from './ViewItemActions.js';\nimport ViewItemTags from './ViewItemTags.js';\nconst getItemActionsMap = isShortened => {\n  return {\n    [VIEW]: ViewItemActions,\n    [EDIT]: EditItemActions,\n    [PRINT_LAYOUT]: isShortened ? PrintItemInfo : null\n  };\n};\nconst ItemHeader = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    dashboardMode,\n    title,\n    isShortened,\n    style,\n    tags,\n    ...rest\n  } = _ref;\n  const Actions = getItemActionsMap(isShortened)[dashboardMode];\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.itemHeaderWrap,\n    ref: ref,\n    style: style\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.itemTitle\n  }, title), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.itemHeaderRightWrap\n  }, tags ? /*#__PURE__*/React.createElement(ViewItemTags, {\n    tags: tags\n  }) : null, Actions ? /*#__PURE__*/React.createElement(Actions, rest) : null));\n});\nItemHeader.displayName = 'ItemHeader';\nItemHeader.propTypes = {\n  dashboardMode: PropTypes.string,\n  isShortened: PropTypes.bool,\n  style: PropTypes.object,\n  tags: PropTypes.node,\n  title: PropTypes.string\n};\nexport default connect(null, null, null, {\n  forwardRef: true\n})(ItemHeader);","import { FILTER_ORG_UNIT } from '../../../actions/itemFilters.js';\nexport const getIframeSrc = (appDetails, item, itemFilters) => {\n  let iframeSrc = `${appDetails.launchUrl}?dashboardItemId=${item.id}`;\n  if (itemFilters[FILTER_ORG_UNIT] && itemFilters[FILTER_ORG_UNIT].length) {\n    const ouIds = itemFilters[FILTER_ORG_UNIT].map(_ref => {\n      let {\n        id,\n        path\n      } = _ref;\n      return path ? path.split('/').slice(-1)[0] : id;\n    });\n    iframeSrc += `&userOrgUnit=${ouIds.join(',')}`;\n  }\n  return iframeSrc;\n};","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"AppItem_content__5UpaY Item_content__ytuf9\",\"hiddenTitle\":\"AppItem_hiddenTitle__eahyV\",\"fullscreen\":\"AppItem_fullscreen__BxNKh Item_fullscreen__0902s\",\"centered\":\"AppItem_centered__UDI97\"};","import i18n from '@dhis2/d2-i18n';\nimport { Divider, colors, spacers, IconQuestion24 } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { EDIT, isEditMode } from '../../../modules/dashboardModes.js';\nimport { sGetItemFiltersRoot, DEFAULT_STATE_ITEM_FILTERS } from '../../../reducers/itemFilters.js';\nimport ItemHeader from '../ItemHeader/ItemHeader.js';\nimport { getIframeSrc } from './getIframeSrc.js';\nimport styles from './styles/AppItem.module.css';\nconst AppItem = _ref => {\n  var _appDetails, _appDetails$settings, _appDetails$settings$;\n  let {\n    dashboardMode,\n    item,\n    itemFilters,\n    apps,\n    isFullscreen\n  } = _ref;\n  let appDetails;\n  const appKey = item.appKey;\n  if (appKey) {\n    appDetails = apps.find(app => app.key === appKey);\n  }\n  const hideTitle = ((_appDetails = appDetails) === null || _appDetails === void 0 ? void 0 : (_appDetails$settings = _appDetails.settings) === null || _appDetails$settings === void 0 ? void 0 : (_appDetails$settings$ = _appDetails$settings.dashboardWidget) === null || _appDetails$settings$ === void 0 ? void 0 : _appDetails$settings$.hideTitle) && dashboardMode !== EDIT;\n  return appDetails && appDetails.name && appDetails.launchUrl ? /*#__PURE__*/React.createElement(React.Fragment, null, !hideTitle && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ItemHeader, {\n    title: appDetails.name,\n    itemId: item.id,\n    dashboardMode: dashboardMode,\n    isShortened: item.shortened\n  }), /*#__PURE__*/React.createElement(Divider, {\n    margin: `0 0 ${spacers.dp4} 0`\n  })), /*#__PURE__*/React.createElement(\"iframe\", {\n    title: appDetails.name,\n    src: getIframeSrc(appDetails, item, itemFilters),\n    className: cx(styles.content, {\n      [styles.hiddenTitle]: hideTitle,\n      [styles.fullscreen]: isFullscreen\n    }),\n    style: {\n      border: 'none'\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ItemHeader, {\n    title: i18n.t('{{appKey}} app not found', {\n      appKey\n    })\n  }), /*#__PURE__*/React.createElement(Divider, {\n    margin: `0 0 ${spacers.dp4} 0`\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(styles.content, styles.centered, {\n      [styles.fullscreen]: isFullscreen\n    })\n  }, /*#__PURE__*/React.createElement(IconQuestion24, {\n    color: colors.grey500\n  })));\n};\nAppItem.propTypes = {\n  apps: PropTypes.array,\n  dashboardMode: PropTypes.string,\n  isFullscreen: PropTypes.bool,\n  item: PropTypes.object,\n  itemFilters: PropTypes.object\n};\nconst mapStateToProps = (state, ownProps) => {\n  const itemFilters = !isEditMode(ownProps.dashboardMode) ? sGetItemFiltersRoot(state) : DEFAULT_STATE_ITEM_FILTERS;\n  return {\n    itemFilters\n  };\n};\nexport default connect(mapStateToProps)(AppItem);","export const SET_SLIDESHOW = 'SET_SLIDESHOW';\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  if (action.type === SET_SLIDESHOW) {\n    return action.value;\n  }\n  return state;\n});\nexport const sGetSlideshow = state => state.slideshow;","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"Item_content__04f+D Item_content__ytuf9\",\"fullscreen\":\"Item_fullscreen__UUUMo Item_fullscreen__0902s\",\"list\":\"Item_list__UNbqB\",\"item\":\"Item_item__A-TxG\",\"itemContent\":\"Item_itemContent__QAVpS\",\"link\":\"Item_link__oYE1f\",\"removeButton\":\"Item_removeButton__DBSm6\"};","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Divider, IconFileDocument16, colors, spacers } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acUpdateDashboardItem, acRemoveDashboardItem } from '../../../actions/editDashboard.js';\nimport { isEditMode } from '../../../modules/dashboardModes.js';\nimport { itemTypeMap, getItemUrl } from '../../../modules/itemTypes.js';\nimport { orArray } from '../../../modules/util.js';\nimport { sGetSlideshow } from '../../../reducers/slideshow.js';\nimport ItemHeader from '../ItemHeader/ItemHeader.js';\nimport classes from './Item.module.css';\nconst getItemTitle = item => itemTypeMap[item.type].pluralTitle;\nconst getContentItems = item => orArray(item[itemTypeMap[item.type].propName]).filter((item, index, array) => array.findIndex(el => el.id === item.id) === index);\nconst ListItem = _ref => {\n  let {\n    item,\n    dashboardMode,\n    removeItem,\n    updateItem,\n    isFullscreen,\n    isSlideshowView\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const contentItems = getContentItems(item);\n  const updateDashboardItem = content => {\n    const listItemType = itemTypeMap[item.type].propName;\n    const newContent = item[listItemType].filter(item => item.id !== content.id);\n    if (newContent.length) {\n      item[listItemType] = newContent;\n      updateItem(item);\n    } else {\n      removeItem(item);\n    }\n  };\n  const getLink = contentItem => {\n    const removeButton = /*#__PURE__*/React.createElement(\"button\", {\n      className: classes.removeButton,\n      onClick: () => updateDashboardItem(contentItem)\n    }, i18n.t('Remove'));\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"a\", {\n      className: classes.link,\n      style: {\n        color: colors.grey900\n      },\n      href: getItemUrl(item.type, contentItem, baseUrl),\n      tabIndex: isSlideshowView ? '-1' : '0'\n    }, contentItem.name), isEditMode(dashboardMode) ? removeButton : null);\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ItemHeader, {\n    title: getItemTitle(item),\n    itemId: item.id,\n    dashboardMode: dashboardMode,\n    isShortened: item.shortened\n  }), /*#__PURE__*/React.createElement(Divider, {\n    margin: `0 0 ${spacers.dp4} 0`\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.content, {\n      [classes.fullscreen]: isFullscreen\n    })\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: classes.list\n  }, contentItems.map(contentItem => /*#__PURE__*/React.createElement(\"li\", {\n    className: classes.item,\n    key: contentItem.id\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.itemContent\n  }, /*#__PURE__*/React.createElement(IconFileDocument16, {\n    color: colors.grey600\n  }), getLink(contentItem)))))));\n};\nListItem.propTypes = {\n  dashboardMode: PropTypes.string,\n  isFullscreen: PropTypes.bool,\n  isSlideshowView: PropTypes.bool,\n  item: PropTypes.object,\n  removeItem: PropTypes.func,\n  updateItem: PropTypes.func\n};\nconst mapStateToProps = state => ({\n  isSlideshowView: sGetSlideshow(state) !== null\n});\nexport default connect(mapStateToProps, {\n  removeItem: acRemoveDashboardItem,\n  updateItem: acUpdateDashboardItem\n})(ListItem);","export const userSettingsQuery = {\n  resource: 'userSettings',\n  params: {\n    key: ['keyDbLocale', 'keyUiLocale', 'keyAnalysisDisplayProperty']\n  }\n};","import { useDataEngine } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { useContext, useState, useEffect, createContext } from 'react';\nimport { userSettingsQuery } from '../api/userSettings.js';\nexport const UserSettingsCtx = /*#__PURE__*/createContext({});\nconst UserSettingsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [settings, setSettings] = useState([]);\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function fetchData() {\n      const {\n        userSettings\n      } = await engine.query({\n        userSettings: userSettingsQuery\n      });\n      setSettings({\n        ...userSettings,\n        displayProperty: userSettings.keyAnalysisDisplayProperty === 'name' ? 'displayName' : 'displayShortName'\n      });\n    }\n    fetchData();\n  }, [engine]);\n  return /*#__PURE__*/React.createElement(UserSettingsCtx.Provider, {\n    value: {\n      userSettings: settings\n    }\n  }, children);\n};\nUserSettingsProvider.propTypes = {\n  children: PropTypes.node\n};\nexport default UserSettingsProvider;\nexport const useUserSettings = () => useContext(UserSettingsCtx);","// extracted by mini-css-extract-plugin\nexport default {\"list\":\"Item_list__sL8+8\",\"seeAll\":\"Item_seeAll__fjO0W\",\"sender\":\"Item_sender__MGd1+\",\"snippet\":\"Item_snippet__LCVHp\",\"content\":\"Item_content__61wM1 Item_content__ytuf9\"};","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Divider, spacers } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { isViewMode } from '../../../modules/dashboardModes.js';\nimport { sGetMessagesRoot } from '../../../reducers/messages.js';\nimport { sGetSlideshow } from '../../../reducers/slideshow.js';\nimport { useUserSettings } from '../../UserSettingsProvider.js';\nimport ItemHeader from '../ItemHeader/ItemHeader.js';\nimport { getFormattedDate } from './getFormattedDate.js';\nimport classes from './styles/Item.module.css';\nimport './MessagesItem.css';\nconst PRIVATE = 'PRIVATE';\nconst messageTypes = {\n  [PRIVATE]: 'Private',\n  VALIDATION_RESULT: 'Validation',\n  TICKET: 'Ticket',\n  SYSTEM: 'System'\n};\nconst MessagesItem = _ref => {\n  let {\n    messages,\n    item,\n    dashboardMode,\n    isSlideshowView\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const {\n    userSettings\n  } = useUserSettings();\n  const getMessageHref = msg => {\n    const msgIdentifier = msg ? `#/${msg.messageType}/${msg.id}` : '';\n    return `${baseUrl}/dhis-web-messaging/${msgIdentifier}`;\n  };\n  const getMessageSender = msg => {\n    const latestMsg = msg.messages.slice(-1)[0];\n    return latestMsg.sender ? latestMsg.sender.displayName : '';\n  };\n  const getMessageItems = () => {\n    const modeClass = isViewMode(dashboardMode) ? 'view' : null;\n    return messages.map(msg => {\n      const redirectToMsg = () => {\n        if (isViewMode(dashboardMode)) {\n          document.location.href = getMessageHref(msg);\n        }\n      };\n      const sender = msg.messageType === PRIVATE ? getMessageSender(msg) : messageTypes[msg.messageType];\n      const readClass = !msg.read ? 'unread' : null;\n      const latestMsg = msg.messages.slice(-1)[0];\n      const msgDate = latestMsg.lastUpdated;\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: `message-item ${modeClass}`,\n        key: msg.id,\n        onClick: redirectToMsg\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: `message-title ${readClass}`\n      }, msg.displayName, \" (\", msg.messageCount, \")\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: classes.sender\n      }, sender, \" -\", ' ', getFormattedDate(msgDate, userSettings.keyUiLocale)), /*#__PURE__*/React.createElement(\"p\", {\n        className: classes.snippet\n      }, latestMsg.text));\n    });\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ItemHeader, {\n    title: i18n.t('Messages'),\n    itemId: item.id,\n    dashboardMode: dashboardMode,\n    isShortened: item.shortened\n  }), /*#__PURE__*/React.createElement(Divider, {\n    margin: `0 0 ${spacers.dp4} 0`\n  }), messages.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.content,\n    tabIndex: \"-1\"\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: classes.list\n  }, getMessageItems()), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.seeAll\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: getMessageHref(),\n    tabIndex: isSlideshowView ? '-1' : '0'\n  }, i18n.t('See all messages')))));\n};\nMessagesItem.propTypes = {\n  dashboardMode: PropTypes.string,\n  isSlideshowView: PropTypes.bool,\n  item: PropTypes.object,\n  messages: PropTypes.array\n};\nconst mapStateToProps = state => {\n  return {\n    messages: Object.values(sGetMessagesRoot(state)),\n    isSlideshowView: sGetSlideshow(state) !== null\n  };\n};\nconst MessagesContainer = connect(mapStateToProps, null)(MessagesItem);\nexport default MessagesContainer;","export const getFormattedDate = (value, uiLocale) => {\n  if (typeof global.Intl !== 'undefined' && Intl.DateTimeFormat) {\n    const locale = uiLocale || 'en';\n    return new Intl.DateTimeFormat(locale, {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric'\n    }).format(new Date(value));\n  }\n  return value.substr(0, 19).replace('T', ' ');\n};","import i18n from '@dhis2/d2-i18n';\nimport { colors, IconQuestion24 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ItemHeader from '../ItemHeader/ItemHeader.js';\nconst NotSupportedItem = _ref => {\n  let {\n    item,\n    dashboardMode\n  } = _ref;\n  const message = item.type ? i18n.t('Item type \"{{type}}\" is not supported', {\n    type: item.type\n  }) : i18n.t('The item type is missing');\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ItemHeader, {\n    itemId: item.id,\n    dashboardMode: dashboardMode,\n    isShortened: item.shortened\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'center',\n      alignItems: 'center',\n      height: '90%'\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", null, message), /*#__PURE__*/React.createElement(IconQuestion24, {\n    color: colors.grey500\n  })));\n};\nNotSupportedItem.propTypes = {\n  dashboardMode: PropTypes.string,\n  item: PropTypes.object\n};\nexport default NotSupportedItem;","import React from 'react';\nconst PageBreakItem = () => /*#__PURE__*/React.createElement(\"div\", null);\nexport default PageBreakItem;","// extracted by mini-css-extract-plugin\nexport default {\"titlePage\":\"Item_titlePage__V0D77\",\"name\":\"Item_name__C5FHV\",\"description\":\"Item_description__rBHBc\",\"filterTitle\":\"Item_filterTitle__wI5vB\",\"filterList\":\"Item_filterList__Jds4+\",\"filterListItem\":\"Item_filterListItem__hk8+v\"};","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { sGetIsEditing } from '../../../reducers/editDashboard.js';\nimport { sGetNamedItemFilters } from '../../../reducers/itemFilters.js';\nimport { sGetPrintDashboardName, sGetPrintDashboardDescription } from '../../../reducers/printDashboard.js';\nimport { sGetSelectedDisplayName, sGetSelectedDisplayDescription } from '../../../reducers/selected.js';\nimport { sGetShowDescription } from '../../../reducers/showDescription.js';\nimport classes from './styles/Item.module.css';\nconst PrintTitlePageItem = _ref => {\n  let {\n    name,\n    description,\n    itemFilters,\n    showDescription\n  } = _ref;\n  const getItemFilterList = () => {\n    const listItems = itemFilters.map(_ref2 => {\n      let {\n        name,\n        values\n      } = _ref2;\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: classes.filterListItem,\n        key: name\n      }, name, \": \", values.map(val => val.name).join(', '));\n    });\n    return /*#__PURE__*/React.createElement(\"ul\", {\n      className: classes.filterList\n    }, listItems);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.titlePage\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.name\n  }, name), showDescription && description && /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.description\n  }, description), itemFilters.length > 0 && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.filterTitle\n  }, i18n.t('Filters applied')), getItemFilterList()));\n};\nPrintTitlePageItem.propTypes = {\n  description: PropTypes.string,\n  itemFilters: PropTypes.array,\n  name: PropTypes.string,\n  showDescription: PropTypes.bool\n};\nPrintTitlePageItem.defaultProps = {\n  description: '',\n  name: '',\n  showDescription: false\n};\nconst mapStateToProps = state => {\n  const isEditMode = sGetIsEditing(state);\n  const name = isEditMode ? sGetPrintDashboardName(state) || i18n.t('Untitled dashboard') : sGetSelectedDisplayName(state);\n  const description = isEditMode ? sGetPrintDashboardDescription(state) : sGetSelectedDisplayDescription(state);\n  return {\n    name,\n    description,\n    itemFilters: sGetNamedItemFilters(state),\n    showDescription: sGetShowDescription(state)\n  };\n};\nexport default connect(mapStateToProps)(PrintTitlePageItem);","import i18n from '@dhis2/d2-i18n';\nimport { colors } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ItemHeader from '../ItemHeader/ItemHeader.js';\nconst style = {\n  margin: '21px 28px',\n  fontSize: '14px',\n  lineHeight: '18px',\n  color: colors.grey600\n};\nconst SpacerItem = props => {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ItemHeader, {\n    title: i18n.t('Spacer'),\n    itemId: props.item.id,\n    dashboardMode: props.dashboardMode,\n    isShortened: props.item.shortened\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    style: style\n  }, i18n.t('Use a spacer to create empty vertical space between other dashboard items.')));\n};\nSpacerItem.propTypes = {\n  dashboardMode: PropTypes.string,\n  item: PropTypes.object\n};\nexport default SpacerItem;","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"TextItem_content__oHVky Item_content__ytuf9\",\"fullscreen\":\"TextItem_fullscreen__bjGVU Item_fullscreen__0902s\",\"edit\":\"TextItem_edit__rBmOL\"};","import { RichTextParser, RichTextEditor } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Divider, spacers } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acUpdateDashboardItem } from '../../../actions/editDashboard.js';\nimport { isEditMode, PRINT_LAYOUT } from '../../../modules/dashboardModes.js';\nimport { sGetEditDashboardItems } from '../../../reducers/editDashboard.js';\nimport { sGetIsPrinting, sGetPrintDashboardItems } from '../../../reducers/printDashboard.js';\nimport { sGetSelectedDashboardItems } from '../../../reducers/selected.js';\nimport ItemHeader from '../ItemHeader/ItemHeader.js';\nimport PrintItemInfo from '../ItemHeader/PrintItemInfo.js';\nimport styles from './styles/TextItem.module.css';\nconst fullscreenStyle = {\n  padding: '24px',\n  fontSize: '18px',\n  fontStretch: 'normal',\n  margin: '0 auto',\n  display: 'block',\n  lineHeight: '23px'\n};\nconst viewStyle = {\n  padding: '10px',\n  fontSize: '14px',\n  fontStretch: 'normal',\n  margin: '0 auto',\n  display: 'block',\n  lineHeight: '16px'\n};\nconst TextItem = props => {\n  const {\n    item,\n    dashboardMode,\n    text,\n    isFullscreen,\n    acUpdateDashboardItem\n  } = props;\n  const onChangeText = text => {\n    const updatedItem = {\n      ...item,\n      text\n    };\n    acUpdateDashboardItem(updatedItem);\n  };\n  const viewItem = () => {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.content, {\n        [styles.fullscreen]: isFullscreen\n      })\n    }, /*#__PURE__*/React.createElement(RichTextParser, {\n      style: isFullscreen ? fullscreenStyle : viewStyle\n    }, text));\n  };\n  const editItem = () => {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ItemHeader, {\n      title: i18n.t('Text box'),\n      itemId: item.id,\n      dashboardMode: dashboardMode\n    }), /*#__PURE__*/React.createElement(Divider, {\n      margin: `0 0 ${spacers.dp4} 0`\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.content, styles.edit)\n    }, /*#__PURE__*/React.createElement(RichTextEditor, {\n      onChange: onChangeText,\n      inputPlaceholder: i18n.t('Add text here'),\n      value: text,\n      initialFocus: false,\n      resizable: false\n    })));\n  };\n  const printItem = () => {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, props.item.shortened ? /*#__PURE__*/React.createElement(PrintItemInfo, null) : null, /*#__PURE__*/React.createElement(\"div\", {\n      className: styles.content\n    }, /*#__PURE__*/React.createElement(RichTextParser, {\n      style: viewStyle\n    }, text)));\n  };\n  let textItem;\n  if (isEditMode(dashboardMode)) {\n    textItem = editItem;\n  } else if (dashboardMode === PRINT_LAYOUT) {\n    textItem = printItem;\n  } else {\n    textItem = viewItem;\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, textItem());\n};\nconst mapStateToProps = (state, ownProps) => {\n  const isPrintPreview = sGetIsPrinting(state);\n  let items;\n  if (isPrintPreview) {\n    items = sGetPrintDashboardItems(state);\n  } else if (isEditMode(ownProps.dashboardMode)) {\n    items = sGetEditDashboardItems(state);\n  } else {\n    items = sGetSelectedDashboardItems(state);\n  }\n  const item = items.find(item => item.id === ownProps.item.id);\n  return {\n    text: item ? item.text : ''\n  };\n};\nTextItem.propTypes = {\n  acUpdateDashboardItem: PropTypes.func,\n  dashboardMode: PropTypes.string,\n  isFullscreen: PropTypes.bool,\n  item: PropTypes.object,\n  text: PropTypes.string\n};\nexport default connect(mapStateToProps, {\n  acUpdateDashboardItem\n})(TextItem);","import { SET_SLIDESHOW } from '../reducers/slideshow.js';\nexport const acSetSlideshow = isSlideshow => ({\n  type: SET_SLIDESHOW,\n  value: isSlideshow\n});","export const apiGetDataStatistics = async (dataEngine, username) => {\n  const getDataStatisticsQuery = {\n    resource: 'dataStatistics/favorites',\n    params: {\n      eventType: 'DASHBOARD_VIEW',\n      pageSize: 6,\n      ...(username ? {\n        username\n      } : {})\n    }\n  };\n  try {\n    const mostViewedDashboardsResult = await dataEngine.query({\n      dashboard: getDataStatisticsQuery\n    });\n    return mostViewedDashboardsResult;\n  } catch (error) {\n    console.log('Error: ', error);\n  }\n};\nconst POST_DATA_STATISTICS_QUERY = {\n  resource: 'dataStatistics',\n  type: 'create',\n  params: _ref => {\n    let {\n      eventType,\n      favorite\n    } = _ref;\n    return {\n      eventType,\n      favorite\n    };\n  }\n};\nexport const apiPostDataStatistics = async (eventType, favorite, engine) => await engine.mutate(POST_DATA_STATISTICS_QUERY, {\n  variables: {\n    eventType,\n    favorite\n  }\n});","import isObject from 'lodash/isObject.js';\nimport { itemTypeMap } from './itemTypes.js';\nexport const getVisualizationFromItem = item => {\n  var _itemTypeMap$item$typ;\n  if (!isObject(item)) {\n    return null;\n  }\n  const propName = (_itemTypeMap$item$typ = itemTypeMap[item.type]) === null || _itemTypeMap$item$typ === void 0 ? void 0 : _itemTypeMap$item$typ.propName;\n  return item[propName] || item.visualization || item.map || item.eventReport || item.eventChart || {};\n};\nexport const getVisualizationId = item => getVisualizationFromItem(item).id;\nexport const getVisualizationName = item => getVisualizationFromItem(item).name;","import { getInstance } from 'd2';\nimport { getVisualizationId } from '../modules/item.js';\nimport { getEndPointName, MAP, EVENT_VISUALIZATION } from '../modules/itemTypes.js';\nimport { getMapFields, getFavoriteFields } from './metadata.js';\nexport const apiFetchVisualization = async item => {\n  const id = getVisualizationId(item);\n  const fields = item.type === MAP ? getMapFields() : getFavoriteFields({\n    withDimensions: true,\n    withOptions: true,\n    withRepetition: item.type === EVENT_VISUALIZATION\n  });\n  const d2 = await getInstance();\n  return await d2.Api.getApi().get(`${getEndPointName(item.type)}/${id}`, {\n    fields\n  });\n};","export const DEFAULT_SETTINGS = {\n  keyDashboardContextMenuItemOpenInRelevantApp: true,\n  keyDashboardContextMenuItemShowInterpretationsAndDetails: true,\n  keyDashboardContextMenuItemSwitchViewType: true,\n  keyDashboardContextMenuItemViewFullscreen: true,\n  keyGatherAnalyticalObjectStatisticsInDashboardViews: false,\n  startModuleEnableLightweight: false\n};\nconst SYSTEM_SETTINGS = ['keyDashboardContextMenuItemOpenInRelevantApp', 'keyDashboardContextMenuItemShowInterpretationsAndDetails', 'keyDashboardContextMenuItemSwitchViewType', 'keyDashboardContextMenuItemViewFullscreen', 'keyGatherAnalyticalObjectStatisticsInDashboardViews', 'keyHideBiMonthlyPeriods', 'keyHideDailyPeriods', 'keyHideMonthlyPeriods', 'keyHideWeeklyPeriods', 'keyHideBiWeeklyPeriods', 'startModuleEnableLightweight'];\nconst SYSTEM_SETTINGS_REMAPPINGS = {\n  keyDashboardContextMenuItemOpenInRelevantApp: 'allowVisOpenInApp',\n  keyDashboardContextMenuItemShowInterpretationsAndDetails: 'allowVisShowInterpretations',\n  keyDashboardContextMenuItemSwitchViewType: 'allowVisViewAs',\n  keyDashboardContextMenuItemViewFullscreen: 'allowVisFullscreen',\n  keyHideBiMonthlyPeriods: 'hideBiMonthlyPeriods',\n  keyHideDailyPeriods: 'hideDailyPeriods',\n  keyHideMonthlyPeriods: 'hideMonthlyPeriods',\n  keyHideWeeklyPeriods: 'hideWeeklyPeriods',\n  keyHideBiWeeklyPeriods: 'hideBiWeeklyPeriods'\n};\nexport const renameSystemSettings = settings => {\n  return Object.keys(settings).reduce((mapped, key) => {\n    mapped[SYSTEM_SETTINGS_REMAPPINGS[key] || key] = settings[key];\n    return mapped;\n  }, {});\n};\nexport const systemSettingsQuery = {\n  resource: 'systemSettings',\n  params: {\n    key: SYSTEM_SETTINGS\n  }\n};","import { useDataEngine } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React, { useContext, useState, useEffect, createContext } from 'react';\nimport { systemSettingsQuery, renameSystemSettings, DEFAULT_SETTINGS } from '../api/systemSettings.js';\nexport const SystemSettingsCtx = /*#__PURE__*/createContext({});\nconst SystemSettingsProvider = _ref => {\n  let {\n    children\n  } = _ref;\n  const [settings, setSettings] = useState(null);\n  const engine = useDataEngine();\n  useEffect(() => {\n    async function fetchData() {\n      const {\n        systemSettings\n      } = await engine.query({\n        systemSettings: systemSettingsQuery\n      }, {\n        onError: error => {\n          console.log('Error', 'systemSettingsQuery', error);\n          setSettings({});\n        }\n      });\n      setSettings(Object.assign({}, renameSystemSettings(DEFAULT_SETTINGS), renameSystemSettings(systemSettings)));\n    }\n    fetchData();\n  }, []);\n  return /*#__PURE__*/React.createElement(SystemSettingsCtx.Provider, {\n    value: {\n      systemSettings: settings\n    }\n  }, children);\n};\nSystemSettingsProvider.propTypes = {\n  children: PropTypes.node\n};\nexport default SystemSettingsProvider;\nexport const useSystemSettings = () => useContext(SystemSettingsCtx);","import { colors } from '@dhis2/ui';\nimport React from 'react';\nexport const Warning = () => /*#__PURE__*/React.createElement(\"svg\", {\n  xmlns: \"http://www.w3.org/2000/svg\",\n  height: \"24\",\n  viewBox: \"0 0 24 24\",\n  width: \"24\",\n  fill: colors.grey600\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z\"\n}));","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"FatalErrorBoundary_container__qVUAU\",\"icon\":\"FatalErrorBoundary_icon__MHf8i\",\"message\":\"FatalErrorBoundary_message__JRkju\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Warning } from './assets/icons.js';\nimport classes from './styles/FatalErrorBoundary.module.css';\nclass FatalErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      errorFound: false\n    };\n  }\n  componentDidCatch(error, info) {\n    this.setState({\n      errorFound: true\n    });\n    console.log('error: ', error);\n    console.log('info: ', info);\n    this.props.onFatalError();\n  }\n  render() {\n    if (this.state.errorFound) {\n      return /*#__PURE__*/React.createElement(\"p\", {\n        className: classes.container\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: classes.icon\n      }, /*#__PURE__*/React.createElement(Warning, null)), /*#__PURE__*/React.createElement(\"span\", {\n        className: classes.message\n      }, this.props.message));\n    }\n    return this.props.children;\n  }\n}\nFatalErrorBoundary.propTypes = {\n  children: PropTypes.node,\n  message: PropTypes.string,\n  onFatalError: PropTypes.func\n};\nFatalErrorBoundary.defaultProps = {\n  onFatalError: Function.prototype\n};\nexport default FatalErrorBoundary;","export const getGridItemDomElementClassName = itemId => `reactgriditem-${itemId}`;","import { getGridItemDomElementClassName } from '../../../modules/getGridItemDomElementClassName.js';\nexport const getGridItemElement = itemId => document.querySelector(`.${getGridItemDomElementClassName(itemId)}`);","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { OfflineTooltip } from '@dhis2/analytics';\nimport { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { MenuItem } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nconst MenuItemWithTooltip = _ref => {\n  let {\n    disabledWhenOffline,\n    tooltip,\n    label,\n    disabled,\n    ...rest\n  } = _ref;\n  const {\n    isDisconnected: offline\n  } = useDhis2ConnectionStatus();\n  const tooltipContent = disabledWhenOffline && offline ? i18n.t('Not available offline') : tooltip;\n  const notAllowed = disabled || disabledWhenOffline && offline;\n  return /*#__PURE__*/React.createElement(MenuItem, _extends({\n    ariaLabel: label,\n    dense: true,\n    disabled: notAllowed,\n    label: /*#__PURE__*/React.createElement(OfflineTooltip, {\n      content: tooltipContent,\n      disabled: disabled,\n      disabledWhenOffline: disabledWhenOffline\n    }, label)\n  }, rest));\n};\nMenuItemWithTooltip.propTypes = {\n  disabled: PropTypes.bool,\n  disabledWhenOffline: PropTypes.bool,\n  label: PropTypes.string,\n  tooltip: PropTypes.string\n};\nMenuItemWithTooltip.defaultProps = {\n  disabled: false,\n  disabledWhenOffline: true,\n  tooltip: ''\n};\nexport default MenuItemWithTooltip;","export const THEMATIC_LAYER = 'thematic';\nconst getThematicMapViews = map => map.mapViews && map.mapViews.find(mv => mv.layer.includes(THEMATIC_LAYER));\nexport default getThematicMapViews;","import { VIS_TYPE_OUTLIER_TABLE } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { IconVisualizationColumn16, IconTable16, IconWorld16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { CHART, MAP, REPORT_TABLE, EVENT_CHART, EVENT_REPORT, EVENT_VISUALIZATION, isTrackerDomainType, hasMapView } from '../../../../modules/itemTypes.js';\nimport MenuItem from '../../../MenuItemWithTooltip.js';\nimport getThematicMapViews from '../getThematicMapViews.js';\nconst ViewAsMenuItems = _ref => {\n  let {\n    type,\n    activeType,\n    visualization,\n    onActiveTypeChanged\n  } = _ref;\n  const isTrackerType = isTrackerDomainType(type);\n  const onViewTable = () => onActiveTypeChanged(isTrackerType ? EVENT_REPORT : REPORT_TABLE);\n  const onViewChart = () => onActiveTypeChanged(isTrackerType ? EVENT_CHART : CHART);\n  const onViewMap = () => onActiveTypeChanged(MAP);\n  const notSupported = type === MAP && !getThematicMapViews(visualization) || type === CHART && visualization.type === VIS_TYPE_OUTLIER_TABLE;\n  const getNotSupportedMessage = viewAs => {\n    if (type === MAP && !getThematicMapViews(visualization)) {\n      return viewAs === 'chart' ? i18n.t(\"This map can't be displayed as a chart\") : i18n.t(\"This map can't be displayed as a pivot table\");\n    }\n    if (type === CHART && visualization.type === VIS_TYPE_OUTLIER_TABLE) {\n      return viewAs === 'table' ? i18n.t(\"This visualization can't be displayed as a pivot table\") : i18n.t(\"This visualization can't be displayed as a map\");\n    }\n    return null;\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, ![CHART, EVENT_CHART].includes(activeType) && /*#__PURE__*/React.createElement(MenuItem, {\n    tooltip: getNotSupportedMessage('chart'),\n    label: i18n.t('View as Chart'),\n    onClick: onViewChart,\n    disabled: notSupported,\n    icon: /*#__PURE__*/React.createElement(IconVisualizationColumn16, null)\n  }), ![REPORT_TABLE, EVENT_REPORT, EVENT_VISUALIZATION].includes(activeType) && /*#__PURE__*/React.createElement(MenuItem, {\n    tooltip: getNotSupportedMessage('table'),\n    label: i18n.t('View as Pivot table'),\n    onClick: onViewTable,\n    disabled: notSupported,\n    icon: /*#__PURE__*/React.createElement(IconTable16, null)\n  }), hasMapView(type) && activeType !== MAP && /*#__PURE__*/React.createElement(MenuItem, {\n    tooltip: getNotSupportedMessage('map'),\n    label: i18n.t('View as Map'),\n    onClick: onViewMap,\n    disabled: notSupported,\n    icon: /*#__PURE__*/React.createElement(IconWorld16, null)\n  }));\n};\nViewAsMenuItems.propTypes = {\n  activeType: PropTypes.string,\n  type: PropTypes.string,\n  visualization: PropTypes.object,\n  onActiveTypeChanged: PropTypes.func\n};\nexport default ViewAsMenuItems;","import { isSingleValue, isYearOverYear, VIS_TYPE_GAUGE, VIS_TYPE_PIE } from '@dhis2/analytics';\nimport { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { colors, Button, Menu, Popover, Divider, IconFullscreen16, IconLaunch16, IconMessages16, IconMore16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState, createRef } from 'react';\nimport { getVisualizationId } from '../../../../modules/item.js';\nimport { getAppName, itemTypeMap, getItemTypeForVis, EVENT_VISUALIZATION } from '../../../../modules/itemTypes.js';\nimport { isSmallScreen } from '../../../../modules/smallScreen.js';\nimport MenuItem from '../../../MenuItemWithTooltip.js';\nimport { useSystemSettings } from '../../../SystemSettingsProvider.js';\nimport { useWindowDimensions } from '../../../WindowDimensionsProvider.js';\nimport ViewAsMenuItems from './ViewAsMenuItems.js';\nconst ItemContextMenu = props => {\n  const [menuIsOpen, setMenuIsOpen] = useState(false);\n  const {\n    width\n  } = useWindowDimensions();\n  const {\n    baseUrl\n  } = useConfig();\n  const {\n    allowVisOpenInApp,\n    allowVisShowInterpretations,\n    allowVisViewAs,\n    allowVisFullscreen\n  } = useSystemSettings().systemSettings;\n  const fullscreenAllowed = props.fullscreenSupported && allowVisFullscreen;\n  const noOptionsEnabled = !allowVisOpenInApp && !allowVisShowInterpretations && !allowVisViewAs && !fullscreenAllowed;\n  if (noOptionsEnabled || !allowVisOpenInApp && props.loadItemFailed) {\n    return null;\n  }\n  const toggleInterpretations = () => {\n    props.onToggleFooter();\n    if (menuIsOpen) {\n      closeMenu();\n    }\n  };\n  const enterFullscreen = () => {\n    props.enterFullscreen();\n    closeMenu();\n  };\n  const onActiveTypeChanged = type => {\n    closeMenu();\n    props.onSelectActiveType(type);\n  };\n  const openMenu = () => {\n    setMenuIsOpen(true);\n  };\n  const closeMenu = () => setMenuIsOpen(false);\n  const {\n    item,\n    visualization,\n    loadItemFailed,\n    activeType\n  } = props;\n  const type = visualization.type || item.type;\n  const canViewAs = allowVisViewAs && !isSingleValue(type) && !isYearOverYear(type) && item.type !== EVENT_VISUALIZATION && type !== VIS_TYPE_GAUGE && type !== VIS_TYPE_PIE;\n  const interpretationMenuLabel = props.activeFooter ? i18n.t(`Hide details and interpretations`) : i18n.t(`Show details and interpretations`);\n  const buttonRef = /*#__PURE__*/createRef();\n  const itemHref = `${baseUrl}/${itemTypeMap[item.type].appUrl(getVisualizationId(item))}`;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    ref: buttonRef\n  }, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    title: i18n.t('Open menu'),\n    secondary: true,\n    onClick: openMenu,\n    dataTest: \"dashboarditem-menu-button\",\n    icon: /*#__PURE__*/React.createElement(IconMore16, {\n      color: colors.grey700\n    }),\n    tabIndex: props.tabIndex\n  })), menuIsOpen && /*#__PURE__*/React.createElement(Popover, {\n    reference: buttonRef,\n    placement: \"auto-start\",\n    arrow: false,\n    onClickOutside: closeMenu\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true\n  }, canViewAs && !loadItemFailed && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ViewAsMenuItems, {\n    type: getItemTypeForVis(item),\n    activeType: activeType,\n    onActiveTypeChanged: onActiveTypeChanged,\n    visualization: visualization\n  }), (allowVisShowInterpretations || allowVisOpenInApp && !isSmallScreen(width) || fullscreenAllowed) && /*#__PURE__*/React.createElement(Divider, {\n    dataTest: \"divider\"\n  })), allowVisOpenInApp && !isSmallScreen(width) && /*#__PURE__*/React.createElement(MenuItem, {\n    icon: /*#__PURE__*/React.createElement(IconLaunch16, null),\n    disabledWhenOffline: false,\n    label: i18n.t('Open in {{appName}} app', {\n      appName: getAppName(item.type)\n    }),\n    href: itemHref,\n    target: \"_blank\"\n  }), allowVisShowInterpretations && !loadItemFailed && /*#__PURE__*/React.createElement(MenuItem, {\n    icon: /*#__PURE__*/React.createElement(IconMessages16, null),\n    label: interpretationMenuLabel,\n    onClick: toggleInterpretations\n  }), fullscreenAllowed && !loadItemFailed && /*#__PURE__*/React.createElement(MenuItem, {\n    disabledWhenOffline: false,\n    icon: /*#__PURE__*/React.createElement(IconFullscreen16, null),\n    label: i18n.t('View fullscreen'),\n    onClick: enterFullscreen\n  }))));\n};\nItemContextMenu.propTypes = {\n  activeFooter: PropTypes.bool,\n  activeType: PropTypes.string,\n  enterFullscreen: PropTypes.func,\n  fullscreenSupported: PropTypes.bool,\n  item: PropTypes.object,\n  loadItemFailed: PropTypes.bool,\n  tabIndex: PropTypes.string,\n  visualization: PropTypes.object,\n  onSelectActiveType: PropTypes.func,\n  onToggleFooter: PropTypes.func\n};\nexport default ItemContextMenu;","import { InterpretationThread } from '@dhis2/analytics';\nimport { useDataQuery } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Layer, CenteredContent, CircularLoader, Button, IconChevronLeft16, spacers } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nconst query = {\n  interpretation: {\n    resource: 'interpretations',\n    id: _ref => {\n      let {\n        id\n      } = _ref;\n      return id;\n    },\n    params: {\n      fields: ['access', 'id', 'text', 'created', 'createdBy[id, displayName]', 'user[id,displayName]', 'likes', 'likedBy', 'comments[access,id,text,created,createdBy[id,displayName]]']\n    }\n  }\n};\nexport const InterpretationReplyForm = _ref2 => {\n  let {\n    currentUser,\n    interpretationId,\n    onGoBackClicked,\n    onInterpretationDeleted,\n    dashboardRedirectUrl,\n    initialFocus\n  } = _ref2;\n  const {\n    data,\n    refetch,\n    loading,\n    fetching\n  } = useDataQuery(query, {\n    lazy: true\n  });\n  const interpretation = data === null || data === void 0 ? void 0 : data.interpretation;\n  useEffect(() => {\n    if (interpretationId) {\n      refetch({\n        id: interpretationId\n      });\n    }\n  }, [interpretationId, refetch]);\n  const onThreadUpdated = () => refetch({\n    id: interpretationId\n  });\n  if (loading || !interpretation) {\n    return /*#__PURE__*/React.createElement(Layer, null, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      padding: `${spacers.dp16} ${spacers.dp16} ${spacers.dp32} ${spacers.dp16}`\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      marginBottom: spacers.dp8\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    icon: /*#__PURE__*/React.createElement(IconChevronLeft16, null),\n    onClick: onGoBackClicked\n  }, i18n.t('Back to all interpretations'))), /*#__PURE__*/React.createElement(InterpretationThread, {\n    currentUser: currentUser,\n    fetching: fetching,\n    interpretation: interpretation,\n    onInterpretationDeleted: onInterpretationDeleted,\n    onThreadUpdated: onThreadUpdated,\n    initialFocus: initialFocus,\n    dashboardRedirectUrl: dashboardRedirectUrl\n  }));\n};\nInterpretationReplyForm.displayName = 'InterpretationReplyForm';\nInterpretationReplyForm.defaultProps = {\n  onInterpretationDeleted: Function.prototype\n};\nInterpretationReplyForm.propTypes = {\n  currentUser: PropTypes.object.isRequired,\n  interpretationId: PropTypes.string.isRequired,\n  onGoBackClicked: PropTypes.func.isRequired,\n  dashboardRedirectUrl: PropTypes.string,\n  initialFocus: PropTypes.bool,\n  onInterpretationDeleted: PropTypes.func\n};","// extracted by mini-css-extract-plugin\nexport default {\"itemFooter\":\"ItemFooter_itemFooter__m4bdI\",\"line\":\"ItemFooter_line__NFXa6\",\"cover\":\"ItemFooter_cover__XHKIh\",\"scrollContainer\":\"ItemFooter_scrollContainer__YikRF\"};","import { AboutAOUnit, InterpretationsUnit, useCachedDataQuery } from '@dhis2/analytics';\nimport { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { getVisualizationId } from '../../../modules/item.js';\nimport { getItemUrl, itemTypeMap } from '../../../modules/itemTypes.js';\nimport FatalErrorBoundary from './FatalErrorBoundary.js';\nimport { InterpretationReplyForm } from './InterpretationReplyForm.js';\nimport classes from './styles/ItemFooter.module.css';\nconst ItemFooter = _ref => {\n  var _itemTypeMap$item$typ, _itemTypeMap$item$typ2;\n  let {\n    item\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const [interpretationId, setInterpretationId] = useState(null);\n  const [replyInitialFocus, setReplyInitialFocus] = useState(false);\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const setReplyToInterpretation = id => {\n    setInterpretationId(id);\n    setReplyInitialFocus(true);\n  };\n  const clearInterpretation = () => {\n    setInterpretationId(null);\n    setReplyInitialFocus(false);\n  };\n  const setViewInterpretation = id => {\n    setInterpretationId(id);\n    setReplyInitialFocus(false);\n  };\n  const id = getVisualizationId(item);\n  const dashboardRedirectUrl = getItemUrl(item.type, {\n    id\n  }, baseUrl);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.itemFooter,\n    \"data-test\": \"dashboarditem-footer\"\n  }, /*#__PURE__*/React.createElement(\"hr\", {\n    className: classes.line\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.scrollContainer\n  }, /*#__PURE__*/React.createElement(FatalErrorBoundary, {\n    message: i18n.t('There was a problem loading interpretations for this item')\n  }, /*#__PURE__*/React.createElement(AboutAOUnit, {\n    type: (_itemTypeMap$item$typ = itemTypeMap[item.type]) === null || _itemTypeMap$item$typ === void 0 ? void 0 : _itemTypeMap$item$typ.propName,\n    id: id\n  }), interpretationId ? /*#__PURE__*/React.createElement(InterpretationReplyForm, {\n    currentUser: currentUser,\n    interpretationId: interpretationId,\n    dashboardRedirectUrl: dashboardRedirectUrl,\n    onGoBackClicked: clearInterpretation,\n    onInterpretationDeleted: Function.prototype,\n    initialFocus: replyInitialFocus\n  }) : /*#__PURE__*/React.createElement(InterpretationsUnit, {\n    currentUser: currentUser,\n    type: (_itemTypeMap$item$typ2 = itemTypeMap[item.type]) === null || _itemTypeMap$item$typ2 === void 0 ? void 0 : _itemTypeMap$item$typ2.propName,\n    id: id,\n    dashboardRedirectUrl: dashboardRedirectUrl,\n    onInterpretationClick: setViewInterpretation,\n    onReplyIconClick: setReplyToInterpretation\n  }))));\n};\nItemFooter.propTypes = {\n  item: PropTypes.object.isRequired\n};\nexport default ItemFooter;","// Note that this ignores discrepancies in 'this', so shouldn't be used with bound functions\n// This is useful instead of lodash/memoize when we only need to memoize a single value\n// Inspiration: https://github.com/alexreardon/memoize-one\n\nconst memoizeOne = fn => {\n  let lastArgs = undefined;\n  let lastValue = undefined;\n  return function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    if (lastArgs && args.length === lastArgs.length && args.every((arg, i) => arg === lastArgs[i])) {\n      return lastValue;\n    }\n    lastArgs = args;\n    lastValue = fn(...args);\n    return lastValue;\n  };\n};\nexport default memoizeOne;","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"Item_content__Hp1YR Item_content__ytuf9\",\"fullscreen\":\"Item_fullscreen__OK7mM Item_fullscreen__0902s\",\"scrollbox\":\"Item_scrollbox__ZuP9T\",\"edit\":\"Item_edit__EcuQq\",\"print\":\"Item_print__XcVPK\"};","const getVisualizationContainerDomId = id => `item-${id}`;\nexport default getVisualizationContainerDomId;","const isRelative = path => path.startsWith('./');\nconst normalizeRelativePath = path => [process.env.PUBLIC_URL, path.replace(/^\\.\\//, '')].join('/');\nconst isScriptLoaded = src => document.querySelector('script[src=\"' + src + '\"]') ? true : false;\nexport const loadExternalScript = src => {\n  if (isRelative(src)) {\n    src = normalizeRelativePath(src);\n  }\n  return new Promise((resolve, reject) => {\n    if (isScriptLoaded(src)) {\n      return resolve();\n    }\n    const element = document.createElement('script');\n    element.src = src;\n    element.type = 'text/javascript';\n    element.async = false;\n    const cleanup = () => {\n      console.log(`Dynamic Script Removed: ${src}`);\n      document.head.removeChild(element);\n    };\n    element.onload = () => {\n      console.log(`Dynamic Script Loaded: ${src}`);\n      try {\n        resolve();\n      } catch (e) {\n        cleanup();\n        reject();\n      }\n    };\n    element.onerror = () => {\n      console.error(`Dynamic Script Error: ${src}`);\n      cleanup();\n      reject();\n    };\n    document.head.appendChild(element);\n  });\n};","import { itemTypeMap, REPORT_TABLE, CHART, VISUALIZATION, MAP, EVENT_REPORT, EVENT_CHART } from '../../../../modules/itemTypes.js';\nimport getVisualizationContainerDomId from '../getVisualizationContainerDomId.js';\nimport { loadExternalScript } from './loadExternalScript.js';\n\n//external plugins\nconst itemTypeToGlobalVariable = {\n  [EVENT_REPORT]: 'eventReportPlugin',\n  [EVENT_CHART]: 'eventChartPlugin'\n};\nconst itemTypeToScriptPath = {\n  [EVENT_REPORT]: '/dhis-web-event-reports/eventreport.js',\n  [EVENT_CHART]: '/dhis-web-event-visualizer/eventchart.js'\n};\nconst hasIntegratedPlugin = type => [CHART, REPORT_TABLE, VISUALIZATION, MAP].includes(type);\nexport const getPluginLaunchUrl = (type, apps, baseUrl) => {\n  // 1. lookup in api/apps for the \"manually installed\" app, this can be a new version for a core (bundled) app\n  // 2. fallback to default hardcoded path for the core (bundled) apps\n  const appKey = itemTypeMap[type].appKey;\n  const appDetails = appKey && apps.find(app => app.key === appKey);\n  if (appDetails) {\n    return appDetails.pluginLaunchUrl;\n  }\n  if (hasIntegratedPlugin(type)) {\n    switch (type) {\n      case CHART:\n      case REPORT_TABLE:\n      case VISUALIZATION:\n        {\n          return `${baseUrl}/dhis-web-data-visualizer/plugin.html`;\n        }\n      case MAP:\n        {\n          return `${baseUrl}/dhis-web-maps/plugin.html`;\n        }\n    }\n  }\n};\nexport const getPlugin = async type => {\n  if (hasIntegratedPlugin(type)) {\n    return true;\n  }\n  const pluginName = itemTypeToGlobalVariable[type];\n  return await global[pluginName];\n};\nconst fetchPlugin = async (type, baseUrl) => {\n  const globalName = itemTypeToGlobalVariable[type];\n  if (global[globalName]) {\n    return global[globalName]; // Will be a promise if fetch is in progress\n  }\n  const scripts = [];\n  if (type === EVENT_REPORT || type === EVENT_CHART) {\n    if (process.env.NODE_ENV === 'production') {\n      scripts.push('./vendor/babel-polyfill-6.26.0.min.js');\n      scripts.push('./vendor/jquery-3.3.1.min.js');\n      scripts.push('./vendor/jquery-migrate-3.0.1.min.js');\n    } else {\n      scripts.push('./vendor/babel-polyfill-6.26.0.js');\n      scripts.push('./vendor/jquery-3.3.1.js');\n      scripts.push('./vendor/jquery-migrate-3.0.1.js');\n    }\n  }\n  scripts.push(baseUrl + itemTypeToScriptPath[type]);\n  const scriptsPromise = Promise.all(scripts.map(loadExternalScript)).then(() => global[globalName] // At this point, has been replaced with the real thing\n  );\n  global[globalName] = scriptsPromise;\n  return await scriptsPromise;\n};\nexport const pluginIsAvailable = (type, apps) => hasIntegratedPlugin(type) || Boolean(getPluginLaunchUrl(type, apps)) || Boolean(itemTypeToGlobalVariable[type]);\nconst loadPlugin = async _ref => {\n  let {\n    type,\n    config,\n    credentials\n  } = _ref;\n  if (!pluginIsAvailable(type)) {\n    return;\n  }\n  const plugin = await fetchPlugin(type, credentials.baseUrl);\n  if (!(plugin && plugin.load)) {\n    return;\n  }\n  plugin.url = credentials.baseUrl;\n  plugin.loadingIndicator = true;\n  plugin.dashboard = true;\n  if (credentials.auth) {\n    plugin.auth = credentials.auth;\n  }\n  plugin.load(config);\n};\nexport const load = async (item, visualization, _ref2) => {\n  let {\n    credentials,\n    activeType,\n    options = {}\n  } = _ref2;\n  const config = {\n    ...visualization,\n    ...options,\n    el: getVisualizationContainerDomId(item.id)\n  };\n  const type = activeType || item.type;\n  await loadPlugin({\n    type,\n    config,\n    credentials\n  });\n};\nexport const unmount = async (item, activeType) => {\n  const plugin = await getPlugin(activeType);\n  if (plugin && plugin.unmount) {\n    plugin.unmount(getVisualizationContainerDomId(item.id));\n  }\n};","// TODO handle plugin version matrix in a better way\nexport const minLLVersion = [100, 6, 0];\nexport const isLLVersionCompatible = version => {\n  const versionArray = version.split('.').map(el => parseInt(el, 10));\n  const [minMajor, minMinor, minPatch] = minLLVersion;\n  const [major, minor, patch] = versionArray;\n  const isCompatible = major > minMajor || major === minMajor && minor > minMinor || major === minMajor && minor === minMinor && patch >= minPatch;\n  return isCompatible;\n};","const mapViewIsThematicOrEvent = mapView => mapView.layer.includes('thematic') || mapView.layer.includes('event');\nconst getFilteredMap = (visualization, filters) => {\n  // apply filters only to thematic and event layers\n  const mapViews = visualization.mapViews.map(mapView => {\n    if (mapViewIsThematicOrEvent(mapView)) {\n      return getFilteredNonMap(mapView, filters);\n    }\n    return mapView;\n  });\n  return {\n    ...visualization,\n    mapViews\n  };\n};\nconst getFilteredNonMap = (visualization, filters) => {\n  // deep clone objects in filters to avoid changing the visualization in the Redux store\n  const visRows = visualization.rows.map(obj => ({\n    ...obj\n  }));\n  const visColumns = visualization.columns.map(obj => ({\n    ...obj\n  }));\n  const visFilters = visualization.filters.map(obj => ({\n    ...obj\n  }));\n  Object.keys(filters).forEach(dimensionId => {\n    if (filters[dimensionId]) {\n      let dimensionFound = false;\n      [visRows, visColumns, visFilters].forEach(dimensionObjects => dimensionObjects.filter(obj => obj.dimension === dimensionId).forEach(obj => {\n        dimensionFound = true;\n        obj.items = filters[dimensionId];\n      }));\n\n      // add dimension to filters if not already present elsewhere\n      if (!dimensionFound) {\n        visFilters.push({\n          dimension: dimensionId,\n          items: filters[dimensionId]\n        });\n      }\n    }\n  });\n  return {\n    ...visualization,\n    rows: visRows,\n    columns: visColumns,\n    filters: visFilters\n  };\n};\nconst getFilteredVisualization = (visualization, filters) => {\n  if (!Object.keys(filters).length) {\n    return visualization;\n  }\n  if (visualization.mapViews) {\n    return getFilteredMap(visualization, filters);\n  }\n  return getFilteredNonMap(visualization, filters);\n};\nexport default getFilteredVisualization;","import { VIS_TYPE_COLUMN, VIS_TYPE_PIVOT_TABLE, getAdaptedUiLayoutByType } from '@dhis2/analytics';\nimport { REPORT_TABLE, CHART, MAP } from '../../../../modules/itemTypes.js';\nimport getThematicMapViews from '../getThematicMapViews.js';\nconst getWithoutId = object => ({\n  ...object,\n  id: undefined\n});\nconst getVisualizationConfig = (visualization, originalType, activeType) => {\n  if (originalType === activeType) {\n    return visualization;\n  }\n  if (originalType === MAP && originalType !== activeType) {\n    const thematicMapViews = getThematicMapViews(visualization);\n    if (thematicMapViews === undefined) {\n      return null;\n    }\n    return getWithoutId({\n      ...visualization,\n      ...thematicMapViews,\n      mapViews: undefined,\n      type: activeType === CHART ? VIS_TYPE_COLUMN : VIS_TYPE_PIVOT_TABLE\n    });\n  } else if (originalType === REPORT_TABLE && activeType === CHART) {\n    const layout = getAdaptedUiLayoutByType(visualization, VIS_TYPE_COLUMN);\n    return getWithoutId({\n      ...visualization,\n      ...layout,\n      type: VIS_TYPE_COLUMN\n    });\n  } else if (originalType === CHART && activeType === REPORT_TABLE) {\n    const layout = getAdaptedUiLayoutByType(visualization, VIS_TYPE_PIVOT_TABLE);\n    return getWithoutId({\n      ...visualization,\n      ...layout,\n      type: VIS_TYPE_PIVOT_TABLE\n    });\n  }\n  return getWithoutId(visualization);\n};\nexport default getVisualizationConfig;","import { MAP, EVENT_VISUALIZATION, VISUALIZATION } from '../modules/itemTypes.js';\nexport const ADD_IFRAME_PLUGIN_STATUS = 'ADD_IFRAME_PLUGIN_STATUS';\nexport const INSTALLATION_STATUS_READY = 'READY';\nexport const INSTALLATION_STATUS_INSTALLING = 'INSTALLING';\nexport const INSTALLATION_STATUS_UNKNOWN = 'UNKNOWN';\nexport const INSTALLATION_STATUS_WILL_NOT_INSTALL = null;\nexport const DEFAULT_STATE_IFRAME_PLUGIN_STATUS = {\n  [MAP]: INSTALLATION_STATUS_UNKNOWN,\n  [EVENT_VISUALIZATION]: INSTALLATION_STATUS_UNKNOWN,\n  [VISUALIZATION]: INSTALLATION_STATUS_UNKNOWN\n};\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_STATE_IFRAME_PLUGIN_STATUS;\n  let {\n    type,\n    value\n  } = arguments.length > 1 ? arguments[1] : undefined;\n  switch (type) {\n    case ADD_IFRAME_PLUGIN_STATUS:\n      {\n        return {\n          ...state,\n          [value.pluginType]: value.status\n        };\n      }\n    default:\n      return state;\n  }\n});\n\n// selectors\n\nexport const sGetIframePluginStatus = state => state.iframePluginStatus;","export default ((userId, dashboardId) => `${userId}-${dashboardId}`);","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useCacheableSection as useCacheableSectionAppRuntime } from '@dhis2/app-runtime';\nimport getCacheableSectionId from './getCacheableSectionId.js';\nexport const useCacheableSection = dashboardId => {\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  const cacheableSectionProps = useCacheableSectionAppRuntime(getCacheableSectionId(currentUser.id, dashboardId));\n  return {\n    ...cacheableSectionProps\n  };\n};","// extracted by mini-css-extract-plugin\nexport default {\"center\":\"VisualizationErrorMessage_center__dHATW\",\"errorMessage\":\"VisualizationErrorMessage_errorMessage__B4jZO\",\"appLink\":\"VisualizationErrorMessage_appLink__zxTth\"};","import i18n from '@dhis2/d2-i18n';\nimport { Center } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { isPrintMode } from '../../../../modules/dashboardModes.js';\nimport { getAppName } from '../../../../modules/itemTypes.js';\nimport classes from './styles/VisualizationErrorMessage.module.css';\nconst MissingPluginMessage = _ref => {\n  let {\n    itemType,\n    dashboardMode\n  } = _ref;\n  return /*#__PURE__*/React.createElement(Center, null, /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.errorMessage\n  }, i18n.t('The plugin for rendering this item is not available')), !isPrintMode(dashboardMode) ? /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.appLink\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    onClick: e => e.stopPropagation(),\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: \"/dhis-web-app-management/index.html#/app-hub\"\n  }, i18n.t('Install the {{appName}} app from the App Hub', {\n    appName: getAppName(itemType)\n  }))) : null);\n};\nMissingPluginMessage.propTypes = {\n  dashboardMode: PropTypes.string,\n  itemType: PropTypes.string\n};\nexport default MissingPluginMessage;","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"IframePlugin_wrapper__jfIxK\"};","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { colors } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { isPrintMode } from '../../../../modules/dashboardModes.js';\nimport { getAppName, itemTypeMap } from '../../../../modules/itemTypes.js';\nimport classes from './styles/VisualizationErrorMessage.module.css';\nconst getErrorIcon = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"96\",\n  viewBox: \"0 0 96 96\",\n  width: \"96\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"g\", {\n  fill: colors.grey400,\n  transform: \"translate(3 3)\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m40.5 73.5000001c0 2.4852813 2.0147186 4.5 4.5 4.5s4.5-2.0147187 4.5-4.5c0-2.4142734-1.9012365-4.3844892-4.2881643-4.4951021l-.2128322-.0048979c-2.4848234.0005384-4.4990035 2.0150507-4.4990035 4.5z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m48 60v-30c0-1.6568542-1.3431458-3-3-3s-3 1.3431458-3 3v30c0 1.6568542 1.3431458 3 3 3s3-1.3431458 3-3z\"\n}), /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m45-2.99904788c3.8985931 0 7.4578604 2.21715778 9.1770339 5.71709169l37.8912554 77.19048409c1.3845546 2.8165473 1.2171646 6.1482722-.4427191 8.811863-1.6598833 2.6635901-4.5771005 4.2816904-7.7135702 4.2796124h-77.82201115c-3.13845856.002078-6.05567574-1.6160223-7.71555901-4.2796124-1.65988369-2.6635908-1.82727377-5.9953157-.44346379-8.8103471l37.89234295-77.19269833c1.7188306-3.49923557 5.2780979-5.71639335 9.176691-5.71639335zm0 6c-1.6106864 0-3.0811818.91600885-3.7909661 2.36100407l-37.89274459 77.19351591c-.47005356.9562122-.41322496 2.0873262.15030227 2.99161.56352731.9042839 1.5539177 1.4529206 2.62140842 1.4529206h77.8259889c1.0655018 0 2.0558922-.5486367 2.6194195-1.4529206.5635272-.9042838.6203558-2.0353978.1495577-2.9931259l-37.8916571-77.19130167c-.7101272-1.44569356-2.1806226-2.36170241-3.791309-2.36170241z\"\n})));\nconst VisualizationErrorMessage = _ref => {\n  let {\n    itemType,\n    dashboardMode,\n    visualizationId\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const visHref = `${baseUrl}/${itemTypeMap[itemType].appUrl(visualizationId)}`;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.center\n  }, getErrorIcon(), /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.errorMessage\n  }, i18n.t('There was an error loading data for this item')), !isPrintMode(dashboardMode) ? /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.appLink\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    onClick: e => e.stopPropagation(),\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    href: visHref\n  }, i18n.t('Open this item in {{appName}}', {\n    appName: getAppName(itemType)\n  }))) : null);\n};\nVisualizationErrorMessage.propTypes = {\n  dashboardMode: PropTypes.string,\n  itemType: PropTypes.string,\n  visualizationId: PropTypes.string\n};\nexport default VisualizationErrorMessage;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useConfig } from '@dhis2/app-runtime';\nimport { CenteredContent, CircularLoader } from '@dhis2/ui';\nimport postRobot from '@krakenjs/post-robot';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { acAddIframePluginStatus } from '../../../../actions/iframePluginStatus.js';\nimport { CHART, REPORT_TABLE, VISUALIZATION } from '../../../../modules/itemTypes.js';\nimport { getPluginOverrides } from '../../../../modules/localStorage.js';\nimport { useCacheableSection } from '../../../../modules/useCacheableSection.js';\nimport { INSTALLATION_STATUS_INSTALLING, INSTALLATION_STATUS_READY, INSTALLATION_STATUS_UNKNOWN, INSTALLATION_STATUS_WILL_NOT_INSTALL, sGetIframePluginStatus } from '../../../../reducers/iframePluginStatus.js';\nimport { useUserSettings } from '../../../UserSettingsProvider.js';\nimport MissingPluginMessage from './MissingPluginMessage.js';\nimport { getPluginLaunchUrl } from './plugin.js';\nimport classes from './styles/IframePlugin.module.css';\nimport VisualizationErrorMessage from './VisualizationErrorMessage.js';\nconst IframePlugin = _ref => {\n  let {\n    activeType,\n    filterVersion,\n    style,\n    visualization,\n    dashboardMode,\n    dashboardId,\n    itemId,\n    itemType,\n    isFirstOfType\n  } = _ref;\n  const dispatch = useDispatch();\n  const iframePluginStatus = useSelector(sGetIframePluginStatus);\n  const {\n    baseUrl\n  } = useConfig();\n  const {\n    userSettings\n  } = useUserSettings();\n  const iframeRef = useRef();\n  const [error, setError] = useState(null);\n  const {\n    apps\n  } = useCachedDataQuery();\n\n  // When this mounts, check if the dashboard is recording\n  const {\n    isCached,\n    recordingState\n  } = useCacheableSection(dashboardId);\n  const [recordOnNextLoad, setRecordOnNextLoad] = useState(recordingState === 'recording');\n  const prevPluginRef = useRef();\n  const onError = () => setError('plugin');\n  const pluginType = [CHART, REPORT_TABLE].includes(activeType) ? VISUALIZATION : activeType;\n  const installationStatus = iframePluginStatus[pluginType];\n  const pluginProps = useMemo(() => ({\n    isVisualizationLoaded: true,\n    forDashboard: true,\n    displayProperty: userSettings.keyAnalysisDisplayProperty,\n    visualization,\n    onError,\n    // For caching: ---\n    // Add user & dashboard IDs to cache ID to avoid removing a cached\n    // plugin that might be used in another dashboard also\n    // TODO: May also want user ID too for multi-user situations\n    cacheId: `${dashboardId}-${itemId}`,\n    isParentCached: isCached,\n    recordOnNextLoad\n  }), [userSettings, visualization, dashboardId, itemId, isCached, recordOnNextLoad]);\n  const getIframeSrc = useCallback(() => {\n    // 1. check if there is an override for the plugin\n    const pluginOverrides = getPluginOverrides();\n    if (pluginOverrides && pluginOverrides[pluginType]) {\n      return pluginOverrides[pluginType];\n    }\n\n    // 2. check if there is an installed app for the pluginType\n    // and use its plugin launch URL\n    const pluginLaunchUrl = getPluginLaunchUrl(pluginType, apps, baseUrl);\n    if (pluginLaunchUrl) {\n      return pluginLaunchUrl;\n    }\n    setError('missing-plugin');\n  }, [apps, baseUrl, pluginType]);\n  const iframeSrc = getIframeSrc();\n  useEffect(() => {\n    // Tell plugin to remove cached data if this dashboard has been removed\n    // from offline storage\n    if (iframeRef !== null && iframeRef !== void 0 && iframeRef.current && !isCached) {\n      postRobot.send(iframeRef.current.contentWindow, 'removeCachedData').catch(err => {\n        // catch error if iframe hasn't loaded yet\n        const msg = 'No handler found for post message:';\n        if (err.message.startsWith(msg)) {\n          return;\n        }\n        console.error(err);\n      });\n    }\n  }, [isCached]);\n  useEffect(() => {\n    if (iframeRef !== null && iframeRef !== void 0 && iframeRef.current && (installationStatus === INSTALLATION_STATUS_READY || installationStatus === INSTALLATION_STATUS_WILL_NOT_INSTALL || isFirstOfType)) {\n      // if iframe has not sent initial request, set up a listener\n      if (iframeSrc !== prevPluginRef.current) {\n        prevPluginRef.current = iframeSrc;\n        const listener = postRobot.on('getProps',\n        // listen for messages coming only from the iframe rendered by this component\n        {\n          window: iframeRef.current.contentWindow\n        }, () => {\n          if (recordOnNextLoad) {\n            // Avoid recording unnecessarily,\n            // e.g. if plugin re-requests props for some reason\n            setRecordOnNextLoad(false);\n          }\n          return pluginProps;\n        });\n        return () => listener.cancel();\n      } else {\n        postRobot.send(iframeRef.current.contentWindow, 'newProps', pluginProps);\n      }\n    }\n  }, [recordOnNextLoad, pluginProps, iframeSrc, installationStatus, isFirstOfType]);\n  useEffect(() => {\n    if (iframeRef !== null && iframeRef !== void 0 && iframeRef.current) {\n      const listener = postRobot.on('installationStatus', {\n        window: iframeRef.current.contentWindow\n      }, event => {\n        if (isFirstOfType) {\n          dispatch(acAddIframePluginStatus({\n            pluginType,\n            status: event.data.installationStatus\n          }));\n        }\n      });\n      return () => listener.cancel();\n    }\n  }, [pluginType, dispatch, visualization, iframePluginStatus, isFirstOfType]);\n  useEffect(() => {\n    setError(null);\n  }, [filterVersion, visualization.type]);\n  if (error) {\n    return error === 'missing-plugin' ? /*#__PURE__*/React.createElement(\"div\", {\n      style: style\n    }, /*#__PURE__*/React.createElement(MissingPluginMessage, {\n      itemType: itemType,\n      dashboardMode: dashboardMode\n    })) : /*#__PURE__*/React.createElement(\"div\", {\n      style: style\n    }, /*#__PURE__*/React.createElement(VisualizationErrorMessage, {\n      itemType: itemType,\n      visualizationId: visualization.id,\n      dashboardMode: dashboardMode\n    }));\n  }\n  if ([INSTALLATION_STATUS_INSTALLING, INSTALLATION_STATUS_UNKNOWN].includes(iframePluginStatus[pluginType]) && !isFirstOfType) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: style.width || '100%',\n        height: style.height || '100%'\n      }\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.wrapper,\n    dir: document.dir\n  }, iframeSrc ? /*#__PURE__*/React.createElement(\"iframe\", {\n    ref: iframeRef,\n    src: iframeSrc\n    // preserve dimensions if provided\n    ,\n    style: {\n      width: style.width || '100%',\n      height: style.height || '100%',\n      border: 'none'\n    }\n  }) : null);\n};\nIframePlugin.propTypes = {\n  activeType: PropTypes.string,\n  dashboardId: PropTypes.string,\n  dashboardMode: PropTypes.string,\n  filterVersion: PropTypes.string,\n  isFirstOfType: PropTypes.bool,\n  itemId: PropTypes.string,\n  itemType: PropTypes.string,\n  style: PropTypes.object,\n  visualization: PropTypes.object\n};\n\n// Memoize the whole component to avoid re-rendering when the parent component re-renders.\n// This happens when the interpretations panel is toggled because the `item` prop changes (height)\n// causing the `Item` component to re-render.\n\nexport default /*#__PURE__*/React.memo(IframePlugin);","import { ADD_IFRAME_PLUGIN_STATUS } from '../reducers/iframePluginStatus.js';\nexport const acAddIframePluginStatus = value => ({\n  type: ADD_IFRAME_PLUGIN_STATUS,\n  value\n});","import { useConfig } from '@dhis2/app-runtime';\nimport { useD2 } from '@dhis2/app-runtime-adapter-d2';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useRef } from 'react';\nimport getVisualizationContainerDomId from '../getVisualizationContainerDomId.js';\nimport { load, unmount } from './plugin.js';\nconst LegacyPlugin = _ref => {\n  let {\n    item,\n    activeType,\n    filterVersion,\n    visualization,\n    options,\n    style,\n    gridWidth\n  } = _ref;\n  const {\n    d2\n  } = useD2();\n  const {\n    baseUrl\n  } = useConfig();\n  const prevItem = useRef();\n  const prevActiveType = useRef();\n  const prevFilterVersion = useRef();\n  useEffect(() => {\n    const el = document.querySelector(`#${getVisualizationContainerDomId(item.id)}`);\n    if (typeof (el === null || el === void 0 ? void 0 : el.setViewportSize) === 'function') {\n      setTimeout(() => el.setViewportSize(el.clientWidth - 5, el.clientHeight - 5), 10);\n    }\n  }, [style, gridWidth, item.id]);\n  useEffect(() => {\n    if (!prevItem.current || prevItem.current === item && (prevActiveType.current !== activeType || prevFilterVersion.current !== filterVersion)) {\n      // Initial load, or active type or filter has changed\n      load(item, visualization, {\n        credentials: {\n          baseUrl,\n          auth: d2.Api.getApi().defaultHeaders.Authorization\n        },\n        activeType,\n        options\n      });\n    }\n    prevItem.current = item;\n    prevActiveType.current = activeType;\n    prevFilterVersion.current = filterVersion;\n    return () => unmount(item, item.type || activeType);\n  }, [item, visualization, activeType, filterVersion, baseUrl, options, d2]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: getVisualizationContainerDomId(item.id),\n    style: style\n  });\n};\nLegacyPlugin.propTypes = {\n  activeType: PropTypes.string,\n  filterVersion: PropTypes.string,\n  gridWidth: PropTypes.number,\n  item: PropTypes.object,\n  options: PropTypes.object,\n  style: PropTypes.object,\n  visualization: PropTypes.object\n};\nLegacyPlugin.defaultProps = {\n  style: {},\n  item: {},\n  options: {},\n  visualization: {}\n};\nexport default LegacyPlugin;","// extracted by mini-css-extract-plugin\nexport default {\"messageContent\":\"Visualization_messageContent__acWN6\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Cover, IconInfo24, IconWarning24, colors } from '@dhis2/ui';\nimport uniqueId from 'lodash/uniqueId.js';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { useSelector } from 'react-redux';\nimport { isLLVersionCompatible, minLLVersion } from '../../../../modules/isLLVersionCompatible.js';\nimport { VISUALIZATION, EVENT_VISUALIZATION, MAP, CHART, REPORT_TABLE } from '../../../../modules/itemTypes.js';\nimport { sGetSelectedId } from '../../../../reducers/selected.js';\nimport getFilteredVisualization from './getFilteredVisualization.js';\nimport getVisualizationConfig from './getVisualizationConfig.js';\nimport IframePlugin from './IframePlugin.js';\nimport LegacyPlugin from './LegacyPlugin.js';\nimport { pluginIsAvailable } from './plugin.js';\nimport classes from './styles/Visualization.module.css';\nconst mapHasEELayer = visualization => {\n  var _visualization$mapVie;\n  return (_visualization$mapVie = visualization.mapViews) === null || _visualization$mapVie === void 0 ? void 0 : _visualization$mapVie.find(mv => mv.layer.includes('earthEngine'));\n};\nconst Visualization = _ref => {\n  let {\n    visualization,\n    activeType,\n    item,\n    itemFilters,\n    availableHeight,\n    availableWidth,\n    gridWidth,\n    dashboardMode,\n    originalType,\n    showNoFiltersOverlay,\n    onClickNoFiltersOverlay,\n    ...rest\n  } = _ref;\n  const dashboardId = useSelector(sGetSelectedId);\n  const {\n    isDisconnected: offline\n  } = useDhis2ConnectionStatus();\n  const {\n    lineListingAppVersion,\n    apps\n  } = useCachedDataQuery();\n\n  // NOTE:\n  // The following is all memoized because the IframePlugin (and potentially others)\n  // are wrapped in React.memo() to avoid unnecessary re-renders\n  // The main problem here was `item` which changes height when the interpretations panel is toggled\n  // causing all the chain of components to re-render.\n  // The only dependency using `item` is `item.id` which doesn't change so the memoized plugin props\n  // should also always be the same regardless of the `item` details.\n\n  const style = useMemo(() => ({\n    height: availableHeight,\n    width: availableWidth || undefined\n  }), [availableHeight, availableWidth]);\n  const visualizationConfig = useMemo(() => {\n    if (originalType === EVENT_VISUALIZATION) {\n      return visualization;\n    }\n    return getFilteredVisualization(getVisualizationConfig(visualization, originalType, activeType), itemFilters);\n  }, [visualization, activeType, originalType, itemFilters]);\n  const filterVersion = useMemo(() => uniqueId(), []);\n  const iFramePluginProps = useMemo(() => ({\n    originalType,\n    activeType,\n    style,\n    filterVersion,\n    dashboardMode,\n    dashboardId,\n    itemId: item.id,\n    itemType: item.type,\n    isFirstOfType: Boolean(item.firstOfType)\n  }), [originalType, activeType, style, filterVersion, dashboardMode, dashboardId, item.id, item.type, item.firstOfType]);\n  if (!visualization) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: style\n    }, /*#__PURE__*/React.createElement(Cover, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.messageContent\n    }, /*#__PURE__*/React.createElement(IconWarning24, {\n      color: colors.grey500\n    }), i18n.t('No data to display'))));\n  }\n  if (activeType === EVENT_VISUALIZATION && !isLLVersionCompatible(lineListingAppVersion)) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      style: style\n    }, /*#__PURE__*/React.createElement(Cover, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.messageContent\n    }, /*#__PURE__*/React.createElement(IconWarning24, {\n      color: colors.grey500\n    }), i18n.t(`Install Line Listing app version ${minLLVersion.join('.')} or higher in order to display this item.`))));\n  }\n  switch (activeType) {\n    case CHART:\n    case REPORT_TABLE:\n    case VISUALIZATION:\n      {\n        return /*#__PURE__*/React.createElement(IframePlugin, _extends({\n          visualization: visualizationConfig\n        }, iFramePluginProps));\n      }\n    case EVENT_VISUALIZATION:\n      {\n        return /*#__PURE__*/React.createElement(React.Fragment, null, showNoFiltersOverlay ? /*#__PURE__*/React.createElement(\"div\", {\n          style: style\n        }, /*#__PURE__*/React.createElement(Cover, null, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.messageContent\n        }, /*#__PURE__*/React.createElement(IconInfo24, {\n          color: colors.grey500\n        }), i18n.t('Filters are not applied to line list dashboard items'), /*#__PURE__*/React.createElement(Button, {\n          secondary: true,\n          small: true,\n          onClick: onClickNoFiltersOverlay\n        }, i18n.t('Show without filters'))))) : null, /*#__PURE__*/React.createElement(IframePlugin, _extends({\n          visualization: visualizationConfig\n        }, iFramePluginProps)));\n      }\n    case MAP:\n      {\n        return offline && mapHasEELayer(visualizationConfig) ? /*#__PURE__*/React.createElement(\"div\", {\n          style: style\n        }, /*#__PURE__*/React.createElement(Cover, null, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.messageContent\n        }, /*#__PURE__*/React.createElement(IconInfo24, {\n          color: colors.grey500\n        }), /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Maps with Earth Engine layers cannot be displayed when offline'))))) : /*#__PURE__*/React.createElement(IframePlugin, _extends({\n          visualization: visualizationConfig\n        }, iFramePluginProps));\n      }\n    default:\n      {\n        return !pluginIsAvailable(activeType || item.type, apps) ? /*#__PURE__*/React.createElement(\"div\", {\n          style: style\n        }, /*#__PURE__*/React.createElement(Cover, null, /*#__PURE__*/React.createElement(\"div\", {\n          className: classes.messageContent\n        }, /*#__PURE__*/React.createElement(IconWarning24, {\n          color: colors.grey500\n        }), /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Unable to load the plugin for this item'))))) : /*#__PURE__*/React.createElement(LegacyPlugin, _extends({\n          item: item,\n          activeType: activeType,\n          visualization: visualizationConfig,\n          filterVersion: filterVersion,\n          style: style,\n          gridWidth: gridWidth\n        }, rest));\n      }\n  }\n};\nVisualization.propTypes = {\n  activeType: PropTypes.string,\n  availableHeight: PropTypes.string,\n  availableWidth: PropTypes.string,\n  dashboardMode: PropTypes.string,\n  gridWidth: PropTypes.number,\n  item: PropTypes.object,\n  itemFilters: PropTypes.object,\n  originalType: PropTypes.string,\n  showNoFiltersOverlay: PropTypes.bool,\n  visualization: PropTypes.object,\n  onClickNoFiltersOverlay: PropTypes.func\n};\nexport default Visualization;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport { VIS_TYPE_OUTLIER_TABLE, DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Tag, Tooltip } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { acSetItemActiveType } from '../../../actions/itemActiveTypes.js';\nimport { acSetSlideshow } from '../../../actions/slideshow.js';\nimport { acAddVisualization } from '../../../actions/visualizations.js';\nimport { apiPostDataStatistics } from '../../../api/dataStatistics.js';\nimport { apiFetchVisualization } from '../../../api/fetchVisualization.js';\nimport { isEditMode, isPrintMode, isViewMode } from '../../../modules/dashboardModes.js';\nimport { getItemHeightPx } from '../../../modules/gridUtil.js';\nimport { getVisualizationId, getVisualizationName } from '../../../modules/item.js';\nimport { getDataStatisticsName, getItemTypeForVis, CHART, EVENT_VISUALIZATION, VISUALIZATION, EVENT_REPORT } from '../../../modules/itemTypes.js';\nimport { sGetIsEditing } from '../../../reducers/editDashboard.js';\nimport { sGetItemActiveType } from '../../../reducers/itemActiveTypes.js';\nimport { sGetItemFiltersRoot, DEFAULT_STATE_ITEM_FILTERS } from '../../../reducers/itemFilters.js';\nimport { sGetSlideshow } from '../../../reducers/slideshow.js';\nimport { sGetVisualization } from '../../../reducers/visualizations.js';\nimport { SystemSettingsCtx } from '../../SystemSettingsProvider.js';\nimport { WindowDimensionsCtx } from '../../WindowDimensionsProvider.js';\nimport ItemHeader from '../ItemHeader/ItemHeader.js';\nimport FatalErrorBoundary from './FatalErrorBoundary.js';\nimport { getGridItemElement } from './getGridItemElement.js';\nimport ItemContextMenu from './ItemContextMenu/ItemContextMenu.js';\nimport ItemFooter from './ItemFooter.js';\nimport memoizeOne from './memoizeOne.js';\nimport styles from './styles/Item.module.css';\nimport { pluginIsAvailable } from './Visualization/plugin.js';\nimport Visualization from './Visualization/Visualization.js';\nconst MIN_CLIENT_HEIGHT = 16;\nconst FS_CONTROLS_BUFFER = 40; // space for the fullscreen controls at bottom\n\nclass Item extends Component {\n  constructor(props) {\n    var _this$props$item;\n    super(props);\n    _defineProperty(this, \"state\", {\n      showFooter: false,\n      configLoaded: false,\n      loadItemFailed: false,\n      showNoFiltersOverlay: ((_this$props$item = this.props.item) === null || _this$props$item === void 0 ? void 0 : _this$props$item.type) === EVENT_VISUALIZATION\n    });\n    _defineProperty(this, \"isFullscreenSupported\", () => {\n      const el = getGridItemElement(this.props.item.id);\n      return !!(el !== null && el !== void 0 && el.requestFullscreen || el !== null && el !== void 0 && el.webkitRequestFullscreen);\n    });\n    _defineProperty(this, \"onClickNoFiltersOverlay\", () => this.setState({\n      showNoFiltersOverlay: false\n    }));\n    _defineProperty(this, \"onToggleFooter\", () => {\n      this.setState({\n        showFooter: !this.state.showFooter\n      }, this.props.onToggleItemExpanded(this.props.item.id));\n    });\n    _defineProperty(this, \"setActiveType\", type => {\n      type !== this.getActiveType() && this.props.setActiveType(this.props.item.id, type);\n    });\n    _defineProperty(this, \"getActiveType\", () => {\n      if (this.props.isEditing) {\n        return getItemTypeForVis(this.props.item);\n      }\n      return this.props.activeType || getItemTypeForVis(this.props.item);\n    });\n    _defineProperty(this, \"getAvailableHeight\", _ref => {\n      let {\n        width\n      } = _ref;\n      if (this.props.isFullscreen) {\n        const totalNonVisHeight = (this.headerRef.current.clientHeight || MIN_CLIENT_HEIGHT) + this.itemHeaderTotalMargin + (this.props.isFullscreen ? 0 : this.itemContentPadding) + FS_CONTROLS_BUFFER;\n        return `calc(100vh - ${totalNonVisHeight}px)`;\n      }\n      const calculatedHeight = getItemHeightPx(this.props.item, width) - this.headerRef.current.clientHeight - this.itemHeaderTotalMargin - this.itemContentPadding;\n      const height = this.memoizedGetContentHeight(calculatedHeight, this.contentRef ? this.contentRef.offsetHeight : null, isEditMode(this.props.dashboardMode) || isPrintMode(this.props.dashboardMode));\n      return `${height}px`;\n    });\n    _defineProperty(this, \"getAvailableWidth\", () => {\n      var _getGridItemElement;\n      if (this.props.isFullscreen) {\n        return '100%';\n      }\n      const rect = (_getGridItemElement = getGridItemElement(this.props.item.id)) === null || _getGridItemElement === void 0 ? void 0 : _getGridItemElement.getBoundingClientRect();\n      return rect && `${rect.width - this.itemContentPadding * 2}px`;\n    });\n    _defineProperty(this, \"onFatalError\", () => {\n      this.setState({\n        loadItemFailed: true\n      });\n    });\n    this.contentRef = /*#__PURE__*/React.createRef();\n    this.headerRef = /*#__PURE__*/React.createRef();\n    const style = window.getComputedStyle(document.documentElement);\n    this.itemContentPadding = parseInt(style.getPropertyValue('--item-content-padding').replace('px', ''));\n    this.itemHeaderTotalMargin = parseInt(style.getPropertyValue('--item-header-margin-top').replace('px', '')) + parseInt(style.getPropertyValue('--item-header-margin-bottom').replace('px', ''));\n    this.memoizedGetContentHeight = memoizeOne((calculatedHeight, measuredHeight, preferMeasured) => preferMeasured ? measuredHeight || calculatedHeight : calculatedHeight);\n  }\n  async componentDidMount() {\n    // Avoid refetching the visualization already in the Redux store\n    // when the same dashboard item is added again.\n    // This also solves a flashing of all the \"duplicated\" dashboard items.\n    !this.props.visualization.id && this.props.setVisualization(await apiFetchVisualization(this.props.item));\n    try {\n      if (this.props.settings.keyGatherAnalyticalObjectStatisticsInDashboardViews && isViewMode(this.props.dashboardMode)) {\n        await apiPostDataStatistics(getDataStatisticsName(this.props.item.type), getVisualizationId(this.props.item), this.props.engine);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n    this.setState({\n      configLoaded: true\n    });\n  }\n  componentDidUpdate(prevProps) {\n    if (this.props.isRecording && this.props.isRecording !== prevProps.isRecording) {\n      apiFetchVisualization(this.props.item);\n    }\n  }\n  render() {\n    const {\n      item,\n      dashboardMode,\n      itemFilters,\n      isFullscreen,\n      isSlideshowView,\n      setSlideshow,\n      sortIndex\n    } = this.props;\n    const {\n      showFooter,\n      showNoFiltersOverlay\n    } = this.state;\n    const originalType = getItemTypeForVis(item);\n    const activeType = this.getActiveType();\n    const actionButtons = pluginIsAvailable(activeType || item.type, this.props.apps) && isViewMode(dashboardMode) && !isSlideshowView ? /*#__PURE__*/React.createElement(ItemContextMenu, {\n      item: item,\n      visualization: this.props.visualization,\n      onSelectActiveType: this.setActiveType,\n      onToggleFooter: this.onToggleFooter,\n      enterFullscreen: () => setSlideshow(sortIndex),\n      activeType: activeType,\n      activeFooter: showFooter,\n      fullscreenSupported: this.isFullscreenSupported(),\n      loadItemFailed: this.state.loadItemFailed\n    }) : null;\n    const getTags = item => {\n      if (isViewMode(dashboardMode) && Object.keys(itemFilters).length) {\n        switch (activeType) {\n          case EVENT_VISUALIZATION:\n            {\n              return !showNoFiltersOverlay ? /*#__PURE__*/React.createElement(Tooltip, {\n                content: i18n.t('Filters are not applied to line list dashboard items')\n              }, /*#__PURE__*/React.createElement(Tag, {\n                negative: true\n              }, i18n.t('Filters not applied'))) : null;\n            }\n          case CHART:\n          case VISUALIZATION:\n            {\n              return item.type === VISUALIZATION && item.visualization.type === VIS_TYPE_OUTLIER_TABLE && Object.keys(itemFilters).some(filter => ![DIMENSION_ID_ORGUNIT, DIMENSION_ID_PERIOD].includes(filter)) ? /*#__PURE__*/React.createElement(Tooltip, {\n                content: i18n.t('Only Period and Organisation unit filters can be applied to this item')\n              }, /*#__PURE__*/React.createElement(Tag, {\n                negative: true\n              }, i18n.t('Some filters not applied'))) : null;\n            }\n        }\n      }\n      return null;\n    };\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ItemHeader, {\n      title: getVisualizationName(item),\n      itemId: item.id,\n      actionButtons: actionButtons,\n      ref: this.headerRef,\n      dashboardMode: dashboardMode,\n      isShortened: item.shortened,\n      tags: getTags(item)\n    }), /*#__PURE__*/React.createElement(FatalErrorBoundary, {\n      message: i18n.t('There was a problem loading this dashboard item'),\n      onFatalError: this.onFatalError\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(activeType, styles.content, {\n        [styles.fullscreen]: isFullscreen,\n        [styles.scrollbox]: activeType === EVENT_REPORT,\n        [styles.edit]: isEditMode(dashboardMode),\n        [styles.print]: isPrintMode(dashboardMode)\n      }),\n      ref: ref => this.contentRef = ref\n    }, this.state.configLoaded && /*#__PURE__*/React.createElement(WindowDimensionsCtx.Consumer, null, dimensions => /*#__PURE__*/React.createElement(Visualization, {\n      item: item,\n      visualization: this.props.visualization,\n      originalType: originalType,\n      activeType: activeType,\n      itemFilters: itemFilters,\n      availableHeight: this.getAvailableHeight(dimensions),\n      availableWidth: this.getAvailableWidth(),\n      gridWidth: this.props.gridWidth,\n      dashboardMode: dashboardMode,\n      showNoFiltersOverlay: Boolean(Object.keys(itemFilters).length && showNoFiltersOverlay),\n      onClickNoFiltersOverlay: this.onClickNoFiltersOverlay\n    })))), isViewMode(dashboardMode) && showFooter ? /*#__PURE__*/React.createElement(ItemFooter, {\n      item: item\n    }) : null);\n  }\n}\nItem.propTypes = {\n  activeType: PropTypes.string,\n  apps: PropTypes.array,\n  dashboardMode: PropTypes.string,\n  engine: PropTypes.object,\n  gridWidth: PropTypes.number,\n  isEditing: PropTypes.bool,\n  isFullscreen: PropTypes.bool,\n  isRecording: PropTypes.bool,\n  isSlideshowView: PropTypes.bool,\n  item: PropTypes.object,\n  itemFilters: PropTypes.object,\n  setActiveType: PropTypes.func,\n  setSlideshow: PropTypes.func,\n  setVisualization: PropTypes.func,\n  settings: PropTypes.object,\n  sortIndex: PropTypes.number,\n  visualization: PropTypes.object,\n  onToggleItemExpanded: PropTypes.func\n};\nItem.defaultProps = {\n  item: {},\n  onToggleItemExpanded: Function.prototype,\n  visualization: {}\n};\nconst mapStateToProps = (state, ownProps) => {\n  var _ownProps$item;\n  const itemFilters = !isEditMode(ownProps.dashboardMode) ? sGetItemFiltersRoot(state) : DEFAULT_STATE_ITEM_FILTERS;\n  return {\n    activeType: sGetItemActiveType(state, (_ownProps$item = ownProps.item) === null || _ownProps$item === void 0 ? void 0 : _ownProps$item.id),\n    isEditing: sGetIsEditing(state),\n    itemFilters,\n    visualization: sGetVisualization(state, getVisualizationId(ownProps.item)),\n    isSlideshowView: sGetSlideshow(state) !== null\n  };\n};\nconst mapDispatchToProps = {\n  setActiveType: acSetItemActiveType,\n  setVisualization: acAddVisualization,\n  setSlideshow: acSetSlideshow\n};\nconst ItemWithSettings = props => /*#__PURE__*/React.createElement(SystemSettingsCtx.Consumer, null, _ref2 => {\n  let {\n    systemSettings\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(Item, _extends({\n    settings: systemSettings\n  }, props));\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(ItemWithSettings);","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { APP, VISUALIZATION, REPORT_TABLE, CHART, MAP, EVENT_CHART, EVENT_REPORT, EVENT_VISUALIZATION, MESSAGES, REPORTS, RESOURCES, USERS, TEXT, SPACER, PAGEBREAK, PRINT_TITLE_PAGE } from '../../modules/itemTypes.js';\nimport AppItem from './AppItem/Item.js';\nimport ListItem from './ListItem/Item.js';\nimport MessagesItem from './MessagesItem/Item.js';\nimport NotSupportedItem from './NotSupportedItem/Item.js';\nimport PageBreakItem from './PageBreakItem/Item.js';\nimport PrintTitlePageItem from './PrintTitlePageItem/Item.js';\nimport SpacerItem from './SpacerItem/Item.js';\nimport TextItem from './TextItem/Item.js';\nimport VisualizationItem from './VisualizationItem/Item.js';\nconst getGridItem = type => {\n  switch (type) {\n    case VISUALIZATION:\n    case REPORT_TABLE:\n    case CHART:\n    case MAP:\n    case EVENT_CHART:\n    case EVENT_REPORT:\n    case EVENT_VISUALIZATION:\n      return VisualizationItem;\n    case MESSAGES:\n      return MessagesItem;\n    case REPORTS:\n    case RESOURCES:\n    case USERS:\n      return ListItem;\n    case TEXT:\n      return TextItem;\n    case SPACER:\n      return SpacerItem;\n    case APP:\n      return AppItem;\n    case PAGEBREAK:\n      return PageBreakItem;\n    case PRINT_TITLE_PAGE:\n      return PrintTitlePageItem;\n    default:\n      return NotSupportedItem;\n  }\n};\nexport const Item = props => {\n  const {\n    apps\n  } = useCachedDataQuery();\n  const engine = useDataEngine();\n  const GridItem = getGridItem(props.item.type);\n  return /*#__PURE__*/React.createElement(GridItem, _extends({\n    apps: apps\n  }, props, {\n    engine: engine\n  }));\n};\nItem.propTypes = {\n  item: PropTypes.object\n};","import sortBy from 'lodash/sortBy.js';\nimport { MAP, VISUALIZATION, EVENT_VISUALIZATION, REPORT_TABLE, CHART } from './itemTypes.js';\nexport const getFirstOfTypes = items => {\n  var _sortBy$, _sortBy$2, _sortBy$3;\n  const firstOfTypes = {};\n  firstOfTypes[MAP] = (_sortBy$ = sortBy(items.filter(item => item.type === MAP), ['y', 'x'])[0]) === null || _sortBy$ === void 0 ? void 0 : _sortBy$.id;\n  firstOfTypes[EVENT_VISUALIZATION] = (_sortBy$2 = sortBy(items.filter(item => item.type === EVENT_VISUALIZATION), ['y', 'x'])[0]) === null || _sortBy$2 === void 0 ? void 0 : _sortBy$2.id;\n  firstOfTypes[VISUALIZATION] = (_sortBy$3 = sortBy(items.filter(item => [VISUALIZATION, REPORT_TABLE, CHART].includes(item.type)), ['y', 'x'])[0]) === null || _sortBy$3 === void 0 ? void 0 : _sortBy$3.id;\n  return Object.values(firstOfTypes).filter(id => id !== undefined);\n};","import sortBy from 'lodash/sortBy.js';\nimport { itemTypeMap } from '../../modules/itemTypes.js';\nimport { orArray } from '../../modules/util.js';\nexport const getTransformYPx = elStyle => {\n  var _elStyle$transform$sp;\n  if (!elStyle || !elStyle.transform) {\n    return null;\n  }\n\n  // find valid transforms - those with y pixels\n  // the code is expecting the transform prop to\n  // look like:  translate(10px, 300px)\n  const transformY = (_elStyle$transform$sp = elStyle.transform.split(' ')[1]) === null || _elStyle$transform$sp === void 0 ? void 0 : _elStyle$transform$sp.match(/(\\d+)px/);\n  if (transformY) {\n    return parseInt(transformY[1]);\n  } else {\n    return null;\n  }\n};\nexport const getDomGridItemsSortedByYPos = elements => {\n  const types = Object.keys(itemTypeMap);\n  const elementsWithBoundingRect = orArray(elements).map(el => {\n    const type = Array.from(el.classList).find(className => types.indexOf(className) > -1);\n    const rect = el.getBoundingClientRect();\n    const y = getTransformYPx(el.style) || parseInt(rect.y);\n    return {\n      type,\n      classList: el.classList,\n      bottomY: y + parseInt(rect.height),\n      el\n    };\n  });\n  return sortBy(elementsWithBoundingRect, ['bottomY']);\n};\nconst isLeapPage = n => {\n  // pages 5,9,13,17,21,25,29... are leap pages\n  let x = 0;\n  const startPage = 1;\n  const getMultiple = factor => startPage + 4 * factor;\n  let multiple = getMultiple(0);\n  let isLeapPage = false;\n  while (multiple < n) {\n    multiple = getMultiple(x);\n    ++x;\n    if (multiple === n) {\n      isLeapPage = true;\n      break;\n    }\n  }\n  return isLeapPage;\n};\nexport const getPageBreakPositions = items => {\n  // add enough page breaks so that each item could\n  // be put on its own page. Due to the react-grid-layout\n  // unit system, we have to estimate roughly the size of each\n  // page. At regular intervals add a unit, like a leap year\n  const yPosList = [];\n  let yPos = 0;\n  for (let pageNum = 1; pageNum <= items.length; ++pageNum) {\n    if (pageNum === 1) {\n      yPos += 35;\n    } else if (isLeapPage(pageNum)) {\n      yPos += 40;\n    } else {\n      yPos += 39;\n    }\n    yPosList.push(yPos);\n  }\n  return yPosList;\n};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactGridLayout from 'react-grid-layout';\nimport NoContentMessage from '../../components/NoContentMessage.js';\nimport { GRID_ROW_HEIGHT_PX, GRID_COMPACT_TYPE, MARGIN_PX, GRID_COLUMNS } from '../../modules/gridUtil.js';\nconst PAGE_PADDING_PX = 24;\nconst StaticGrid = _ref => {\n  let {\n    layout,\n    children,\n    onLayoutChange,\n    className\n  } = _ref;\n  if (!layout.length) {\n    return /*#__PURE__*/React.createElement(NoContentMessage, {\n      text: i18n.t('There are no items on this dashboard')\n    });\n  }\n  const style = window.getComputedStyle(document.documentElement);\n  const pageWidthPx = parseInt(style.getPropertyValue('--a4-landscape-width-px').replace('px', ''));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ReactGridLayout, {\n    margin: MARGIN_PX,\n    cols: GRID_COLUMNS,\n    rowHeight: GRID_ROW_HEIGHT_PX,\n    width: pageWidthPx - PAGE_PADDING_PX,\n    compactType: GRID_COMPACT_TYPE,\n    isDraggable: false,\n    isResizable: false,\n    draggableCancel: \"input,textarea\",\n    className: cx('layout', className),\n    layout: layout,\n    onLayoutChange: onLayoutChange\n  }, children));\n};\nStaticGrid.defaultProps = {\n  onLayoutChange: Function.prototype\n};\nStaticGrid.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  layout: PropTypes.array,\n  onLayoutChange: PropTypes.func\n};\nexport default StaticGrid;","function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport cx from 'classnames';\nimport sortBy from 'lodash/sortBy.js';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { acUpdatePrintDashboardLayout } from '../../actions/printDashboard.js';\nimport { Item } from '../../components/Item/Item.js';\nimport { PRINT_LAYOUT } from '../../modules/dashboardModes.js';\nimport { getFirstOfTypes } from '../../modules/getFirstOfType.js';\nimport { getGridItemDomElementClassName } from '../../modules/getGridItemDomElementClassName.js';\nimport { hasShape } from '../../modules/gridUtil.js';\nimport { PAGEBREAK } from '../../modules/itemTypes.js';\nimport { sGetIsEditing } from '../../reducers/editDashboard.js';\nimport { sGetPrintDashboardItems } from '../../reducers/printDashboard.js';\nimport { getDomGridItemsSortedByYPos, getTransformYPx } from './printUtils.js';\nimport StaticGrid from './StaticGrid.js';\nclass PrintLayoutItemGrid extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"onLayoutChange\", newLayout => {\n      this.props.updateDashboardLayout(newLayout);\n    });\n    _defineProperty(this, \"isFirstPageBreak\", item => {\n      if (item.type !== PAGEBREAK) {\n        return false;\n      }\n      const pageBreaks = this.props.dashboardItems.filter(i => i.type === PAGEBREAK);\n      const sortedPageBreaks = sortBy(pageBreaks, ['y']);\n      return item.y === sortedPageBreaks[0].y;\n    });\n    _defineProperty(this, \"getItemComponent\", item => {\n      // the first-page-break class is used in Edit print preview\n      const itemClassNames = cx('print', 'layout', getGridItemDomElementClassName(item.id), `${item.type}`, {\n        'first-page-break': this.props.isEditing && this.isFirstPageBreak(item),\n        shortened: !!item.shortened\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: item.i,\n        className: itemClassNames,\n        \"data-test\": `dashboarditem-${item.id}`\n      }, /*#__PURE__*/React.createElement(Item, {\n        item: item,\n        dashboardMode: PRINT_LAYOUT\n      }));\n    });\n    _defineProperty(this, \"getItemComponents\", items => {\n      const firstOfTypes = getFirstOfTypes(items);\n      return items.map(item => {\n        if (firstOfTypes.includes(item.id)) {\n          item.firstOfType = true;\n        }\n        return this.getItemComponent(item);\n      });\n    });\n  }\n  hideExtraPageBreaks() {\n    const sortedElements = getDomGridItemsSortedByYPos(Array.from(document.querySelectorAll('.react-grid-item')));\n    let pageBreakBottom = 0;\n    let lastItemBottom = 0;\n    let foundNonPageBreak = false;\n    for (let i = sortedElements.length - 1; i >= 0; --i) {\n      const item = sortedElements[i];\n      if (item.type === PAGEBREAK) {\n        if (!foundNonPageBreak) {\n          item.el.classList.add('removed');\n        } else {\n          pageBreakBottom = item.bottomY;\n          break;\n        }\n      } else {\n        foundNonPageBreak = true;\n        const thisItemBottom = item.bottomY;\n        if (thisItemBottom > lastItemBottom) {\n          lastItemBottom = thisItemBottom;\n        }\n      }\n    }\n    const pageHeight = 720;\n    const gridElement = document.querySelector('.react-grid-layout');\n    // the last page break is before the last item(s) so\n    // maxHeight is one page beyond the last page break\n    const maxHeight = pageBreakBottom + pageHeight;\n    if (gridElement) {\n      gridElement.style.height = `${maxHeight}px`;\n    }\n    if (this.props.isEditing) {\n      //scroll to below the title page - which is middle of the first pagebreak\n      const firstBreak = document.querySelector('.first-page-break');\n      if (firstBreak && firstBreak.style && firstBreak.style.transform) {\n        const yPos = getTransformYPx(firstBreak.style);\n        const scrollArea = document.querySelector('.scroll-area');\n        scrollArea && scrollArea.scroll(0, yPos + 50);\n      }\n    }\n  }\n  componentDidMount() {\n    this.hideExtraPageBreaks();\n  }\n  componentDidUpdate() {\n    this.hideExtraPageBreaks();\n  }\n  render() {\n    const {\n      dashboardItems\n    } = this.props;\n    return /*#__PURE__*/React.createElement(StaticGrid, {\n      layout: dashboardItems,\n      onLayoutChange: this.onLayoutChange\n    }, this.getItemComponents(dashboardItems));\n  }\n}\nPrintLayoutItemGrid.propTypes = {\n  dashboardItems: PropTypes.array,\n  isEditing: PropTypes.bool,\n  updateDashboardLayout: PropTypes.func\n};\nconst mapStateToProps = state => {\n  return {\n    dashboardItems: sGetPrintDashboardItems(state).filter(hasShape),\n    isEditing: sGetIsEditing(state)\n  };\n};\nexport default connect(mapStateToProps, {\n  updateDashboardLayout: acUpdatePrintDashboardLayout\n})(PrintLayoutItemGrid);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"PrintLayoutDashboard_container__qLjc1\",\"wrapper\":\"PrintLayoutDashboard_wrapper__Btu4X\",\"editView\":\"PrintLayoutDashboard_editView__U7mRe\",\"pageOuter\":\"PrintLayoutDashboard_pageOuter__MTYm4\"};","import { useDataEngine } from '@dhis2/app-runtime';\nimport { Layer, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { acSetPrintDashboard, acAddPrintDashboardItem, acUpdatePrintDashboardItem } from '../../actions/printDashboard.js';\nimport { apiFetchDashboard } from '../../api/fetchDashboard.js';\nimport { VIEW } from '../../modules/dashboardModes.js';\nimport { MAX_ITEM_GRID_HEIGHT } from '../../modules/gridUtil.js';\nimport { PAGEBREAK, PRINT_TITLE_PAGE } from '../../modules/itemTypes.js';\nimport { setHeaderbarVisible } from '../../modules/setHeaderbarVisible.js';\nimport { sGetEditDashboardRoot } from '../../reducers/editDashboard.js';\nimport PrintActionsBar from './ActionsBar.js';\nimport PrintInfo from './PrintInfo.js';\nimport PrintLayoutItemGrid from './PrintLayoutItemGrid.js';\nimport { getPageBreakPositions } from './printUtils.js';\nimport classes from './styles/PrintLayoutDashboard.module.css';\nimport './styles/print.css';\nimport './styles/print-layout.css';\nconst addPageBreaks = (items, addDashboardItem) => {\n  const yPosList = getPageBreakPositions(items);\n  for (let i = 0; i < items.length; ++i) {\n    addDashboardItem({\n      type: PAGEBREAK,\n      yPos: yPosList[i]\n    });\n  }\n};\nconst PrintLayoutDashboard = _ref => {\n  let {\n    dashboard,\n    id,\n    setPrintDashboard,\n    addDashboardItem,\n    updateDashboardItem,\n    fromEdit\n  } = _ref;\n  const dataEngine = useDataEngine();\n  const [redirectUrl, setRedirectUrl] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const customizePrintLayoutDashboard = dboard => {\n    // If any items are taller than one page, reduce it to one\n    // page (react-grid-layout units)\n    dboard.dashboardItems.forEach(item => {\n      if (item.h > MAX_ITEM_GRID_HEIGHT) {\n        item.shortened = true;\n        updateDashboardItem(Object.assign({}, item, {\n          h: MAX_ITEM_GRID_HEIGHT\n        }));\n      }\n    });\n    addPageBreaks(dboard.dashboardItems, addDashboardItem);\n    addDashboardItem({\n      type: PRINT_TITLE_PAGE,\n      isOneItemPerPage: false\n    });\n    setIsLoading(false);\n  };\n  useEffect(() => {\n    const loadDashboard = async () => {\n      try {\n        const dashboard = await apiFetchDashboard(dataEngine, id, {\n          mode: VIEW\n        });\n        setPrintDashboard(dashboard);\n        customizePrintLayoutDashboard(dashboard);\n      } catch (error) {\n        setRedirectUrl(id ? `/${id}` : '/');\n        setIsLoading(false);\n      }\n    };\n    setHeaderbarVisible(false);\n    if (!dashboard) {\n      loadDashboard();\n    } else {\n      setPrintDashboard(dashboard);\n      customizePrintLayoutDashboard(dashboard);\n    }\n  }, [dashboard]);\n  if (redirectUrl) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: redirectUrl\n    });\n  }\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(Layer, {\n      translucent: true\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, !fromEdit && /*#__PURE__*/React.createElement(PrintActionsBar, {\n    id: id\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.wrapper, 'scroll-area', fromEdit && classes.editView)\n  }, !fromEdit && /*#__PURE__*/React.createElement(PrintInfo, {\n    isLayout: true\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.pageOuter,\n    \"data-test\": \"print-layout-page\"\n  }, /*#__PURE__*/React.createElement(PrintLayoutItemGrid, null))));\n};\nPrintLayoutDashboard.propTypes = {\n  addDashboardItem: PropTypes.func,\n  dashboard: PropTypes.object,\n  fromEdit: PropTypes.bool,\n  id: PropTypes.string,\n  setPrintDashboard: PropTypes.func,\n  updateDashboardItem: PropTypes.func\n};\nconst mapStateToProps = (state, ownProps) => {\n  var _ownProps$match, _ownProps$match$param;\n  return {\n    dashboard: ownProps.fromEdit ? sGetEditDashboardRoot(state) : null,\n    id: ((_ownProps$match = ownProps.match) === null || _ownProps$match === void 0 ? void 0 : (_ownProps$match$param = _ownProps$match.params) === null || _ownProps$match$param === void 0 ? void 0 : _ownProps$match$param.dashboardId) || null\n  };\n};\nexport default connect(mapStateToProps, {\n  setPrintDashboard: acSetPrintDashboard,\n  addDashboardItem: acAddPrintDashboardItem,\n  updateDashboardItem: acUpdatePrintDashboardItem\n})(PrintLayoutDashboard);","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"ConfirmActionDialog_content__6P9tN\"};","import { Button, Modal, ModalContent, ModalActions, ButtonStrip, ModalTitle } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './styles/ConfirmActionDialog.module.css';\nconst ConfirmActionDialog = _ref => {\n  let {\n    onConfirm,\n    onCancel,\n    open,\n    title,\n    message,\n    cancelLabel,\n    confirmLabel\n  } = _ref;\n  return open && /*#__PURE__*/React.createElement(Modal, {\n    dataTest: \"confirm-action-dialog\",\n    onClose: onCancel,\n    small: true,\n    position: \"middle\"\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, title), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.content\n  }, message)), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    key: \"cancel\",\n    secondary: true,\n    onClick: onCancel\n  }, cancelLabel), /*#__PURE__*/React.createElement(Button, {\n    key: \"confirm\",\n    destructive: true,\n    onClick: onConfirm\n  }, confirmLabel))));\n};\nConfirmActionDialog.propTypes = {\n  cancelLabel: PropTypes.string,\n  confirmLabel: PropTypes.string,\n  message: PropTypes.string,\n  open: PropTypes.bool,\n  title: PropTypes.string,\n  onCancel: PropTypes.func,\n  onConfirm: PropTypes.func\n};\nexport default ConfirmActionDialog;","export const deleteDashboardMutation = {\n  type: 'delete',\n  resource: 'dashboards',\n  id: _ref => {\n    let {\n      id\n    } = _ref;\n    return id;\n  }\n};","// filter out CATEGORY that are not of type ATTRIBUTE\nconst filteredDimensions = dimensions => dimensions.filter(dim => dim.dimensionType !== 'CATEGORY' || dim.dimensionType === 'CATEGORY' && dim.dataDimensionType === 'ATTRIBUTE');\nexport default filteredDimensions;","import { apiFetchDimensions } from '@dhis2/analytics';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { acSetDimensions } from '../actions/dimensions.js';\nimport { useUserSettings } from '../components/UserSettingsProvider.js';\nimport getFilteredDimensions from './getFilteredDimensions.js';\nconst useDimensions = doFetch => {\n  const dataEngine = useDataEngine();\n  const {\n    userSettings\n  } = useUserSettings();\n  const dimensions = useSelector(state => state.dimensions);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    const fetchDimensions = async () => {\n      try {\n        const unfilteredDimensions = await apiFetchDimensions(dataEngine, userSettings.displayProperty);\n        dispatch(acSetDimensions(getFilteredDimensions(unfilteredDimensions)));\n      } catch (e) {\n        console.error(e);\n      }\n    };\n    if (!dimensions.length && doFetch && userSettings.displayProperty) {\n      fetchDimensions();\n    }\n  }, [dimensions, doFetch, userSettings.displayProperty, dispatch, dataEngine]);\n  return dimensions;\n};\nexport default useDimensions;","import { SET_DIMENSIONS } from '../reducers/dimensions.js';\nexport const acSetDimensions = dimensions => ({\n  type: SET_DIMENSIONS,\n  value: dimensions\n});","// extracted by mini-css-extract-plugin\nexport default {\"descContainer\":\"FilterSettingsDialog_descContainer__tRsPj\",\"radioButton\":\"FilterSettingsDialog_radioButton__DeCeD\",\"transferHeader\":\"FilterSettingsDialog_transferHeader__0bbAR\"};","import { DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip, Modal, ModalActions, ModalContent, ModalTitle, Radio, Transfer } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport useDimensions from '../../modules/useDimensions.js';\nimport classes from './styles/FilterSettingsDialog.module.css';\nconst RadioOptions = _ref => {\n  let {\n    filtersSelectable,\n    updateFilterDimensionRestrictability\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"form\", null, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.radioButton\n  }, /*#__PURE__*/React.createElement(Radio, {\n    dense: true,\n    checked: !filtersSelectable,\n    label: i18n.t('Allow filtering by all dimensions'),\n    name: \"radio-allow-filtering-on-all\",\n    onChange: payload => {\n      return updateFilterDimensionRestrictability(payload.value === 'true');\n    },\n    value: 'false'\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.radioButton\n  }, /*#__PURE__*/React.createElement(Radio, {\n    dense: true,\n    checked: filtersSelectable,\n    label: i18n.t('Only allow filtering by selected dimensions'),\n    name: \"radio-restrict-filtering\",\n    onChange: payload => {\n      return updateFilterDimensionRestrictability(payload.value === 'true');\n    },\n    value: 'true'\n  })));\n};\nRadioOptions.propTypes = {\n  filtersSelectable: PropTypes.bool,\n  updateFilterDimensionRestrictability: PropTypes.func\n};\nconst FilterSettingsDialog = _ref2 => {\n  let {\n    restrictFilters,\n    initiallySelectedItems,\n    onClose,\n    onConfirm,\n    open\n  } = _ref2;\n  const [selected, setSelected] = useState(initiallySelectedItems);\n  const [filtersSelectable, setFiltersSelectable] = useState(restrictFilters);\n  const dimensions = useDimensions(open);\n  const updateFilterDimensionRestrictability = val => {\n    if (val) {\n      const otherItems = selected.filter(i => i !== DIMENSION_ID_ORGUNIT && i !== DIMENSION_ID_PERIOD);\n      updateSelectedFilters([DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, ...otherItems]);\n    }\n    setFiltersSelectable(val);\n  };\n  const updateSelectedFilters = sItems => {\n    // ensure that orgUnit, period appear before other items\n    const periodItem = [...new Set(sItems.filter(i => i === DIMENSION_ID_PERIOD))];\n    const orgUnitItem = [...new Set(sItems.filter(i => i === DIMENSION_ID_ORGUNIT))];\n    const otherItems = sItems.filter(i => i !== DIMENSION_ID_ORGUNIT && i !== DIMENSION_ID_PERIOD);\n    return setSelected([...periodItem, ...orgUnitItem, ...otherItems]);\n  };\n  const closeDialog = () => {\n    setSelected(initiallySelectedItems);\n    setFiltersSelectable(restrictFilters);\n    onClose();\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, open && /*#__PURE__*/React.createElement(Modal, {\n    large: true,\n    position: \"top\",\n    onClose: closeDialog\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Dashboard filter settings')), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.descContainer\n  }, /*#__PURE__*/React.createElement(\"span\", null, i18n.t(`Dashboards can be filtered by dimensions to change\n                                         the data shown. By default, all dimensions are available\n                                         as filters. Alternatively, only selected dimensions can\n                                         be made available on a dashboard.`))), /*#__PURE__*/React.createElement(RadioOptions, {\n    filtersSelectable: filtersSelectable,\n    updateFilterDimensionRestrictability: updateFilterDimensionRestrictability\n  }), filtersSelectable && /*#__PURE__*/React.createElement(Transfer, {\n    filterable: true,\n    height: \"400px\",\n    leftHeader: /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.transferHeader\n    }, /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Available Filters'))),\n    maxSelections: Infinity,\n    onChange: payload => {\n      return updateSelectedFilters(payload.selected);\n    },\n    options: dimensions.map(d => {\n      return {\n        label: d.name,\n        value: d.id\n      };\n    }),\n    optionsWidth: \"350px\",\n    rightHeader: /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.transferHeader\n    }, /*#__PURE__*/React.createElement(\"span\", null, i18n.t('Selected Filters'))),\n    selected: selected,\n    selectedWidth: \"350px\"\n  })), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: closeDialog,\n    secondary: true,\n    type: \"button\"\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    onClick: () => {\n      if (!filtersSelectable) {\n        setSelected([]);\n      }\n      onConfirm(filtersSelectable, selected);\n    },\n    primary: true,\n    type: \"button\"\n  }, i18n.t('Confirm'))))));\n};\nFilterSettingsDialog.propTypes = {\n  initiallySelectedItems: PropTypes.array,\n  open: PropTypes.bool,\n  restrictFilters: PropTypes.bool,\n  onClose: PropTypes.func,\n  onConfirm: PropTypes.func\n};\nexport default FilterSettingsDialog;","// extracted by mini-css-extract-plugin\nexport default {\"editBar\":\"ActionsBar_editBar__pUh1e\",\"controls\":\"ActionsBar_controls__agpy7\",\"offline\":\"ActionsBar_offline__OOmob\",\"online\":\"ActionsBar_online__ab+-y\"};","import { OfflineTooltip, TranslationDialog } from '@dhis2/analytics';\nimport { useDhis2ConnectionStatus, useDataEngine, useAlert } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, ButtonStrip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { tFetchDashboards } from '../../actions/dashboards.js';\nimport { tSaveDashboard, acClearEditDashboard, acSetPrintPreviewView, acClearPrintPreviewView, acSetFilterSettings } from '../../actions/editDashboard.js';\nimport { acClearPrintDashboard } from '../../actions/printDashboard.js';\nimport { acClearSelected } from '../../actions/selected.js';\nimport ConfirmActionDialog from '../../components/ConfirmActionDialog.js';\nimport { sGetEditDashboardRoot, sGetIsPrintPreviewView, sGetEditIsDirty, sGetLayoutColumns } from '../../reducers/editDashboard.js';\nimport { deleteDashboardMutation } from './deleteDashboardMutation.js';\nimport FilterSettingsDialog from './FilterSettingsDialog.js';\nimport classes from './styles/ActionsBar.module.css';\nconst saveFailedMessage = i18n.t('Failed to save dashboard. You might be offline or not have access to edit this dashboard.');\nconst saveFailedCodeExistsMessage = i18n.t('Failed to save dashboard. This code is already being used on another dashboard.');\nconst deleteFailedMessage = i18n.t('Failed to delete dashboard. You might be offline or not have access to edit this dashboard.');\nconst fieldsToTranslate = ['name', 'description'];\nconst EditBar = _ref => {\n  var _dashboard$access2, _dashboard$access3, _dashboard$access4, _dashboard$access5, _dashboard$access6;\n  let {\n    dashboard,\n    ...props\n  } = _ref;\n  const dataEngine = useDataEngine();\n  const {\n    isConnected: online\n  } = useDhis2ConnectionStatus();\n  const [translationDlgIsOpen, setTranslationDlgIsOpen] = useState(false);\n  const [filterSettingsDlgIsOpen, setFilterSettingsDlgIsOpen] = useState(false);\n  const [confirmDeleteDlgIsOpen, setConfirmDeleteDlgIsOpen] = useState(false);\n  const [confirmDiscardDlgIsOpen, setConfirmDiscardDlgIsOpen] = useState(false);\n  const [redirectUrl, setRedirectUrl] = useState(undefined);\n  const saveFailureAlert = useAlert(saveFailedMessage, {\n    critical: true\n  });\n  const saveFailureCodeExistsAlert = useAlert(saveFailedCodeExistsMessage, {\n    critical: true\n  });\n  const deleteFailureAlert = useAlert(deleteFailedMessage, {\n    critical: true\n  });\n  const onConfirmDelete = () => {\n    setConfirmDeleteDlgIsOpen(true);\n  };\n  const onDeleteConfirmed = () => {\n    setConfirmDeleteDlgIsOpen(false);\n    dataEngine.mutate(deleteDashboardMutation, {\n      variables: {\n        id: dashboard.id\n      }\n    }).then(() => {\n      props.clearSelected();\n      return props.fetchDashboards();\n    }).then(() => setRedirectUrl('/')).catch(deleteFailureAlert.show);\n  };\n  const onSave = () => {\n    props.saveDashboard().then(newId => {\n      props.clearSelected();\n      setRedirectUrl(`/${newId}`);\n    }).catch(e => {\n      var _e$details$response, _e$details$response$e, _e$details$response$e2;\n      if (e.details.httpStatusCode === 409 && ((_e$details$response = e.details.response) === null || _e$details$response === void 0 ? void 0 : (_e$details$response$e = _e$details$response.errorReports) === null || _e$details$response$e === void 0 ? void 0 : (_e$details$response$e2 = _e$details$response$e.at(0)) === null || _e$details$response$e2 === void 0 ? void 0 : _e$details$response$e2.errorCode) === 'E5003') {\n        saveFailureCodeExistsAlert.show();\n      } else {\n        saveFailureAlert.show();\n      }\n    });\n  };\n  const onPrintPreview = () => {\n    if (props.isPrintPreviewView) {\n      props.clearPrintPreview();\n      props.clearPrintDashboard();\n    } else {\n      props.showPrintPreview();\n    }\n  };\n  const onConfirmDiscard = () => {\n    // disabling dirty check in 2.37\n\n    // if (props.isDirty) {\n    //     setConfirmDiscardDlgIsOpen(true)\n    // } else {\n    onDiscardConfirmed();\n    // }\n  };\n  const onDiscardConfirmed = () => {\n    props.onDiscardChanges();\n    const redirectUrl = dashboard.id ? `/${dashboard.id}` : '/';\n    setRedirectUrl(redirectUrl);\n  };\n  const onContinueEditing = () => {\n    setConfirmDeleteDlgIsOpen(false);\n    setConfirmDiscardDlgIsOpen(false);\n  };\n  const onFilterSettingsConfirmed = (filterSettingsRestrictability, selectedFilters) => {\n    const allowedFilters = filterSettingsRestrictability ? selectedFilters : [];\n    props.setFilterSettings({\n      allowedFilters,\n      restrictFilters: filterSettingsRestrictability\n    });\n    toggleFilterSettingsDialog();\n  };\n  const toggleTranslationDialog = () => setTranslationDlgIsOpen(!translationDlgIsOpen);\n  const toggleFilterSettingsDialog = () => {\n    setFilterSettingsDlgIsOpen(!filterSettingsDlgIsOpen);\n  };\n  const translationDialog = () => translationDlgIsOpen ? /*#__PURE__*/React.createElement(TranslationDialog, {\n    className: \"translation-dialog\",\n    objectToTranslate: dashboard,\n    fieldsToTranslate: fieldsToTranslate,\n    onClose: toggleTranslationDialog,\n    onTranslationSaved: toggleTranslationDialog\n  }) : null;\n  const filterSettingsDialog = () => {\n    return /*#__PURE__*/React.createElement(FilterSettingsDialog, {\n      restrictFilters: dashboard.restrictFilters,\n      initiallySelectedItems: dashboard.allowedFilters,\n      onClose: toggleFilterSettingsDialog,\n      onConfirm: onFilterSettingsConfirmed,\n      open: filterSettingsDlgIsOpen\n    });\n  };\n  const renderActionButtons = () => {\n    var _dashboard$access;\n    return /*#__PURE__*/React.createElement(ButtonStrip, null, !props.isPrintPreviewView && /*#__PURE__*/React.createElement(OfflineTooltip, {\n      content: i18n.t('Cannot save this dashboard while offline')\n    }, /*#__PURE__*/React.createElement(Button, {\n      disabled: !online,\n      primary: true,\n      small: true,\n      onClick: onSave,\n      dataTest: \"save-dashboard-button\"\n    }, i18n.t('Save changes'))), /*#__PURE__*/React.createElement(OfflineTooltip, null, /*#__PURE__*/React.createElement(Button, {\n      small: true,\n      disabled: !online,\n      onClick: onPrintPreview\n    }, props.isPrintPreviewView ? i18n.t('Exit print preview') : i18n.t('Print preview'))), !props.isPrintPreviewView && /*#__PURE__*/React.createElement(OfflineTooltip, null, /*#__PURE__*/React.createElement(Button, {\n      small: true,\n      disabled: !online,\n      onClick: toggleFilterSettingsDialog\n    }, i18n.t('Filter settings'))), dashboard.id && !props.isPrintPreviewView && /*#__PURE__*/React.createElement(OfflineTooltip, null, /*#__PURE__*/React.createElement(Button, {\n      small: true,\n      disabled: !online,\n      onClick: toggleTranslationDialog\n    }, i18n.t('Translate'))), dashboard.id && !props.isPrintPreviewView && ((_dashboard$access = dashboard.access) === null || _dashboard$access === void 0 ? void 0 : _dashboard$access.delete) && /*#__PURE__*/React.createElement(OfflineTooltip, {\n      content: i18n.t('Cannot delete this dashboard while offline')\n    }, /*#__PURE__*/React.createElement(Button, {\n      small: true,\n      disabled: !online,\n      onClick: onConfirmDelete,\n      dataTest: \"delete-dashboard-button\"\n    }, i18n.t('Delete'))));\n  };\n  if (redirectUrl) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: redirectUrl\n    });\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.editBar,\n    \"data-test\": \"edit-control-bar\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.controls\n  }, (_dashboard$access2 = dashboard.access) !== null && _dashboard$access2 !== void 0 && _dashboard$access2.update ? renderActionButtons() : null, !props.isPrintPreviewView && /*#__PURE__*/React.createElement(Button, {\n    small: true,\n    secondary: true,\n    onClick: onConfirmDiscard\n  }, (_dashboard$access3 = dashboard.access) !== null && _dashboard$access3 !== void 0 && _dashboard$access3.update ? i18n.t('Exit without saving') : i18n.t('Go to dashboards')))), ((_dashboard$access4 = dashboard.access) === null || _dashboard$access4 === void 0 ? void 0 : _dashboard$access4.update) && filterSettingsDialog(), dashboard.id && ((_dashboard$access5 = dashboard.access) === null || _dashboard$access5 === void 0 ? void 0 : _dashboard$access5.update) && translationDialog(), dashboard.id && ((_dashboard$access6 = dashboard.access) === null || _dashboard$access6 === void 0 ? void 0 : _dashboard$access6.delete) && /*#__PURE__*/React.createElement(ConfirmActionDialog, {\n    title: i18n.t('Delete dashboard'),\n    message: i18n.t('Deleting dashboard \"{{ dashboardName }}\" will remove it for all users. This action cannot be undone. Are you sure you want to permanently delete this dashboard?', {\n      dashboardName: dashboard.name\n    }),\n    cancelLabel: i18n.t('Cancel'),\n    confirmLabel: i18n.t('Delete'),\n    onConfirm: onDeleteConfirmed,\n    onCancel: onContinueEditing,\n    open: confirmDeleteDlgIsOpen\n  }), /*#__PURE__*/React.createElement(ConfirmActionDialog, {\n    title: i18n.t('Discard changes'),\n    message: i18n.t('This dashboard has unsaved changes. Are you sure you want to leave and discard these unsaved changes?'),\n    cancelLabel: i18n.t('No, stay here'),\n    confirmLabel: i18n.t('Yes, discard changes'),\n    onConfirm: onDiscardConfirmed,\n    onCancel: onContinueEditing,\n    open: confirmDiscardDlgIsOpen\n  }));\n};\nEditBar.propTypes = {\n  clearPrintDashboard: PropTypes.func,\n  clearPrintPreview: PropTypes.func,\n  clearSelected: PropTypes.func,\n  columns: PropTypes.array,\n  dashboard: PropTypes.object,\n  fetchDashboards: PropTypes.func,\n  isDirty: PropTypes.bool,\n  isPrintPreviewView: PropTypes.bool,\n  saveDashboard: PropTypes.func,\n  setFilterSettings: PropTypes.func,\n  showPrintPreview: PropTypes.func,\n  onAutoLayoutSelect: PropTypes.func,\n  onDiscardChanges: PropTypes.func\n};\nEditBar.defaultProps = {\n  columns: [...Array(5).keys()].map(i => ({\n    index: i\n  }))\n};\nconst mapStateToProps = state => ({\n  columns: sGetLayoutColumns(state),\n  dashboard: sGetEditDashboardRoot(state),\n  isPrintPreviewView: sGetIsPrintPreviewView(state),\n  isDirty: sGetEditIsDirty(state)\n});\nconst mapDispatchToProps = {\n  clearPrintDashboard: () => dispatch => dispatch(acClearPrintDashboard()),\n  clearPrintPreview: () => dispatch => dispatch(acClearPrintPreviewView()),\n  clearSelected: () => dispatch => dispatch(acClearSelected()),\n  saveDashboard: () => dispatch => dispatch(tSaveDashboard()).then(id => id),\n  fetchDashboards: () => dispatch => dispatch(tFetchDashboards()),\n  onDiscardChanges: () => dispatch => dispatch(acClearEditDashboard()),\n  setFilterSettings: value => dispatch => dispatch(acSetFilterSettings(value)),\n  showPrintPreview: () => dispatch => dispatch(acSetPrintPreviewView())\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(EditBar);","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nimport i18n from '@dhis2/d2-i18n';\nimport { Divider, spacers, CenteredContent } from '@dhis2/ui';\nimport debounce from 'lodash/debounce.js';\nimport pick from 'lodash/pick.js';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { getVisualizationName } from '../modules/item.js';\nimport { APP, MESSAGES, RESOURCES, REPORTS, isVisualizationType } from '../modules/itemTypes.js';\nimport ItemHeader from './Item/ItemHeader/ItemHeader.js';\nconst defaultDebounceMs = 100;\nconst defaultBufferFactor = 0.25;\nconst observerConfig = {\n  attributes: true,\n  childList: false,\n  subtree: false\n};\nconst getItemHeader = _ref => {\n  let {\n    item,\n    apps\n  } = _ref;\n  if (isVisualizationType(item)) {\n    const title = getVisualizationName(item);\n    return /*#__PURE__*/React.createElement(ItemHeader, {\n      title: title,\n      style: {\n        minHeight: '31px'\n      }\n    });\n  }\n  let title;\n  if ([MESSAGES, RESOURCES, REPORTS].includes(item.type)) {\n    const titleMap = {\n      [MESSAGES]: i18n.t('Messages'),\n      [RESOURCES]: i18n.t('Resources'),\n      [REPORTS]: i18n.t('Reports')\n    };\n    title = titleMap[item.type];\n  } else if (item.type === APP) {\n    var _appDetails, _appDetails$settings, _appDetails$settings$;\n    let appDetails;\n    const appKey = item.appKey;\n    if (appKey) {\n      appDetails = apps.find(app => app.key === appKey);\n    }\n    const hideTitle = (_appDetails = appDetails) === null || _appDetails === void 0 ? void 0 : (_appDetails$settings = _appDetails.settings) === null || _appDetails$settings === void 0 ? void 0 : (_appDetails$settings$ = _appDetails$settings.dashboardWidget) === null || _appDetails$settings$ === void 0 ? void 0 : _appDetails$settings$.hideTitle;\n    title = hideTitle ? null : appDetails.name;\n  }\n  return !title ? null : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ItemHeader, {\n    title: title\n  }), /*#__PURE__*/React.createElement(Divider, {\n    margin: `0 0 ${spacers.dp4} 0`\n  }));\n};\nclass ProgressiveLoadingContainer extends Component {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"state\", {\n      shouldLoad: false\n    });\n    _defineProperty(this, \"containerRef\", null);\n    _defineProperty(this, \"debouncedCheckShouldLoad\", null);\n    _defineProperty(this, \"handlerOptions\", {\n      passive: true\n    });\n    _defineProperty(this, \"observer\", null);\n    _defineProperty(this, \"isObserving\", null);\n  }\n  checkShouldLoad() {\n    if (!this.containerRef) {\n      return;\n    }\n\n    // force load item regardless of its position\n    if (this.forceLoad && !this.state.shouldLoad) {\n      this.setState({\n        shouldLoad: true\n      });\n      if (!this.props.isOffline || this.props.dashboardIsCached) {\n        this.removeHandler();\n      }\n      return;\n    }\n\n    // when in fullscreen view, load is not based on\n    // position relative to viewport but instead on forceLoad only\n    if (this.props.fullsreenView) {\n      return;\n    }\n    const bufferPx = this.props.bufferFactor * window.innerHeight;\n    const rect = this.containerRef.getBoundingClientRect();\n\n    // load item if it is near viewport\n    if (rect.bottom > -bufferPx && rect.top < window.innerHeight + bufferPx) {\n      this.setState({\n        shouldLoad: true\n      });\n      if (!this.props.isOffline || this.props.dashboardIsCached) {\n        this.removeHandler();\n      }\n    }\n  }\n  registerHandler() {\n    this.debouncedCheckShouldLoad = debounce(() => this.checkShouldLoad(), this.props.debounceMs);\n    Array.from(document.getElementsByClassName('dashboard-scroll-container')).forEach(container => {\n      container.addEventListener('scroll', this.debouncedCheckShouldLoad, this.handlerOptions);\n    });\n    const mutationCallback = mutationsList => {\n      const styleChanged = mutationsList.find(mutation => mutation.attributeName === 'style');\n      if (styleChanged) {\n        this.debouncedCheckShouldLoad();\n      }\n    };\n    this.observer = new MutationObserver(mutationCallback);\n    this.observer.observe(this.containerRef, observerConfig);\n    this.isObserving = true;\n  }\n  removeHandler() {\n    Array.from(document.getElementsByClassName('dashboard-scroll-container')).forEach(container => {\n      container.removeEventListener('scroll', this.debouncedCheckShouldLoad, this.handlerOptions);\n    });\n    this.observer.disconnect();\n    this.isObserving = false;\n  }\n  componentDidMount() {\n    this.registerHandler();\n    this.checkShouldLoad();\n  }\n  componentDidUpdate() {\n    if (this.props.forceLoad && !this.state.shouldLoad) {\n      this.checkShouldLoad();\n    }\n  }\n  componentWillUnmount() {\n    this.removeHandler();\n  }\n  render() {\n    const {\n      children,\n      className,\n      style,\n      apps,\n      item,\n      dashboardIsCached,\n      isOffline,\n      ...props\n    } = this.props;\n    const eventProps = pick(props, ['onMouseDown', 'onTouchStart', 'onMouseUp', 'onTouchEnd']);\n    const renderContent = this.state.shouldLoad || props.forceLoad;\n    const getContent = () => {\n      if (isOffline && !dashboardIsCached && this.isObserving !== false) {\n        return !renderContent ? null : /*#__PURE__*/React.createElement(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            height: '100%'\n          }\n        }, getItemHeader({\n          item,\n          apps\n        }), /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(\"div\", null, i18n.t('Not available offline'))));\n      } else {\n        return renderContent && children;\n      }\n    };\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      ref: ref => this.containerRef = ref,\n      style: style,\n      className: className,\n      \"data-test\": `dashboarditem-${item.id}`\n    }, eventProps), getContent());\n  }\n}\n_defineProperty(ProgressiveLoadingContainer, \"propTypes\", {\n  children: PropTypes.node.isRequired,\n  item: PropTypes.object.isRequired,\n  apps: PropTypes.array,\n  bufferFactor: PropTypes.number,\n  className: PropTypes.string,\n  dashboardIsCached: PropTypes.bool,\n  debounceMs: PropTypes.number,\n  forceLoad: PropTypes.bool,\n  fullsreenView: PropTypes.bool,\n  isOffline: PropTypes.bool,\n  style: PropTypes.object\n});\n_defineProperty(ProgressiveLoadingContainer, \"defaultProps\", {\n  debounceMs: defaultDebounceMs,\n  bufferFactor: defaultBufferFactor,\n  forceLoad: false,\n  fullsreenView: false\n});\nexport default ProgressiveLoadingContainer;","// extracted by mini-css-extract-plugin\nexport default {\"grid\":\"ItemGrid_grid__JTVlS\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { Responsive as ResponsiveReactGridLayout } from 'react-grid-layout';\nimport { connect } from 'react-redux';\nimport { acUpdateDashboardItemShapes } from '../../actions/editDashboard.js';\nimport { useContainerWidth } from '../../components/DashboardContainer.js';\nimport { Item } from '../../components/Item/Item.js';\nimport NoContentMessage from '../../components/NoContentMessage.js';\nimport ProgressiveLoadingContainer from '../../components/ProgressiveLoadingContainer.js';\nimport { EDIT } from '../../modules/dashboardModes.js';\nimport { getFirstOfTypes } from '../../modules/getFirstOfType.js';\nimport { getGridItemDomElementClassName } from '../../modules/getGridItemDomElementClassName.js';\nimport { GRID_ROW_HEIGHT_PX, GRID_COMPACT_TYPE, MARGIN_PX, GRID_PADDING_PX, GRID_COLUMNS, hasShape, hasLayout } from '../../modules/gridUtil.js';\nimport { getBreakpoint } from '../../modules/smallScreen.js';\nimport { orArray } from '../../modules/util.js';\nimport { sGetEditDashboardItems, sGetHideGrid, sGetLayout } from '../../reducers/editDashboard.js';\nimport classes from './styles/ItemGrid.module.css';\nconst EditItemGrid = _ref => {\n  let {\n    dashboardItems,\n    acUpdateDashboardItemShapes,\n    hasLayout,\n    hideGrid\n  } = _ref;\n  const containerWidth = useContainerWidth();\n  const [gridWidth, setGridWidth] = useState({\n    width: 0\n  });\n  const firstOfTypes = getFirstOfTypes(dashboardItems);\n  const onLayoutChange = newLayout => {\n    acUpdateDashboardItemShapes(newLayout);\n  };\n  const onWidthChanged = containerWidth => setTimeout(() => setGridWidth({\n    width: containerWidth\n  }), 200);\n  const getItemComponent = item => {\n    if (firstOfTypes.includes(item.id)) {\n      item.firstOfType = true;\n    }\n    return /*#__PURE__*/React.createElement(ProgressiveLoadingContainer, {\n      key: item.i,\n      className: cx(item.type, 'edit', getGridItemDomElementClassName(item.id)),\n      item: item\n    }, /*#__PURE__*/React.createElement(Item, {\n      item: item,\n      gridWidth: gridWidth.width,\n      dashboardMode: EDIT\n    }));\n  };\n  const getItemComponents = items => items.map(item => getItemComponent(item));\n  if (!dashboardItems.length) {\n    return /*#__PURE__*/React.createElement(NoContentMessage, {\n      text: i18n.t('There are no items on this dashboard')\n    });\n  }\n  if (hideGrid) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(ResponsiveReactGridLayout, {\n    className: classes.grid,\n    rowHeight: GRID_ROW_HEIGHT_PX,\n    width: containerWidth,\n    cols: {\n      lg: GRID_COLUMNS\n    },\n    breakpoints: {\n      lg: getBreakpoint(containerWidth)\n    },\n    layouts: {\n      lg: dashboardItems\n    },\n    compactType: GRID_COMPACT_TYPE,\n    margin: MARGIN_PX,\n    containerPadding: {\n      lg: GRID_PADDING_PX\n    },\n    onLayoutChange: onLayoutChange,\n    onWidthChange: onWidthChanged,\n    isDraggable: !hasLayout,\n    isResizable: !hasLayout,\n    draggableCancel: \"button,input,textarea\"\n  }, getItemComponents(dashboardItems));\n};\nEditItemGrid.propTypes = {\n  acUpdateDashboardItemShapes: PropTypes.func,\n  dashboardItems: PropTypes.array,\n  hasLayout: PropTypes.bool,\n  hideGrid: PropTypes.bool\n};\n\n// Container\n\nconst mapStateToProps = state => {\n  return {\n    dashboardItems: orArray(sGetEditDashboardItems(state)).filter(hasShape),\n    hasLayout: hasLayout(sGetLayout(state)),\n    hideGrid: sGetHideGrid(state)\n  };\n};\nconst mapDispatchToProps = {\n  acUpdateDashboardItemShapes\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(EditItemGrid);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"EditDashboard_container__l6Kmh\",\"notice\":\"EditDashboard_notice__XaVLF\"};","import React from 'react';\nexport const LayoutFixedIcon = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"42\",\n  viewBox: \"0 0 42 42\",\n  width: \"42\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m10 0v42h-10v-42zm16 0v42h-10v-42zm16 0v42h-10v-42z\",\n  fillRule: \"evenodd\"\n}));\nexport default LayoutFixedIcon;","import React from 'react';\nexport const LayoutFreeflowIcon = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"42\",\n  viewBox: \"0 0 42 42\",\n  width: \"42\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m42 33v9h-42v-9zm-31-12v7h-11v-7zm15 0v7h-11v-7zm16-21v28h-10v-28zm-16 0v16h-26v-16z\",\n  fillRule: \"evenodd\"\n}));\nexport default LayoutFreeflowIcon;","import { useState, useEffect } from 'react';\nconst useDebounce = (value, delay) => {\n  const [debouncedValue, setDebouncedValue] = useState(value);\n  useEffect(() => {\n    const handler = setTimeout(() => {\n      setDebouncedValue(value);\n    }, delay);\n    return () => {\n      clearTimeout(handler);\n    };\n  }, [value, delay]);\n  return debouncedValue;\n};\nexport default useDebounce;","// extracted by mini-css-extract-plugin\nexport default {\"menuItem\":\"ContentMenuItem_menuItem__fMYQk\",\"launchLink\":\"ContentMenuItem_launchLink__v2Rn2\",\"label\":\"ContentMenuItem_label__v78Hj\",\"buttonInsert\":\"ContentMenuItem_buttonInsert__e09oA\"};","import { visTypeIcons } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { MenuItem, colors, IconLaunch16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { getItemIcon, VISUALIZATION } from '../../../modules/itemTypes.js';\nimport classes from './styles/ContentMenuItem.module.css';\nconst LaunchLink = _ref => {\n  let {\n    url\n  } = _ref;\n  const handleClick = useCallback(() => {\n    window.open(url, '_blank', 'noopener noreferrer');\n  }, [url]);\n  return /*#__PURE__*/React.createElement(\"span\", {\n    onClick: handleClick,\n    className: classes.launchLink,\n    \"aria-label\": i18n.t('Open visualization in new tab')\n  }, /*#__PURE__*/React.createElement(IconLaunch16, {\n    color: colors.grey700\n  }));\n};\nLaunchLink.propTypes = {\n  url: PropTypes.string\n};\nconst InsertButton = () => /*#__PURE__*/React.createElement(\"button\", {\n  className: classes.buttonInsert\n}, i18n.t('Insert'));\nconst ContentMenuItem = _ref2 => {\n  let {\n    type,\n    name,\n    onInsert,\n    url,\n    visType\n  } = _ref2;\n  const ItemIcon = getItemIcon(type);\n  let renderedItemIcon;\n  if (type === VISUALIZATION) {\n    const VisualizationIcon = visTypeIcons[visType];\n    renderedItemIcon = /*#__PURE__*/React.createElement(VisualizationIcon, {\n      color: colors.grey600\n    });\n  } else {\n    renderedItemIcon = /*#__PURE__*/React.createElement(ItemIcon, {\n      color: colors.grey600\n    });\n  }\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    ariaLabel: name,\n    onClick: onInsert,\n    icon: renderedItemIcon,\n    label: /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.menuItem\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.label\n    }, /*#__PURE__*/React.createElement(\"span\", null, name), url ? /*#__PURE__*/React.createElement(LaunchLink, {\n      url: url\n    }) : null), /*#__PURE__*/React.createElement(InsertButton, null)),\n    dataTest: `menu-item-${name}`\n  });\n};\nContentMenuItem.propTypes = {\n  name: PropTypes.string,\n  type: PropTypes.string,\n  url: PropTypes.string,\n  visType: PropTypes.string,\n  onInsert: PropTypes.func\n};\nexport default ContentMenuItem;","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"HeaderMenuItem_item__pKLLw\"};","import { MenuItem, colors } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './styles/HeaderMenuItem.module.css';\nconst HeaderMenuItem = _ref => {\n  let {\n    title\n  } = _ref;\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    ariaLabel: title,\n    className: classes.item,\n    dense: true,\n    key: title,\n    disabled: true,\n    label: /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        color: colors.grey800,\n        fontWeight: '600'\n      }\n    }, title)\n  });\n};\nHeaderMenuItem.propTypes = {\n  title: PropTypes.string.isRequired\n};\nexport default HeaderMenuItem;","import i18n from '@dhis2/d2-i18n';\nimport { VISUALIZATION, MAP, EVENT_CHART, EVENT_REPORT, EVENT_VISUALIZATION, REPORTS, RESOURCES, APP, MESSAGES, TEXT, SPACER } from '../../../modules/itemTypes.js';\nexport const singleItems = [{\n  id: 'additional',\n  header: i18n.t('Additional items'),\n  items: [{\n    type: TEXT,\n    name: i18n.t('Text box'),\n    content: ''\n  }, {\n    type: MESSAGES,\n    name: i18n.t('Messages'),\n    content: 'true'\n  }, {\n    type: SPACER,\n    name: i18n.t('Spacer'),\n    content: ''\n  }]\n}];\n\n// categorizedItems are grouped in the item selector menu\nexport const categorizedItems = [VISUALIZATION, MAP, EVENT_VISUALIZATION, EVENT_REPORT, EVENT_CHART, REPORTS, RESOURCES, APP];\n\n// listItemTypes are included in a single dashboard item\nexport const listItemTypes = [REPORTS, RESOURCES];","// extracted by mini-css-extract-plugin\nexport default {\"showMoreButton\":\"CategorizedMenuGroup_showMoreButton__yi5EB\"};","import { useConfig } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { MenuItem, Divider } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { tSetDashboardItems } from '../../../actions/editDashboard.js';\nimport { getItemUrl, APP, VISUALIZATION } from '../../../modules/itemTypes.js';\nimport { tAddListItemContent } from './actions.js';\nimport ContentMenuItem from './ContentMenuItem.js';\nimport HeaderMenuItem from './HeaderMenuItem.js';\nimport { categorizedItems, listItemTypes } from './selectableItems.js';\nimport classes from './styles/CategorizedMenuGroup.module.css';\nconst CategorizedMenuGroup = _ref => {\n  let {\n    type,\n    title,\n    items,\n    hasMore,\n    onAddItem,\n    tAddListItemContent,\n    onChangeItemsLimit\n  } = _ref;\n  const {\n    baseUrl\n  } = useConfig();\n  const [seeMore, setSeeMore] = useState(false);\n  const addItem = item => () => {\n    if (type === APP) {\n      // acAddDashboardItem({ type, content: item.key })\n      onAddItem({\n        type,\n        content: item.key\n      });\n    } else {\n      const newItem = {\n        id: item.id,\n        name: item.displayName || item.name\n      };\n      if (listItemTypes.includes(type)) {\n        tAddListItemContent(type, newItem);\n      } else {\n        onAddItem({\n          type,\n          content: newItem\n        });\n      }\n    }\n  };\n  const toggleSeeMore = () => {\n    setSeeMore(!seeMore);\n    onChangeItemsLimit(type);\n  };\n  const showFewerMoreLabel = seeMore ? i18n.t('Show fewer') : i18n.t('Show more');\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(HeaderMenuItem, {\n    title: title\n  }), items.map(item => {\n    const itemUrl = getItemUrl(type, item, baseUrl);\n    return /*#__PURE__*/React.createElement(ContentMenuItem, {\n      key: item.id || item.key,\n      type: type,\n      visType: type === VISUALIZATION ? item.type : type,\n      name: item.displayName || item.name,\n      onInsert: addItem(item),\n      url: itemUrl\n    });\n  }), hasMore ? /*#__PURE__*/React.createElement(MenuItem, {\n    ariaLabel: showFewerMoreLabel,\n    dense: true,\n    key: `showmore${title}`,\n    onClick: toggleSeeMore,\n    label: /*#__PURE__*/React.createElement(\"button\", {\n      className: classes.showMoreButton\n    }, showFewerMoreLabel)\n  }) : null, /*#__PURE__*/React.createElement(Divider, {\n    margin: \"8px 0px\"\n  }));\n};\nCategorizedMenuGroup.propTypes = {\n  items: PropTypes.array.isRequired,\n  title: PropTypes.string.isRequired,\n  type: PropTypes.oneOf(categorizedItems).isRequired,\n  onAddItem: PropTypes.func.isRequired,\n  onChangeItemsLimit: PropTypes.func.isRequired,\n  hasMore: PropTypes.bool,\n  tAddListItemContent: PropTypes.func\n};\nexport default connect(null, {\n  tAddListItemContent,\n  onAddItem: item => dispatch => {\n    dispatch(tSetDashboardItems(item));\n  }\n})(CategorizedMenuGroup);","import {\n// acAddDashboardItem,\nacUpdateDashboardItem, tSetDashboardItems } from '../../../actions/editDashboard.js';\nimport { itemTypeMap } from '../../../modules/itemTypes.js';\nimport { sGetEditDashboardRoot } from '../../../reducers/editDashboard.js';\nexport const tAddListItemContent = (type, content) => (dispatch, getState) => {\n  const state = getState();\n  const listItemType = itemTypeMap[type].propName;\n  const dashboardItems = sGetEditDashboardRoot(state).dashboardItems;\n  const dashboardItemIndex = dashboardItems.findIndex(item => item.type === type);\n  let dashboardItem;\n\n  // Reports/Resources/Users dashboard item type already present in dashboard\n  if (dashboardItemIndex > -1) {\n    dashboardItem = dashboardItems[dashboardItemIndex];\n    dashboardItem[listItemType].push(content);\n    dispatch(acUpdateDashboardItem(dashboardItem));\n  } else {\n    dashboardItem = {\n      type: type,\n      content: [content]\n    };\n\n    // dispatch(acAddDashboardItem(dashboardItem))\n    dispatch(tSetDashboardItems(dashboardItem));\n  }\n};","// extracted by mini-css-extract-plugin\nexport default {\"label\":\"ItemSearchField_label__WXI6m\"};","import { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Input, Tooltip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './styles/ItemSearchField.module.css';\nconst ItemSearchField = props => {\n  const {\n    isConnected: online\n  } = useDhis2ConnectionStatus();\n  const getInput = () =>\n  /*#__PURE__*/\n  // autoComplete not supported in ui@6, remove this form after upgrade\n  React.createElement(\"form\", {\n    autoComplete: \"off\",\n    onSubmit: Function.prototype\n  }, /*#__PURE__*/React.createElement(Input, {\n    name: \"Dashboard item search\",\n    label: i18n.t('Search for items to add to this dashboard'),\n    type: \"text\",\n    onChange: props.onChange,\n    onFocus: props.onFocus,\n    value: props.value,\n    dataTest: \"item-search\",\n    dense: true,\n    disabled: !online,\n    placeholder: i18n.t('Search for visualizations, reports and more')\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.label\n  }, \"Search for items to add to this dashboard\"), online ? getInput() : /*#__PURE__*/React.createElement(Tooltip, {\n    content: i18n.t('Cannot search for dashboard items while offline'),\n    openDelay: 200,\n    closeDelay: 100\n  }, getInput()));\n};\nItemSearchField.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n  onFocus: PropTypes.func\n};\nexport default ItemSearchField;","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { tSetDashboardItems } from '../../../actions/editDashboard.js';\nimport ContentMenuItem from './ContentMenuItem.js';\nimport HeaderMenuItem from './HeaderMenuItem.js';\nconst SinglesMenuGroup = _ref => {\n  let {\n    onAddItem,\n    category\n  } = _ref;\n  const addToDashboard = _ref2 => {\n    let {\n      type,\n      content\n    } = _ref2;\n    return () => {\n      onAddItem({\n        type,\n        content\n      });\n    };\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(HeaderMenuItem, {\n    title: category.header\n  }), category.items.map(item => /*#__PURE__*/React.createElement(ContentMenuItem, {\n    key: item.type,\n    type: item.type,\n    name: item.name,\n    onInsert: addToDashboard(item)\n  })));\n};\nSinglesMenuGroup.propTypes = {\n  category: PropTypes.object,\n  onAddItem: PropTypes.func\n};\nexport default connect(null, {\n  onAddItem: item => dispatch => {\n    dispatch(tSetDashboardItems(item));\n  }\n})(SinglesMenuGroup);","// extracted by mini-css-extract-plugin\nexport default {\"menu\":\"ItemSelector_menu__QMMZq\",\"popover\":\"ItemSelector_popover__H-Rqb\"};","import { useDataQuery } from '@dhis2/app-runtime';\nimport { Layer, Popper, FlyoutMenu } from '@dhis2/ui';\nimport React, { useState, useEffect, createRef } from 'react';\nimport { itemTypeMap, getDefaultItemCount } from '../../../modules/itemTypes.js';\nimport useDebounce from '../../../modules/useDebounce.js';\nimport CategorizedMenuGroup from './CategorizedMenuGroup.js';\nimport ItemSearchField from './ItemSearchField.js';\nimport { singleItems, categorizedItems } from './selectableItems.js';\nimport SinglesMenuGroup from './SinglesMenuGroup.js';\nimport classes from './styles/ItemSelector.module.css';\nconst dashboardSearchQuery = {\n  items: {\n    resource: 'dashboards/search',\n    params: _ref => {\n      let {\n        searchTerm = '',\n        count = 11,\n        maxItems = []\n      } = _ref;\n      return {\n        q: searchTerm,\n        count,\n        max: maxItems\n      };\n    }\n  }\n};\nconst ItemSelector = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [filter, setFilter] = useState('');\n  const [items, setItems] = useState(null);\n  const [maxOptions, setMaxOptions] = useState(new Set());\n  const debouncedFilterText = useDebounce(filter, 350);\n  const {\n    data,\n    refetch\n  } = useDataQuery(dashboardSearchQuery, {\n    lazy: true\n  });\n  useEffect(() => (data === null || data === void 0 ? void 0 : data.items) && setItems(data.items), [data]);\n  useEffect(() => {\n    refetch({\n      searchTerm: debouncedFilterText,\n      maxItems: Array.from(maxOptions)\n    });\n  }, [debouncedFilterText, maxOptions, refetch]);\n  const closeMenu = () => {\n    setIsOpen(false);\n    setFilter('');\n    setMaxOptions(new Set());\n  };\n  const openMenu = () => setIsOpen(true);\n  const getCategorizedMenuGroups = () => {\n    return categorizedItems.filter(type => {\n      const itemType = itemTypeMap[type];\n      return items && items[itemType.endPointName];\n    }).map(type => {\n      const itemType = itemTypeMap[type];\n      const itemCount = getDefaultItemCount(type);\n      const allItems = items[itemType.endPointName];\n      const hasMore = allItems.length > itemCount;\n      const displayItems = maxOptions.has(itemType.id) ? allItems : allItems.slice(0, itemCount);\n      return /*#__PURE__*/React.createElement(CategorizedMenuGroup, {\n        key: type,\n        type: type,\n        title: itemType.pluralTitle,\n        items: displayItems,\n        onChangeItemsLimit: updateMaxOptions,\n        hasMore: hasMore\n      });\n    });\n  };\n  const getSinglesMenuGroups = () => singleItems.map(category => /*#__PURE__*/React.createElement(SinglesMenuGroup, {\n    key: category.id,\n    category: category\n  }));\n  const getMenuGroups = () => getCategorizedMenuGroups().concat(getSinglesMenuGroups());\n  const updateMaxOptions = type => {\n    if (type) {\n      const options = new Set(maxOptions);\n      options.has(type) ? options.delete(type) : options.add(type);\n      setMaxOptions(options);\n    } else {\n      setMaxOptions(new Set());\n    }\n  };\n  const updateFilter = _ref2 => {\n    let {\n      value\n    } = _ref2;\n    return setFilter(value);\n  };\n  const inputRef = /*#__PURE__*/createRef();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"span\", {\n    ref: inputRef\n  }, /*#__PURE__*/React.createElement(ItemSearchField, {\n    value: filter,\n    onChange: updateFilter,\n    onFocus: openMenu\n  })), isOpen && /*#__PURE__*/React.createElement(Layer, {\n    onClick: closeMenu\n  }, /*#__PURE__*/React.createElement(Popper, {\n    reference: inputRef,\n    placement: \"bottom-start\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.popover\n  }, /*#__PURE__*/React.createElement(FlyoutMenu, {\n    className: classes.menu,\n    dataTest: \"item-menu\",\n    maxWidth: \"700px\"\n  }, getMenuGroups())))));\n};\nexport default ItemSelector;","// extracted by mini-css-extract-plugin\nexport default {\"option\":\"LayoutModal_option__iTwgs\",\"activeOption\":\"LayoutModal_activeOption__CZhe2\",\"radio\":\"LayoutModal_radio__ruJg9\",\"iconWrapper\":\"LayoutModal_iconWrapper__v1QYx\",\"activeIcon\":\"LayoutModal_activeIcon__pG34p\",\"title\":\"LayoutModal_title__a8J7t\",\"description\":\"LayoutModal_description__EsdC7\",\"columnOptions\":\"LayoutModal_columnOptions__VVjCR\",\"gap\":\"LayoutModal_gap__lETZN\"};","import { OfflineTooltip } from '@dhis2/analytics';\nimport { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip, Button, InputField, Radio } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { GRID_COLUMNS } from '../../modules/gridUtil.js';\nimport { LayoutFixedIcon } from './assets/LayoutFixed.js';\nimport { LayoutFreeflowIcon } from './assets/LayoutFreeflow.js';\nimport classes from './styles/LayoutModal.module.css';\nconst DEFAULT_COLUMNS = 3;\nconst isColumns = value => Boolean(value) || value === '';\nconst getColsSaveValue = value => value === '' ? DEFAULT_COLUMNS : parseInt(value, 10);\nexport const LayoutModal = _ref => {\n  let {\n    columns,\n    onSaveLayout,\n    onClose\n  } = _ref;\n  const {\n    isDisconnected: offline\n  } = useDhis2ConnectionStatus();\n  const [cols, setCols] = useState(columns);\n  useEffect(() => setCols(columns), []);\n  const setColsWrapper = value => {\n    const parsedValue = parseInt(value, 10);\n\n    // handle values like \".2\"\n    if (isNaN(parsedValue) && value !== '') {\n      setCols(1);\n      return;\n    }\n    if (parsedValue < 1) {\n      setCols(1);\n      return;\n    }\n    if (parsedValue > GRID_COLUMNS) {\n      setCols(GRID_COLUMNS);\n      return;\n    }\n    setCols(value);\n  };\n  return /*#__PURE__*/React.createElement(Modal, {\n    large: true,\n    onClose: onClose\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, i18n.t('Dashboard layout')), /*#__PURE__*/React.createElement(ModalContent, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.option, {\n      [classes.activeOption]: !isColumns(cols)\n    }),\n    onClick: () => setCols(0)\n  }, /*#__PURE__*/React.createElement(Radio, {\n    onChange: () => setCols(0),\n    checked: cols === 0,\n    className: classes.radio\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.iconWrapper, {\n      [classes.activeIcon]: !isColumns(cols)\n    })\n  }, /*#__PURE__*/React.createElement(LayoutFreeflowIcon, null)), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: classes.title\n  }, i18n.t('Freeflow')), /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.description\n  }, i18n.t('Dashboard items can be placed anywhere, at any size.')))), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.option, {\n      [classes.activeOption]: isColumns(cols)\n    }),\n    onClick: () => {\n      if (cols === 0) {\n        setCols(DEFAULT_COLUMNS);\n      }\n    }\n  }, /*#__PURE__*/React.createElement(Radio, {\n    onChange: () => {\n      if (cols === 0) {\n        setCols(DEFAULT_COLUMNS);\n      }\n    },\n    checked: isColumns(cols),\n    className: classes.radio\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.iconWrapper, {\n      [classes.activeIcon]: isColumns(cols)\n    })\n  }, /*#__PURE__*/React.createElement(LayoutFixedIcon, null)), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", {\n    className: classes.title\n  }, i18n.t('Fixed columns')), /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.description\n  }, i18n.t('Dashboard items are automatically placed within fixed, horizontal columns. The number of columns can be adjusted.')), isColumns(cols) && /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.columnOptions\n  }, /*#__PURE__*/React.createElement(InputField, {\n    inputWidth: \"100px\",\n    dense: true,\n    type: \"number\",\n    min: \"1\",\n    max: String(GRID_COLUMNS),\n    placeholder: String(DEFAULT_COLUMNS),\n    label: i18n.t('Number of columns'),\n    className: classes.columns,\n    value: String(cols),\n    onChange: _ref2 => {\n      let {\n        value\n      } = _ref2;\n      return setColsWrapper(value);\n    }\n  }))))), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, {\n    end: true\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: onClose\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(OfflineTooltip, null, /*#__PURE__*/React.createElement(Button, {\n    disabled: offline,\n    primary: true,\n    onClick: () => {\n      onSaveLayout(getColsSaveValue(cols));\n      onClose();\n    }\n  }, i18n.t('Save layout'))))));\n};\nLayoutModal.propTypes = {\n  columns: PropTypes.number,\n  onClose: PropTypes.func,\n  onSaveLayout: PropTypes.func\n};","// extracted by mini-css-extract-plugin\nexport default {\"inputWrapper\":\"TitleBar_inputWrapper__OgfSI\",\"inputFieldWrapper\":\"TitleBar_inputFieldWrapper__YPkHD\",\"searchContainer\":\"TitleBar_searchContainer__cJupj\",\"searchWrapper\":\"TitleBar_searchWrapper__3mjEr\",\"layoutWrapper\":\"TitleBar_layoutWrapper__2MwlV\",\"positionWrapper\":\"TitleBar_positionWrapper__iLQNh\",\"label\":\"TitleBar_label__gxBRX\",\"layoutValue\":\"TitleBar_layoutValue__fYFUJ\",\"layoutOption\":\"TitleBar_layoutOption__HA7at\",\"positionOptions\":\"TitleBar_positionOptions__IxoSQ\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { OfflineTooltip } from '@dhis2/analytics';\nimport { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { InputField, TextAreaField, Radio, Button } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { acSetDashboardTitle, acSetDashboardDescription, acSetLayoutColumns, tSetDashboardItems, acSetItemConfigInsertPosition, acSetDashboardCode } from '../../actions/editDashboard.js';\nimport { orObject } from '../../modules/util.js';\nimport { sGetEditDashboardRoot, sGetItemConfigInsertPosition, sGetLayoutColumns } from '../../reducers/editDashboard.js';\nimport { LayoutFixedIcon } from './assets/LayoutFixed.js';\nimport { LayoutFreeflowIcon } from './assets/LayoutFreeflow.js';\nimport ItemSelector from './ItemSelector/ItemSelector.js';\nimport { LayoutModal } from './LayoutModal.js';\nimport classes from './styles/TitleBar.module.css';\nconst EditTitleBar = _ref => {\n  let {\n    insertPosition,\n    columns,\n    description,\n    name,\n    code,\n    onChangeCode,\n    onChangeInsertPosition,\n    onChangeTitle,\n    onChangeDescription,\n    onSaveLayout\n  } = _ref;\n  const {\n    isDisconnected: offline\n  } = useDhis2ConnectionStatus();\n  const updateTitle = (_, e) => {\n    onChangeTitle(e.target.value);\n  };\n  const updateCode = (_, e) => {\n    onChangeCode(e.target.value);\n  };\n  const updateDescription = (_, e) => {\n    onChangeDescription(e.target.value);\n  };\n  const [showLayoutModal, setShowLayoutModal] = useState(false);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.inputWrapper\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.inputFieldWrapper\n  }, /*#__PURE__*/React.createElement(InputField, {\n    name: \"Dashboard title input\",\n    label: i18n.t('Dashboard title'),\n    type: \"text\",\n    onChange: updateTitle,\n    value: name,\n    placeholder: i18n.t('Untitled dashboard'),\n    dataTest: \"dashboard-title-input\",\n    dense: true\n  }), /*#__PURE__*/React.createElement(InputField, _extends({\n    name: \"Dashboard code input\",\n    label: i18n.t('Dashboard code'),\n    type: \"text\",\n    onChange: updateCode,\n    value: code,\n    dataTest: \"dashboard-code-input\",\n    dense: true\n  }, code.length > 50 && {\n    error: true,\n    validationText: i18n.t(\"Code can't be longer than 50 characters\")\n  }))), /*#__PURE__*/React.createElement(TextAreaField, {\n    name: \"Dashboard description input\",\n    label: i18n.t('Dashboard description'),\n    onChange: updateDescription,\n    value: description,\n    dataTest: \"dashboard-description-input\",\n    rows: 5,\n    dense: true\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.searchContainer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.layoutWrapper\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.label\n  }, i18n.t('Layout')), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.layoutOption\n  }, columns.length ? /*#__PURE__*/React.createElement(LayoutFixedIcon, null) : /*#__PURE__*/React.createElement(LayoutFreeflowIcon, null), /*#__PURE__*/React.createElement(\"span\", {\n    className: classes.layoutValue\n  }, columns.length ? i18n.t('{{count}} columns', {\n    count: columns.length,\n    defaultValue: '{{count}} column',\n    defaultValue_plural: '{{count}} columns'\n  }) : i18n.t('Freeflow')), /*#__PURE__*/React.createElement(OfflineTooltip, null, /*#__PURE__*/React.createElement(Button, {\n    disabled: offline,\n    small: true,\n    onClick: () => setShowLayoutModal(true)\n  }, i18n.t('Change layout'))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.positionWrapper\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: classes.label\n  }, i18n.t('Add new items to')), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.positionOptions\n  }, /*#__PURE__*/React.createElement(Radio, {\n    dense: true,\n    label: i18n.t('End of dashboard'),\n    name: \"END\",\n    onChange: value => value.checked && onChangeInsertPosition(value.name),\n    checked: insertPosition === 'END'\n  }), /*#__PURE__*/React.createElement(Radio, {\n    dense: true,\n    label: i18n.t('Start of dashboard'),\n    name: \"START\",\n    onChange: value => value.checked && onChangeInsertPosition(value.name),\n    checked: insertPosition === 'START'\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.searchWrapper\n  }, /*#__PURE__*/React.createElement(ItemSelector, null))), showLayoutModal && /*#__PURE__*/React.createElement(LayoutModal, {\n    onClose: () => setShowLayoutModal(false),\n    columns: columns.length,\n    onSaveLayout: onSaveLayout\n  }));\n};\nEditTitleBar.propTypes = {\n  onChangeCode: PropTypes.func.isRequired,\n  onChangeDescription: PropTypes.func.isRequired,\n  onChangeInsertPosition: PropTypes.func.isRequired,\n  onChangeTitle: PropTypes.func.isRequired,\n  onSaveLayout: PropTypes.func.isRequired,\n  code: PropTypes.string,\n  columns: PropTypes.array,\n  description: PropTypes.string,\n  insertPosition: PropTypes.string,\n  name: PropTypes.string\n};\nEditTitleBar.defaultProps = {\n  name: '',\n  code: '',\n  description: '',\n  insertPosition: 'END'\n};\nconst mapStateToProps = state => {\n  const selectedDashboard = orObject(sGetEditDashboardRoot(state));\n  return {\n    name: selectedDashboard.name,\n    code: selectedDashboard.code,\n    columns: sGetLayoutColumns(state),\n    description: selectedDashboard.description,\n    insertPosition: sGetItemConfigInsertPosition(state)\n  };\n};\nconst mapDispatchToProps = {\n  onChangeCode: acSetDashboardCode,\n  onChangeTitle: acSetDashboardTitle,\n  onChangeDescription: acSetDashboardDescription,\n  onChangeInsertPosition: acSetItemConfigInsertPosition,\n  onSaveLayout: columns => dispatch => {\n    dispatch(acSetLayoutColumns([...Array(columns).keys()].map(i => ({\n      index: i\n    }))));\n    dispatch(tSetDashboardItems());\n  }\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(EditTitleBar);","import { useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Layer, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { acSetEditDashboard } from '../../actions/editDashboard.js';\nimport { apiFetchDashboard } from '../../api/fetchDashboard.js';\nimport DashboardContainer from '../../components/DashboardContainer.js';\nimport NoContentMessage from '../../components/NoContentMessage.js';\nimport Notice from '../../components/Notice.js';\nimport { useWindowDimensions } from '../../components/WindowDimensionsProvider.js';\nimport { EDIT } from '../../modules/dashboardModes.js';\nimport { setHeaderbarVisible } from '../../modules/setHeaderbarVisible.js';\nimport { isSmallScreen } from '../../modules/smallScreen.js';\nimport { sGetIsPrintPreviewView } from '../../reducers/editDashboard.js';\nimport LayoutPrintPreview from '../print/PrintLayoutDashboard.js';\nimport ActionsBar from './ActionsBar.js';\nimport ItemGrid from './ItemGrid.js';\nimport classes from './styles/EditDashboard.module.css';\nimport TitleBar from './TitleBar.js';\nconst EditDashboard = props => {\n  const dataEngine = useDataEngine();\n  const {\n    width\n  } = useWindowDimensions();\n  const [redirectUrl, setRedirectUrl] = useState(null);\n  const [hasUpdateAccess, setHasUpdateAccess] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  useEffect(() => {\n    const loadDashboard = async () => {\n      try {\n        var _dashboard$access;\n        const dashboard = await apiFetchDashboard(dataEngine, props.id, {\n          mode: EDIT\n        });\n        props.setEditDashboard(dashboard);\n        setHasUpdateAccess(((_dashboard$access = dashboard.access) === null || _dashboard$access === void 0 ? void 0 : _dashboard$access.update) || false);\n        setIsLoading(false);\n      } catch (error) {\n        setRedirectUrl(props.id ? `/${props.id}` : '/');\n        setIsLoading(false);\n      }\n    };\n    if (isSmallScreen(width)) {\n      setRedirectUrl(props.id ? `/${props.id}` : '/');\n      return;\n    }\n    setHeaderbarVisible(true);\n    loadDashboard();\n  }, [props.id]);\n  if (redirectUrl) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: redirectUrl\n    });\n  }\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(Layer, {\n      translucent: true\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n  const renderGrid = () => {\n    if (props.isPrintPreviewView) {\n      return /*#__PURE__*/React.createElement(LayoutPrintPreview, {\n        fromEdit: true\n      });\n    }\n    return /*#__PURE__*/React.createElement(DashboardContainer, null, /*#__PURE__*/React.createElement(TitleBar, null), /*#__PURE__*/React.createElement(ItemGrid, null));\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.container, 'dashboard-scroll-container'),\n    \"data-test\": \"outer-scroll-container\"\n  }, /*#__PURE__*/React.createElement(ActionsBar, null), hasUpdateAccess ? renderGrid() : /*#__PURE__*/React.createElement(NoContentMessage, {\n    text: i18n.t('No access')\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.notice\n  }, /*#__PURE__*/React.createElement(Notice, {\n    title: i18n.t('Not supported'),\n    message: i18n.t('Editing dashboards on small screens is not supported. Resize your screen to return to edit mode.')\n  })));\n};\nEditDashboard.propTypes = {\n  id: PropTypes.string,\n  isPrintPreviewView: PropTypes.bool,\n  setEditDashboard: PropTypes.func\n};\nconst mapStateToProps = (state, ownProps) => {\n  var _ownProps$match, _ownProps$match$param;\n  return {\n    id: ((_ownProps$match = ownProps.match) === null || _ownProps$match === void 0 ? void 0 : (_ownProps$match$param = _ownProps$match.params) === null || _ownProps$match$param === void 0 ? void 0 : _ownProps$match$param.dashboardId) || null,\n    isPrintPreviewView: sGetIsPrintPreviewView(state)\n  };\n};\nexport default connect(mapStateToProps, {\n  setEditDashboard: acSetEditDashboard\n})(EditDashboard);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"NewDashboard_container__JUvh0\",\"notice\":\"NewDashboard_notice__3IKYC\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { connect, useDispatch } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { acSetEditNewDashboard } from '../../actions/editDashboard.js';\nimport { acClearSelected } from '../../actions/selected.js';\nimport DashboardContainer from '../../components/DashboardContainer.js';\nimport Notice from '../../components/Notice.js';\nimport { useWindowDimensions } from '../../components/WindowDimensionsProvider.js';\nimport { setHeaderbarVisible } from '../../modules/setHeaderbarVisible.js';\nimport { isSmallScreen } from '../../modules/smallScreen.js';\nimport { sGetIsPrintPreviewView } from '../../reducers/editDashboard.js';\nimport LayoutPrintPreview from '../print/PrintLayoutDashboard.js';\nimport ActionsBar from './ActionsBar.js';\nimport ItemGrid from './ItemGrid.js';\nimport classes from './styles/NewDashboard.module.css';\nimport TitleBar from './TitleBar.js';\nconst NewDashboard = props => {\n  const dispatch = useDispatch();\n  const {\n    width\n  } = useWindowDimensions();\n  const [redirectUrl, setRedirectUrl] = useState(null);\n  useEffect(() => {\n    if (isSmallScreen(width)) {\n      setRedirectUrl('/');\n      return;\n    }\n    setHeaderbarVisible(true);\n    dispatch(acSetEditNewDashboard());\n    dispatch(acClearSelected());\n  }, []);\n  if (redirectUrl) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: redirectUrl\n    });\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.container, 'dashboard-scroll-container')\n  }, /*#__PURE__*/React.createElement(ActionsBar, null), props.isPrintPreviewView ? /*#__PURE__*/React.createElement(LayoutPrintPreview, {\n    fromEdit: true\n  }) : /*#__PURE__*/React.createElement(DashboardContainer, null, /*#__PURE__*/React.createElement(TitleBar, null), /*#__PURE__*/React.createElement(ItemGrid, null))), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.notice\n  }, /*#__PURE__*/React.createElement(Notice, {\n    title: i18n.t('Not supported'),\n    message: i18n.t('Editing dashboards on small screens is not supported. Resize your screen to return to edit mode.')\n  })));\n};\nNewDashboard.propTypes = {\n  isPrintPreviewView: PropTypes.bool\n};\nconst mapStateToProps = state => ({\n  isPrintPreviewView: sGetIsPrintPreviewView(state)\n});\nexport default connect(mapStateToProps)(NewDashboard);","import cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { Item } from '../../components/Item/Item.js';\nimport { PRINT } from '../../modules/dashboardModes.js';\nimport { getFirstOfTypes } from '../../modules/getFirstOfType.js';\nimport { getGridItemDomElementClassName } from '../../modules/getGridItemDomElementClassName.js';\nimport { hasShape } from '../../modules/gridUtil.js';\nimport { orArray } from '../../modules/util.js';\nimport { sGetPrintDashboardItems } from '../../reducers/printDashboard.js';\nimport StaticGrid from './StaticGrid.js';\nconst PrintItemGrid = _ref => {\n  let {\n    dashboardItems\n  } = _ref;\n  const firstOfTypes = getFirstOfTypes(dashboardItems);\n  const getItemComponent = item => {\n    if (firstOfTypes.includes(item.id)) {\n      item.firstOfType = true;\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: item.i,\n      className: cx(item.type, 'print', 'oipp', getGridItemDomElementClassName(item.id))\n    }, /*#__PURE__*/React.createElement(Item, {\n      item: item,\n      dashboardMode: PRINT\n    }));\n  };\n  const getItemComponents = items => items.map(item => getItemComponent(item));\n  return /*#__PURE__*/React.createElement(StaticGrid, {\n    className: \"print\",\n    layout: dashboardItems\n  }, getItemComponents(dashboardItems));\n};\nPrintItemGrid.propTypes = {\n  dashboardItems: PropTypes.array\n};\nconst mapStateToProps = state => {\n  return {\n    dashboardItems: orArray(sGetPrintDashboardItems(state)).filter(hasShape)\n  };\n};\nexport default connect(mapStateToProps)(PrintItemGrid);","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"PrintDashboard_container__naa55\",\"wrapper\":\"PrintDashboard_wrapper__Ajaqh\",\"pageOuter\":\"PrintDashboard_pageOuter__DAFPC\"};","import { useDataEngine } from '@dhis2/app-runtime';\nimport { Layer, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport sortBy from 'lodash/sortBy.js';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\nimport { acSetPrintDashboard, acAddPrintDashboardItem, acRemovePrintDashboardItem, acUpdatePrintDashboardItem } from '../../actions/printDashboard.js';\nimport { apiFetchDashboard } from '../../api/fetchDashboard.js';\nimport { VIEW } from '../../modules/dashboardModes.js';\nimport { MAX_ITEM_GRID_HEIGHT_OIPP, MAX_ITEM_GRID_WIDTH_OIPP } from '../../modules/gridUtil.js';\nimport { PAGEBREAK, PRINT_TITLE_PAGE, SPACER } from '../../modules/itemTypes.js';\nimport { setHeaderbarVisible } from '../../modules/setHeaderbarVisible.js';\nimport PrintActionsBar from './ActionsBar.js';\nimport PrintInfo from './PrintInfo.js';\nimport PrintItemGrid from './PrintItemGrid.js';\nimport classes from './styles/PrintDashboard.module.css';\nimport './styles/print.css';\nimport './styles/print-oipp.css';\nconst PrintDashboard = _ref => {\n  var _match$params;\n  let {\n    match,\n    setPrintDashboard,\n    addDashboardItem,\n    updateDashboardItem,\n    removeDashboardItem\n  } = _ref;\n  const dataEngine = useDataEngine();\n  const [redirectUrl, setRedirectUrl] = useState(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const id = (match === null || match === void 0 ? void 0 : (_match$params = match.params) === null || _match$params === void 0 ? void 0 : _match$params.dashboardId) || null;\n  useEffect(() => {\n    const loadDashboard = async () => {\n      try {\n        const dashboard = await apiFetchDashboard(dataEngine, id, {\n          mode: VIEW\n        });\n        //sort the items by Y pos so they print in order of top to bottom\n        const sortedItems = sortBy(dashboard.dashboardItems, ['y', 'x']);\n        setPrintDashboard(Object.assign({}, dashboard, {\n          dashboardItems: sortedItems\n        }));\n\n        // remove spacers - don't want empty pages\n        let spacerCount = 0;\n        sortedItems.forEach(item => {\n          if (item.type === SPACER) {\n            spacerCount += 1;\n            removeDashboardItem(item.id);\n          }\n        });\n\n        // Resize the items to the full page size\n        sortedItems.forEach(item => {\n          updateDashboardItem(Object.assign({}, item, {\n            w: MAX_ITEM_GRID_WIDTH_OIPP,\n            h: MAX_ITEM_GRID_HEIGHT_OIPP\n          }));\n        });\n\n        // insert page breaks into the document flow to create the \"pages\"\n        // when previewing the print\n        for (let i = 0; i < (sortedItems.length - spacerCount) * 2; i += 2) {\n          addDashboardItem({\n            type: PAGEBREAK,\n            position: i,\n            isStatic: false\n          });\n        }\n        addDashboardItem({\n          type: PRINT_TITLE_PAGE,\n          isOneItemPerPage: true\n        });\n        setIsLoading(false);\n      } catch (error) {\n        setRedirectUrl(id ? `/${id}` : '/');\n        setIsLoading(false);\n      }\n    };\n    setHeaderbarVisible(false);\n    loadDashboard();\n  }, [id]);\n  if (redirectUrl) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: redirectUrl\n    });\n  }\n  if (isLoading) {\n    return /*#__PURE__*/React.createElement(Layer, {\n      translucent: true\n    }, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(PrintActionsBar, {\n    id: id\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.wrapper\n  }, /*#__PURE__*/React.createElement(PrintInfo, {\n    isLayout: false\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.pageOuter,\n    \"data-test\": \"print-oipp-page\"\n  }, /*#__PURE__*/React.createElement(PrintItemGrid, null))));\n};\nPrintDashboard.propTypes = {\n  addDashboardItem: PropTypes.func,\n  match: PropTypes.object,\n  removeDashboardItem: PropTypes.func,\n  setPrintDashboard: PropTypes.func,\n  updateDashboardItem: PropTypes.func\n};\nexport default connect(null, {\n  setPrintDashboard: acSetPrintDashboard,\n  addDashboardItem: acAddPrintDashboardItem,\n  removeDashboardItem: acRemovePrintDashboardItem,\n  updateDashboardItem: acUpdatePrintDashboardItem\n})(PrintDashboard);","import _JSXStyle from \"styled-jsx/style\";\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\n/* eslint-disable react/no-unknown-property */\nexport function ArrowDown(_ref) {\n  let {\n    className\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 12 12\",\n    className: \"jsx-3147403297\" + \" \" + (className || \"\")\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m5.29289 8.7071c.39053.3905 1.02369.3905 1.41422 0l2.99999-2.99999c.3905-.39053.3905-1.02369 0-1.41422-.3905-.39052-1.0237-.39052-1.4142 0l-2.2929 2.2929-2.29289-2.2929c-.39053-.39052-1.02369-.39052-1.41422 0-.39052.39053-.39052 1.02369 0 1.41422z\",\n    className: \"jsx-3147403297\"\n  }), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3147403297\"\n  }, [\"svg.jsx-3147403297{fill:inherit;-webkit-block-size:12px;-ms-flex-block-size:12px;block-size:12px;inline-size:12px;vertical-align:middle;pointer-events:none;}\"]));\n}\nArrowDown.propTypes = {\n  className: PropTypes.string\n};\nexport function ArrowUp(_ref2) {\n  let {\n    className\n  } = _ref2;\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 12 12\",\n    className: \"jsx-3147403297\" + \" \" + (className || \"\")\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    d: \"m5.29289 8.7071c.39053.3905 1.02369.3905 1.41422 0l2.99999-2.99999c.3905-.39053.3905-1.02369 0-1.41422-.3905-.39052-1.0237-.39052-1.4142 0l-2.2929 2.2929-2.29289-2.2929c-.39053-.39052-1.02369-.39052-1.41422 0-.39052.39053-.39052 1.02369 0 1.41422z\",\n    transform: \"matrix(1 0 0 -1 0 12.999974)\",\n    className: \"jsx-3147403297\"\n  }), /*#__PURE__*/React.createElement(_JSXStyle, {\n    id: \"3147403297\"\n  }, [\"svg.jsx-3147403297{fill:inherit;-webkit-block-size:12px;-ms-flex-block-size:12px;block-size:12px;inline-size:12px;vertical-align:middle;pointer-events:none;}\"]));\n}\nArrowUp.propTypes = {\n  className: PropTypes.string\n};\n\n/* eslint-enable react/no-unknown-property */","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"DropdownButton_container__8cWz8\",\"arrow\":\"DropdownButton_arrow__vcs3x\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { OfflineTooltip } from '@dhis2/analytics';\nimport { Button, Layer, Popper } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useRef } from 'react';\nimport { ArrowDown, ArrowUp } from './assets/Arrow.js';\nimport styles from './DropdownButton.module.css';\nconst DropdownButton = _ref => {\n  let {\n    children,\n    open,\n    onClick,\n    disabledWhenOffline,\n    component,\n    ...rest\n  } = _ref;\n  const anchorRef = useRef();\n  const ArrowIconComponent = open ? ArrowUp : ArrowDown;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    ref: anchorRef,\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(OfflineTooltip, {\n    disabledWhenOffline: disabledWhenOffline\n  }, /*#__PURE__*/React.createElement(Button, _extends({\n    onClick: onClick,\n    type: \"button\"\n  }, rest), children, /*#__PURE__*/React.createElement(ArrowIconComponent, {\n    className: styles.arrow\n  }))), open && /*#__PURE__*/React.createElement(Layer, {\n    onClick: onClick,\n    transparent: true\n  }, /*#__PURE__*/React.createElement(Popper, {\n    placement: \"bottom-start\",\n    reference: anchorRef\n  }, component)));\n};\nDropdownButton.propTypes = {\n  children: PropTypes.node.isRequired,\n  component: PropTypes.element.isRequired,\n  open: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n  disabledWhenOffline: PropTypes.bool\n};\nexport default DropdownButton;","import { PeriodDimension, DynamicDimension, OrgUnitDimension, DIMENSION_ID_PERIOD, DIMENSION_ID_ORGUNIT, DAILY, WEEKLY, WEEKLYWED, WEEKLYTHU, WEEKLYSAT, WEEKLYSUN, BIWEEKLY, MONTHLY, BIMONTHLY, useCachedDataQuery } from '@dhis2/analytics';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, Modal, ModalTitle, ModalContent, ModalActions, ButtonStrip } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { acAddItemFilter, acRemoveItemFilter } from '../../../actions/itemFilters.js';\nimport { sGetItemFiltersRoot } from '../../../reducers/itemFilters.js';\nimport { useSystemSettings } from '../../SystemSettingsProvider.js';\nimport { useUserSettings } from '../../UserSettingsProvider.js';\nconst FilterDialog = _ref => {\n  let {\n    dimension,\n    initiallySelectedItems,\n    addItemFilter,\n    removeItemFilter,\n    onClose\n  } = _ref;\n  const [filters, setFilters] = useState(initiallySelectedItems);\n  const {\n    userSettings\n  } = useUserSettings();\n  const {\n    systemSettings\n  } = useSystemSettings();\n  const {\n    rootOrgUnits\n  } = useCachedDataQuery();\n  const onSelectItems = _ref2 => {\n    let {\n      dimensionId,\n      items\n    } = _ref2;\n    setFilters({\n      [dimensionId]: items\n    });\n  };\n  const saveFilter = () => {\n    const id = dimension.id;\n    const filterItems = filters[id];\n    if (filterItems && filterItems.length) {\n      addItemFilter({\n        id,\n        value: [...filterItems]\n      });\n    } else {\n      removeItemFilter(id);\n    }\n    onClose(id);\n  };\n  const getExcludedPeriodTypes = function () {\n    let systemSettings = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    const types = [];\n    if (systemSettings['hideDailyPeriods']) {\n      types.push(DAILY);\n    }\n    if (systemSettings['hideWeeklyPeriods']) {\n      types.push(WEEKLY, WEEKLYWED, WEEKLYTHU, WEEKLYSAT, WEEKLYSUN);\n    }\n    if (systemSettings['hideBiWeeklyPeriods']) {\n      types.push(BIWEEKLY);\n    }\n    if (systemSettings['hideMonthlyPeriods']) {\n      types.push(MONTHLY);\n    }\n    if (systemSettings['hideBiMonthlyPeriods']) {\n      types.push(BIMONTHLY);\n    }\n    return types;\n  };\n  const renderDialogContent = () => {\n    const selectedItems = filters[dimension.id] || [];\n    switch (dimension.id) {\n      case DIMENSION_ID_PERIOD:\n        {\n          return /*#__PURE__*/React.createElement(PeriodDimension, {\n            selectedPeriods: selectedItems,\n            onSelect: onSelectItems,\n            excludedPeriodTypes: getExcludedPeriodTypes(systemSettings)\n          });\n        }\n      case DIMENSION_ID_ORGUNIT:\n        return /*#__PURE__*/React.createElement(OrgUnitDimension, {\n          roots: rootOrgUnits.map(rootOrgUnit => rootOrgUnit.id),\n          selected: selectedItems,\n          onSelect: onSelectItems,\n          displayNameProp: userSettings.displayProperty\n        });\n      default:\n        return /*#__PURE__*/React.createElement(DynamicDimension, {\n          selectedItems: selectedItems,\n          dimensionId: dimension.id,\n          onSelect: onSelectItems,\n          dimensionTitle: dimension.name,\n          displayNameProp: userSettings.displayProperty\n        });\n    }\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, dimension.id && /*#__PURE__*/React.createElement(Modal, {\n    dataTest: \"dimension-modal\",\n    onClose: onClose,\n    position: \"top\",\n    large: true\n  }, /*#__PURE__*/React.createElement(ModalTitle, null, dimension.name), /*#__PURE__*/React.createElement(ModalContent, null, renderDialogContent()), /*#__PURE__*/React.createElement(ModalActions, null, /*#__PURE__*/React.createElement(ButtonStrip, null, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    onClick: onClose\n  }, i18n.t('Cancel')), /*#__PURE__*/React.createElement(Button, {\n    primary: true,\n    onClick: saveFilter\n  }, i18n.t('Confirm'))))));\n};\nFilterDialog.propTypes = {\n  addItemFilter: PropTypes.func,\n  dimension: PropTypes.object,\n  initiallySelectedItems: PropTypes.object,\n  removeItemFilter: PropTypes.func,\n  onClose: PropTypes.func\n};\nconst mapStateToProps = state => ({\n  initiallySelectedItems: sGetItemFiltersRoot(state)\n});\nexport default connect(mapStateToProps, {\n  addItemFilter: acAddItemFilter,\n  removeItemFilter: acRemoveItemFilter\n})(FilterDialog);","import { DimensionsPanel } from '@dhis2/analytics';\nimport { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Card, colors, IconFilter24 } from '@dhis2/ui';\nimport isEmpty from 'lodash/isEmpty.js';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { acClearActiveModalDimension, acSetActiveModalDimension } from '../../../actions/activeModalDimension.js';\nimport useDimensions from '../../../modules/useDimensions.js';\nimport { sGetActiveModalDimension } from '../../../reducers/activeModalDimension.js';\nimport { sGetItemFiltersRoot } from '../../../reducers/itemFilters.js';\nimport DropdownButton from '../../DropdownButton/DropdownButton.js';\nimport FilterDialog from './FilterDialog.js';\nconst FilterSelector = props => {\n  var _props$allowedFilters;\n  const [filterDialogIsOpen, setFilterDialogIsOpen] = useState(false);\n  const dimensions = useDimensions(filterDialogIsOpen);\n  const {\n    isDisconnected: offline\n  } = useDhis2ConnectionStatus();\n  const toggleFilterDialogIsOpen = () => setFilterDialogIsOpen(!filterDialogIsOpen);\n  const onCloseDialog = () => {\n    setFilterDialogIsOpen(false);\n    props.clearActiveModalDimension();\n  };\n  const selectDimension = id => {\n    props.setActiveModalDimension(dimensions.find(dimension => dimension.id === id));\n  };\n  const filterDimensions = () => {\n    if (!props.restrictFilters) {\n      return dimensions;\n    } else {\n      return dimensions.filter(d => [...props.allowedFilters].includes(d.id));\n    }\n  };\n  const getFilterSelector = () => /*#__PURE__*/React.createElement(Card, {\n    dataTest: \"dashboard-filter-popover\"\n  }, /*#__PURE__*/React.createElement(DimensionsPanel, {\n    style: {\n      width: '320px'\n    },\n    dimensions: filterDimensions(),\n    onDimensionClick: selectDimension,\n    selectedIds: Object.keys(props.initiallySelectedItems)\n  }));\n  return props.restrictFilters && !((_props$allowedFilters = props.allowedFilters) !== null && _props$allowedFilters !== void 0 && _props$allowedFilters.length) ? null : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DropdownButton, {\n    secondary: true,\n    small: true,\n    open: filterDialogIsOpen,\n    disabled: offline,\n    onClick: toggleFilterDialogIsOpen,\n    icon: /*#__PURE__*/React.createElement(IconFilter24, {\n      color: colors.grey700\n    }),\n    component: getFilterSelector()\n  }, i18n.t('Filter')), !isEmpty(props.dimension) ? /*#__PURE__*/React.createElement(FilterDialog, {\n    dimension: props.dimension,\n    onClose: onCloseDialog\n  }) : null);\n};\nconst mapStateToProps = state => ({\n  dimension: sGetActiveModalDimension(state),\n  initiallySelectedItems: sGetItemFiltersRoot(state)\n});\nFilterSelector.propTypes = {\n  allowedFilters: PropTypes.array,\n  clearActiveModalDimension: PropTypes.func,\n  dimension: PropTypes.object,\n  initiallySelectedItems: PropTypes.object,\n  restrictFilters: PropTypes.bool,\n  setActiveModalDimension: PropTypes.func\n};\nexport default connect(mapStateToProps, {\n  clearActiveModalDimension: acClearActiveModalDimension,\n  setActiveModalDimension: acSetActiveModalDimension\n})(FilterSelector);","// extracted by mini-css-extract-plugin\nexport default {\"actions\":\"ActionsBar_actions__R8zo5\",\"hideOnSmallScreen\":\"ActionsBar_hideOnSmallScreen__9fnGb\"};","import { OfflineTooltip } from '@dhis2/analytics';\nimport { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Button, FlyoutMenu, colors, IconMore16, SharingDialog } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { useHistory, Redirect } from 'react-router-dom';\nimport { acClearItemFilters } from '../../../actions/itemFilters.js';\nimport { acSetShowDescription } from '../../../actions/showDescription.js';\nimport { acSetSlideshow } from '../../../actions/slideshow.js';\nimport { apiPostShowDescription } from '../../../api/description.js';\nimport ConfirmActionDialog from '../../../components/ConfirmActionDialog.js';\nimport DropdownButton from '../../../components/DropdownButton/DropdownButton.js';\nimport MenuItem from '../../../components/MenuItemWithTooltip.js';\nimport { useSystemSettings } from '../../../components/SystemSettingsProvider.js';\nimport { itemTypeSupportsFullscreen } from '../../../modules/itemTypes.js';\nimport { useCacheableSection } from '../../../modules/useCacheableSection.js';\nimport { orObject } from '../../../modules/util.js';\nimport { ROUTE_START_PATH } from '../../../pages/start/index.js';\nimport { sGetNamedItemFilters } from '../../../reducers/itemFilters.js';\nimport { sGetSelected } from '../../../reducers/selected.js';\nimport { sGetShowDescription } from '../../../reducers/showDescription.js';\nimport FilterSelector from './FilterSelector.js';\nimport classes from './styles/ActionsBar.module.css';\nconst ActionsBar = _ref => {\n  let {\n    id,\n    access,\n    showDescription,\n    starred,\n    setSlideshow,\n    toggleDashboardStarred,\n    showAlert,\n    updateShowDescription,\n    removeAllFilters,\n    restrictFilters,\n    allowedFilters,\n    filtersLength,\n    dashboardItems\n  } = _ref;\n  const history = useHistory();\n  const [moreOptionsIsOpen, setMoreOptionsIsOpen] = useState(false);\n  const [sharingDialogIsOpen, setSharingDialogIsOpen] = useState(false);\n  const [confirmCacheDialogIsOpen, setConfirmCacheDialogIsOpen] = useState(false);\n  const [redirectUrl, setRedirectUrl] = useState(null);\n  const {\n    isDisconnected: offline\n  } = useDhis2ConnectionStatus();\n  const {\n    lastUpdated,\n    isCached,\n    startRecording,\n    remove\n  } = useCacheableSection(id);\n  const {\n    allowVisFullscreen\n  } = useSystemSettings().systemSettings;\n  const onRecordError = useCallback(() => {\n    showAlert({\n      msg: i18n.t(\"The dashboard couldn't be made available offline. Try again.\"),\n      isCritical: true\n    });\n  }, [showAlert]);\n  const onCacheDashboardConfirmed = useCallback(() => {\n    setConfirmCacheDialogIsOpen(false);\n    removeAllFilters();\n    startRecording({\n      onError: onRecordError\n    });\n  }, [onRecordError, removeAllFilters, startRecording]);\n  const onRemoveFromOffline = useCallback(() => {\n    setMoreOptionsIsOpen(false);\n    lastUpdated && remove();\n  }, [lastUpdated, remove]);\n  const onAddToOffline = useCallback(() => {\n    setMoreOptionsIsOpen(false);\n    return filtersLength ? setConfirmCacheDialogIsOpen(true) : startRecording({\n      onError: onRecordError\n    });\n  }, [filtersLength, onRecordError, startRecording]);\n  const onToggleShowDescription = useCallback(() => {\n    updateShowDescription(!showDescription);\n    setMoreOptionsIsOpen(false);\n    !offline && apiPostShowDescription(!showDescription);\n  }, [offline, showDescription, updateShowDescription]);\n  const onToggleSharingDialog = useCallback(() => setSharingDialogIsOpen(!sharingDialogIsOpen), [sharingDialogIsOpen]);\n  const userAccess = orObject(access);\n  const hasSlideshowItems = dashboardItems === null || dashboardItems === void 0 ? void 0 : dashboardItems.some(i => itemTypeSupportsFullscreen(i.type) || false);\n  const getMoreMenu = () => /*#__PURE__*/React.createElement(FlyoutMenu, null, lastUpdated ? /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    disabledWhenOffline: false,\n    label: i18n.t('Remove from offline storage'),\n    onClick: onRemoveFromOffline\n  }) : /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    disabled: offline,\n    label: i18n.t('Make available offline'),\n    onClick: onAddToOffline\n  }), lastUpdated && /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    label: i18n.t('Sync offline data now'),\n    disabled: offline,\n    onClick: onAddToOffline\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    disabled: offline,\n    label: starred ? i18n.t('Unstar dashboard') : i18n.t('Star dashboard'),\n    onClick: toggleDashboardStarred\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    disabledWhenOffline: false,\n    label: showDescription ? i18n.t('Hide description') : i18n.t('Show description'),\n    onClick: onToggleShowDescription\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    disabled: offline && !isCached,\n    disabledWhenOffline: false,\n    label: i18n.t('Print'),\n    dataTest: \"print-menu-item\"\n  }, /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    disabled: offline && !isCached,\n    disabledWhenOffline: false,\n    label: i18n.t('Dashboard layout'),\n    onClick: () => setRedirectUrl(`${id}/printlayout`),\n    dataTest: \"print-layout-menu-item\"\n  }), /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    disabled: offline && !isCached,\n    disabledWhenOffline: false,\n    label: i18n.t('One item per page'),\n    onClick: () => setRedirectUrl(`${id}/printoipp`),\n    dataTest: \"print-oipp-menu-item\"\n  })), /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    disabledWhenOffline: false,\n    label: i18n.t('Close dashboard'),\n    onClick: () => history.push(ROUTE_START_PATH)\n  }));\n  if (redirectUrl) {\n    return /*#__PURE__*/React.createElement(Redirect, {\n      to: redirectUrl\n    });\n  }\n  const slideshowTooltipContent = !hasSlideshowItems ? i18n.t('No dashboard items to show in slideshow') : offline && !isCached ? i18n.t('Not available offline') : null;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.actions\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.hideOnSmallScreen\n  }, userAccess.update ? /*#__PURE__*/React.createElement(OfflineTooltip, null, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    small: true,\n    disabled: offline,\n    onClick: () => setRedirectUrl(`${id}/edit`)\n  }, i18n.t('Edit'))) : null, userAccess.manage ? /*#__PURE__*/React.createElement(OfflineTooltip, null, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    small: true,\n    disabled: offline,\n    onClick: onToggleSharingDialog\n  }, i18n.t('Share'))) : null, allowVisFullscreen ? /*#__PURE__*/React.createElement(OfflineTooltip, {\n    content: slideshowTooltipContent,\n    disabled: !!slideshowTooltipContent,\n    disabledWhenOffline: false\n  }, /*#__PURE__*/React.createElement(Button, {\n    secondary: true,\n    small: true,\n    disabled: !!slideshowTooltipContent,\n    className: classes.slideshowButton,\n    onClick: () => setSlideshow(0),\n    dataTest: \"enter-slideshow-button\"\n  }, i18n.t('Slideshow'))) : null, /*#__PURE__*/React.createElement(FilterSelector, {\n    allowedFilters: allowedFilters,\n    restrictFilters: restrictFilters\n  })), /*#__PURE__*/React.createElement(DropdownButton, {\n    dataTest: \"more-actions-button\",\n    className: classes.more,\n    secondary: true,\n    small: true,\n    open: moreOptionsIsOpen,\n    disabledWhenOffline: false,\n    onClick: () => setMoreOptionsIsOpen(!moreOptionsIsOpen),\n    icon: /*#__PURE__*/React.createElement(IconMore16, {\n      color: colors.grey700\n    }),\n    component: getMoreMenu()\n  }, /*#__PURE__*/React.createElement(\"wbr\", null))), id && sharingDialogIsOpen && /*#__PURE__*/React.createElement(SharingDialog, {\n    id: id,\n    type: \"dashboard\",\n    onClose: onToggleSharingDialog\n  }), /*#__PURE__*/React.createElement(ConfirmActionDialog, {\n    title: i18n.t('Clear dashboard filters?'),\n    message: i18n.t(\"A dashboard's filters cant be saved offline. Do you want to remove the filters and make this dashboard available offline?\"),\n    cancelLabel: i18n.t('No, cancel'),\n    confirmLabel: i18n.t('Yes, clear filters and sync'),\n    onConfirm: onCacheDashboardConfirmed,\n    onCancel: () => setConfirmCacheDialogIsOpen(false),\n    open: confirmCacheDialogIsOpen\n  }));\n};\nActionsBar.propTypes = {\n  access: PropTypes.object,\n  allowedFilters: PropTypes.array,\n  dashboardItems: PropTypes.array,\n  filtersLength: PropTypes.number,\n  id: PropTypes.string,\n  removeAllFilters: PropTypes.func,\n  restrictFilters: PropTypes.bool,\n  setSlideshow: PropTypes.func,\n  showAlert: PropTypes.func,\n  showDescription: PropTypes.bool,\n  starred: PropTypes.bool,\n  toggleDashboardStarred: PropTypes.func,\n  updateShowDescription: PropTypes.func\n};\nconst mapStateToProps = state => {\n  const dashboard = sGetSelected(state);\n  return {\n    ...dashboard,\n    filtersLength: sGetNamedItemFilters(state).length,\n    showDescription: sGetShowDescription(state)\n  };\n};\nexport default connect(mapStateToProps, {\n  setSlideshow: acSetSlideshow,\n  removeAllFilters: acClearItemFilters,\n  updateShowDescription: acSetShowDescription\n})(ActionsBar);","import i18n from '@dhis2/d2-i18n';\nimport { Tag, Tooltip } from '@dhis2/ui';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { useWindowDimensions } from '../../../components/WindowDimensionsProvider.js';\nimport { useCacheableSection } from '../../../modules/useCacheableSection.js';\nconst LastUpdatedTag = _ref => {\n  let {\n    id\n  } = _ref;\n  const {\n    lastUpdated\n  } = useCacheableSection(id);\n  const {\n    width\n  } = useWindowDimensions();\n  if (!lastUpdated) {\n    return null;\n  }\n  const timeAgo = moment(lastUpdated).fromNow();\n  const message = width > 480 ? i18n.t('Offline data last updated {{timeAgo}}', {\n    timeAgo\n  }) : i18n.t('Synced {{timeAgo}}', {\n    timeAgo\n  });\n  return /*#__PURE__*/React.createElement(Tooltip, {\n    content: moment(lastUpdated).format('llll'),\n    openDelay: 200,\n    closeDelay: 100\n  }, props => /*#__PURE__*/React.createElement(\"div\", props, /*#__PURE__*/React.createElement(Tag, {\n    maxWidth: \"400px\"\n  }, message, \" \")));\n};\nLastUpdatedTag.propTypes = {\n  id: PropTypes.string\n};\nexport default LastUpdatedTag;","// extracted by mini-css-extract-plugin\nexport default {\"star\":\"StarDashboardButton_star__gD7oT\",\"iconWrap\":\"StarDashboardButton_iconWrap__552ir\"};","import { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { Tooltip, IconStar16, IconStarFilled16, colors } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport classes from './styles/StarDashboardButton.module.css';\nconst StarDashboardButton = _ref => {\n  let {\n    starred,\n    onClick\n  } = _ref;\n  const {\n    isConnected: online\n  } = useDhis2ConnectionStatus();\n  const StarIcon = starred ? IconStarFilled16 : IconStar16;\n  const handleOnClick = () => {\n    online && onClick();\n  };\n  let tooltipContent;\n  if (online) {\n    if (starred) {\n      tooltipContent = i18n.t('Unstar dashboard');\n    } else {\n      tooltipContent = i18n.t('Star dashboard');\n    }\n  } else {\n    if (starred) {\n      tooltipContent = i18n.t('Cannot unstar this dashboard while offline');\n    } else {\n      tooltipContent = i18n.t('Cannot star this dashboard while offline');\n    }\n  }\n  return /*#__PURE__*/React.createElement(Tooltip, {\n    content: tooltipContent\n  }, _ref2 => {\n    let {\n      onMouseOver,\n      onMouseOut,\n      onFocus,\n      onBlur,\n      ref\n    } = _ref2;\n    return /*#__PURE__*/React.createElement(\"button\", {\n      onMouseOver: onMouseOver,\n      onMouseOut: onMouseOut,\n      onFocus: onFocus.onFocus,\n      onBlur: onBlur.onBlur,\n      ref: ref,\n      \"data-test\": starred ? 'dashboard-starred' : 'dashboard-unstarred',\n      className: classes.star,\n      disabled: !online,\n      onClick: handleOnClick\n    }, /*#__PURE__*/React.createElement(StarIcon, {\n      color: colors.grey600\n    }));\n  });\n};\nStarDashboardButton.propTypes = {\n  starred: PropTypes.bool,\n  onClick: PropTypes.func\n};\nStarDashboardButton.defaultProps = {\n  onClick: Function.prototype\n};\nexport default StarDashboardButton;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"InformationBlock_container__QvrcG\",\"titleContainer\":\"InformationBlock_titleContainer__NHLur\",\"title\":\"InformationBlock_title__CE0MR\"};","import { useAlert, useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { connect } from 'react-redux';\nimport { acSetDashboardStarred } from '../../../actions/dashboards.js';\nimport { sGetDashboardStarred } from '../../../reducers/dashboards.js';\nimport { sGetSelected } from '../../../reducers/selected.js';\nimport ActionsBar from './ActionsBar.js';\nimport { apiStarDashboard } from './apiStarDashboard.js';\nimport LastUpdatedTag from './LastUpdatedTag.js';\nimport StarDashboardButton from './StarDashboardButton.js';\nimport classes from './styles/InformationBlock.module.css';\nconst InformationBlock = _ref => {\n  let {\n    id,\n    displayName,\n    starred,\n    setDashboardStarred\n  } = _ref;\n  const dataEngine = useDataEngine();\n  const {\n    show: showAlert\n  } = useAlert(_ref2 => {\n    let {\n      msg\n    } = _ref2;\n    return msg;\n  }, _ref3 => {\n    let {\n      isCritical\n    } = _ref3;\n    return isCritical ? {\n      critical: true\n    } : {\n      warning: true\n    };\n  });\n  const toggleDashboardStarred = useCallback(() => apiStarDashboard(dataEngine, id, !starred).then(() => {\n    setDashboardStarred(id, !starred);\n  }).catch(() => {\n    const msg = starred ? i18n.t('Failed to unstar the dashboard') : i18n.t('Failed to star the dashboard');\n    showAlert({\n      msg,\n      isCritical: false\n    });\n  }), [dataEngine, id, setDashboardStarred, showAlert, starred]);\n  if (!id) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.titleContainer,\n    \"data-test\": \"title-bar\"\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: classes.title,\n    \"data-test\": \"view-dashboard-title\"\n  }, displayName), /*#__PURE__*/React.createElement(StarDashboardButton, {\n    starred: starred,\n    onClick: toggleDashboardStarred\n  }), /*#__PURE__*/React.createElement(LastUpdatedTag, {\n    id: id\n  })), /*#__PURE__*/React.createElement(ActionsBar, {\n    toggleDashboardStarred: toggleDashboardStarred,\n    starred: starred,\n    showAlert: showAlert\n  }));\n};\nInformationBlock.propTypes = {\n  displayName: PropTypes.string,\n  id: PropTypes.string,\n  setDashboardStarred: PropTypes.func,\n  starred: PropTypes.bool\n};\nconst mapStateToProps = state => {\n  const dashboard = sGetSelected(state);\n  return {\n    displayName: dashboard.displayName,\n    id: dashboard.id,\n    starred: dashboard.id ? sGetDashboardStarred(state, dashboard.id) : false\n  };\n};\nexport default connect(mapStateToProps, {\n  setDashboardStarred: acSetDashboardStarred\n})(InformationBlock);","const getStarDashboardMutation = id => ({\n  type: 'create',\n  resource: `dashboards/${id}/favorite`\n});\nconst getUnstarDashboardMutation = id => ({\n  type: 'delete',\n  resource: `dashboards/${id}/favorite`\n});\nexport const apiStarDashboard = (dataEngine, id, isStarred) => {\n  const mutation = isStarred ? getStarDashboardMutation(id) : getUnstarDashboardMutation(id);\n  return dataEngine.mutate(mutation);\n};","import React from 'react';\nexport const IconNavigation = () => /*#__PURE__*/React.createElement(\"svg\", {\n  width: \"16\",\n  height: \"16\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M2.667 4h10.666M2.667 8h10.666M2.667 12h10.666\",\n  stroke: \"#0D47A1\",\n  strokeLinecap: \"round\",\n  strokeLinejoin: \"round\"\n}));","import React from 'react';\nexport const IconOfflineSaved = () => /*#__PURE__*/React.createElement(\"svg\", {\n  height: \"16\",\n  viewBox: \"0 0 16 16\",\n  width: \"16\",\n  xmlns: \"http://www.w3.org/2000/svg\",\n  \"data-test\": \"dashboard-saved-offline\"\n}, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"m4.5 7v1h-1.5v6h10v-6h-1.5v-1h1.5c.5522847 0 1 .44771525 1 1v6c0 .5522847-.4477153 1-1 1h-10c-.55228475 0-1-.4477153-1-1v-6c0-.55228475.44771525-1 1-1zm5 3v1h-3v-1zm2.1130214-9.31661889.7739572.63323779-4.84985989 5.92760659-3.3906721-3.3906721.70710678-.70710678 2.60944661 2.60955339z\",\n  fill: \"currentColor\",\n  fillRule: \"evenodd\"\n}));","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"NavigationMenuItem_container__8tarn\",\"displayName\":\"NavigationMenuItem_displayName__hOBUL\",\"selectedItem\":\"NavigationMenuItem_selectedItem__hlt7N\"};","import { useDataEngine, useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport { IconStarFilled16, MenuItem, colors } from '@dhis2/ui';\nimport debounce from 'lodash/debounce.js';\nimport PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { apiPostDataStatistics } from '../../../api/dataStatistics.js';\nimport { useCacheableSection } from '../../../modules/useCacheableSection.js';\nimport { sGetSelectedId } from '../../../reducers/selected.js';\nimport { IconOfflineSaved } from '../../IconOfflineSaved.js';\nimport styles from './styles/NavigationMenuItem.module.css';\nexport const NavigationMenuItem = _ref => {\n  let {\n    close,\n    displayName,\n    id,\n    starred,\n    tabIndex\n  } = _ref;\n  const history = useHistory();\n  const {\n    lastUpdated\n  } = useCacheableSection(id);\n  const {\n    isConnected\n  } = useDhis2ConnectionStatus();\n  const engine = useDataEngine();\n  const selectedId = useSelector(sGetSelectedId);\n  const handleClick = useCallback(() => {\n    const debouncedPostStatistics = debounce(() => apiPostDataStatistics('DASHBOARD_VIEW', id, engine), 500);\n    history.push(`/${id}`);\n    close();\n    if (isConnected) {\n      debouncedPostStatistics();\n    }\n  }, [close, engine, history, id, isConnected]);\n  return /*#__PURE__*/React.createElement(MenuItem, {\n    dense: true,\n    tabIndex: tabIndex,\n    onClick: handleClick,\n    key: id,\n    label: /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.container\n    }, starred && /*#__PURE__*/React.createElement(IconStarFilled16, {\n      dataTest: \"starred-dashboard\",\n      color: colors.grey500\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: styles.displayName\n    }, displayName), !!lastUpdated && /*#__PURE__*/React.createElement(IconOfflineSaved, null)),\n    ariaLabel: displayName,\n    className: id === selectedId ? styles.selectedItem : undefined\n  });\n};\nNavigationMenuItem.propTypes = {\n  close: PropTypes.func.isRequired,\n  displayName: PropTypes.string.isRequired,\n  id: PropTypes.string.isRequired,\n  starred: PropTypes.bool,\n  tabIndex: PropTypes.number\n};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"NavigationMenu_container__vjhmI\",\"filterWrap\":\"NavigationMenu_filterWrap__90hkH\",\"scrollbox\":\"NavigationMenu_scrollbox__uCLCI\",\"noItems\":\"NavigationMenu_noItems__vIC53\",\"noDashboardsAvailable\":\"NavigationMenu_noDashboardsAvailable__b5XtV\"};","import i18n from '@dhis2/d2-i18n';\nimport { Input, Menu } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useMemo, useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { acSetDashboardsFilter } from '../../../actions/dashboardsFilter.js';\nimport { sGetDashboardsSortedByStarred } from '../../../reducers/dashboards.js';\nimport { sGetDashboardsFilter } from '../../../reducers/dashboardsFilter.js';\nimport { NavigationMenuItem } from './NavigationMenuItem.js';\nimport styles from './styles/NavigationMenu.module.css';\nimport itemStyles from './styles/NavigationMenuItem.module.css';\nexport const NavigationMenu = _ref => {\n  let {\n    close\n  } = _ref;\n  const dispatch = useDispatch();\n  const scrollBoxRef = useRef(null);\n  const dashboards = useSelector(sGetDashboardsSortedByStarred);\n  const filterText = useSelector(sGetDashboardsFilter);\n  const onFilterChange = useCallback(_ref2 => {\n    let {\n      value\n    } = _ref2;\n    dispatch(acSetDashboardsFilter(value));\n  }, [dispatch]);\n  const filteredDashboards = useMemo(() => dashboards.filter(dashboard => !filterText || dashboard.displayName.toLowerCase().includes(filterText.toLowerCase())), [filterText, dashboards]);\n  useEffect(() => {\n    var _scrollBoxRef$current, _scrollBoxRef$current2, _scrollBoxRef$current3;\n    (_scrollBoxRef$current = scrollBoxRef.current) === null || _scrollBoxRef$current === void 0 ? void 0 : (_scrollBoxRef$current2 = _scrollBoxRef$current.getElementsByClassName(itemStyles.selectedItem)) === null || _scrollBoxRef$current2 === void 0 ? void 0 : (_scrollBoxRef$current3 = _scrollBoxRef$current2.item(0)) === null || _scrollBoxRef$current3 === void 0 ? void 0 : _scrollBoxRef$current3.scrollIntoView({\n      behavior: 'smooth',\n      block: 'end',\n      inline: 'nearest'\n    });\n  }, []);\n  if (dashboards.length === 0) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: cx(styles.container, styles.noDashboardsAvailable)\n    }, /*#__PURE__*/React.createElement(\"p\", null, i18n.t('No dashboards available.')), /*#__PURE__*/React.createElement(\"p\", null, i18n.t('Create a new dashboard using the + button.')));\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterWrap\n  }, /*#__PURE__*/React.createElement(Input, {\n    dense: true,\n    type: \"search\",\n    placeholder: i18n.t('Search for a dashboard'),\n    value: filterText,\n    onChange: onFilterChange,\n    initialFocus: true\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    ref: scrollBoxRef,\n    className: styles.scrollbox\n  }, /*#__PURE__*/React.createElement(Menu, {\n    dense: true\n  }, filteredDashboards.length === 0 ? /*#__PURE__*/React.createElement(\"li\", {\n    role: \"listitem\",\n    className: styles.noItems\n  }, i18n.t('No dashboards found')) : filteredDashboards.map(_ref3 => {\n    let {\n      displayName,\n      id,\n      starred\n    } = _ref3;\n    return /*#__PURE__*/React.createElement(NavigationMenuItem, {\n      displayName: displayName,\n      id: id,\n      starred: starred,\n      key: id,\n      close: close\n    });\n  }))));\n};\nNavigationMenu.propTypes = {\n  close: PropTypes.func.isRequired\n};","import { SET_DASHBOARDS_FILTER, CLEAR_DASHBOARDS_FILTER } from '../reducers/dashboardsFilter.js';\n\n// actions\n\nexport const acSetDashboardsFilter = value => ({\n  type: SET_DASHBOARDS_FILTER,\n  value\n});\nexport const acClearDashboardsFilter = () => ({\n  type: CLEAR_DASHBOARDS_FILTER\n});","// extracted by mini-css-extract-plugin\nexport default {\"toolbar\":\"DashboardsBar_toolbar__ajY1z\",\"blockCreationNavigation\":\"DashboardsBar_blockCreationNavigation__xoYzP\",\"createDashboardButton\":\"DashboardsBar_createDashboardButton__TrUMx\",\"navMenuButtonText\":\"DashboardsBar_navMenuButtonText__IRaO8\"};","import { DashboardsBar } from './DashboardsBar.js';\nexport default DashboardsBar;","import i18n from '@dhis2/d2-i18n';\nimport { Button, IconAdd16, DropdownButton } from '@dhis2/ui';\nimport React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport InformationBlock from './InformationBlock/InformationBlock.js';\nimport { IconNavigation, NavigationMenu } from './NavigationMenu/index.js';\nimport styles from './styles/DashboardsBar.module.css';\nexport const DashboardsBar = () => {\n  const history = useHistory();\n  const [navigationMenuOpen, setNavigationMenuOpen] = useState(false);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.toolbar,\n    \"data-test\": \"title-bar\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.blockCreationNavigation\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => history.push('/new'),\n    secondary: true,\n    small: true,\n    icon: /*#__PURE__*/React.createElement(IconAdd16, null),\n    className: styles.createDashboardButton,\n    dataTest: \"new-button\"\n  }), /*#__PURE__*/React.createElement(DropdownButton, {\n    dataTest: \"dashboards-nav-menu-button\",\n    icon: /*#__PURE__*/React.createElement(IconNavigation, null),\n    secondary: true,\n    small: true,\n    onClick: () => setNavigationMenuOpen(open => !open),\n    open: navigationMenuOpen,\n    component: /*#__PURE__*/React.createElement(NavigationMenu, {\n      close: () => setNavigationMenuOpen(false)\n    })\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.navMenuButtonText\n  }, i18n.t('Dashboards')))), /*#__PURE__*/React.createElement(InformationBlock, null));\n};","// extracted by mini-css-extract-plugin\nexport default {\"dashboard\":\"DashboardLink_dashboard__A8ZI1\",\"icon\":\"DashboardLink_icon__hHYEc\",\"adornment\":\"DashboardLink_adornment__eYYkV\"};","import { IconDashboardWindow16, colors } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { IconOfflineSaved } from '../../components/IconOfflineSaved.js';\nimport { useCacheableSection } from '../../modules/useCacheableSection.js';\nimport styles from './styles/DashboardLink.module.css';\nconst DashboardLink = _ref => {\n  let {\n    id,\n    name\n  } = _ref;\n  const {\n    isCached\n  } = useCacheableSection(id);\n  return /*#__PURE__*/React.createElement(Link, {\n    className: styles.dashboard,\n    to: `/${id}`\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.icon\n  }, /*#__PURE__*/React.createElement(IconDashboardWindow16, {\n    color: colors.grey600\n  })), /*#__PURE__*/React.createElement(\"span\", null, name), isCached && /*#__PURE__*/React.createElement(IconOfflineSaved, {\n    className: styles.adornment\n  }));\n};\nDashboardLink.propTypes = {\n  id: PropTypes.string,\n  name: PropTypes.string\n};\nexport default DashboardLink;","// extracted by mini-css-extract-plugin\nexport default {\"outer\":\"StartScreen_outer__DSeBX\",\"inner\":\"StartScreen_inner__+iIk1\",\"errorContainer\":\"StartScreen_errorContainer__mTg-n\",\"errorIcon\":\"StartScreen_errorIcon__9UoHL\",\"errorTitle\":\"StartScreen_errorTitle__4vHtH\",\"errorDescription\":\"StartScreen_errorDescription__RaWpI\",\"title\":\"StartScreen_title__Vxb74\",\"section\":\"StartScreen_section__Uolq9\",\"guide\":\"StartScreen_guide__Xbz9U\",\"guideItem\":\"StartScreen_guideItem__8HvB6\"};","import { useDataEngine, useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\nimport { apiGetDataStatistics } from '../../api/dataStatistics.js';\nimport DashboardLink from './DashboardLink.js';\nimport styles from './styles/StartScreen.module.css';\nconst StartScreen = _ref => {\n  let {\n    username\n  } = _ref;\n  const [mostViewedDashboards, setMostViewedDashboards] = useState([]);\n  const dataEngine = useDataEngine();\n  const {\n    isConnected: online\n  } = useDhis2ConnectionStatus();\n  useEffect(() => {\n    async function populateMostViewedDashboards(dataEngine) {\n      const mostViewedDashboardsResult = await apiGetDataStatistics(dataEngine, username);\n      const dashboards = mostViewedDashboardsResult.dashboard;\n      if (dashboards && dashboards.length) {\n        setMostViewedDashboards(dashboards);\n      }\n    }\n    populateMostViewedDashboards(dataEngine);\n  }, [username, online]);\n  const getContent = () => /*#__PURE__*/React.createElement(\"div\", {\n    \"data-test\": \"start-screen\"\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.title\n  }, i18n.t('Getting started')), /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.guide\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.guideItem\n  }, i18n.t('Search for and open saved dashboards from the top bar.')), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.guideItem\n  }, i18n.t('Click a dashboard chip to open it. Get back to this screen from the \"More\" menu.')), /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.guideItem\n  }, i18n.t('Create a new dashboard with the + button.')))), mostViewedDashboards.length > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.section\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: styles.title\n  }, i18n.t('Your most viewed dashboards')), mostViewedDashboards.map((dashboard, index) => /*#__PURE__*/React.createElement(\"p\", {\n    key: index\n  }, /*#__PURE__*/React.createElement(DashboardLink, dashboard)))));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.outer\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.inner\n  }, getContent()));\n};\nStartScreen.propTypes = {\n  username: PropTypes.string\n};\nexport default StartScreen;","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport DashboardsBar from '../../components/DashboardsBar/index.js';\nimport StartScreen from './StartScreen.js';\nconst LandingPage = _ref => {\n  let {\n    username,\n    onMount\n  } = _ref;\n  useEffect(() => {\n    onMount();\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DashboardsBar, null), /*#__PURE__*/React.createElement(StartScreen, {\n    username: username\n  }));\n};\nLandingPage.propTypes = {\n  username: PropTypes.string,\n  onMount: PropTypes.func\n};\nexport default LandingPage;","import LandingPage from './LandingPage.js';\nconst ROUTE_START_PATH = '/start';\nexport { LandingPage, ROUTE_START_PATH };","import { Layer, CenteredContent, CircularLoader } from '@dhis2/ui';\nimport React from 'react';\nconst LoadingMask = () => /*#__PURE__*/React.createElement(Layer, {\n  translucent: true\n}, /*#__PURE__*/React.createElement(CenteredContent, null, /*#__PURE__*/React.createElement(CircularLoader, null)));\nexport default LoadingMask;","export const REGISTER_PASSIVE_VIEW = 'REGISTER_PASSIVE_VIEW';\nexport default (function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  switch (action.type) {\n    case REGISTER_PASSIVE_VIEW:\n      {\n        return true;\n      }\n    default:\n      return state;\n  }\n});\nexport const sGetPassiveViewRegistered = state => state.passiveViewRegistered;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ViewDashboard_container__xz-WI\",\"cover\":\"ViewDashboard_cover__e2YFN\",\"link\":\"ViewDashboard_link__jzoBU\"};","// extracted by mini-css-extract-plugin\nexport default {\"description\":\"Description_description__FddGe\",\"empty\":\"Description_empty__pTmHO\"};","import i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { sGetSelectedDisplayDescription } from '../../reducers/selected.js';\nimport { sGetShowDescription } from '../../reducers/showDescription.js';\nimport classes from './styles/Description.module.css';\nexport const Description = () => {\n  const showDescription = useSelector(sGetShowDescription);\n  const description = useSelector(sGetSelectedDisplayDescription);\n  return showDescription ? /*#__PURE__*/React.createElement(\"p\", {\n    className: cx(classes.description, {\n      [classes.empty]: !description\n    }),\n    \"data-test\": \"dashboard-description\"\n  }, description || i18n.t('No description')) : null;\n};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"FilterBadge_container__C0RCa\",\"button\":\"FilterBadge_button__P4d+p\",\"filterButton\":\"FilterBadge_filterButton__F2cy3\",\"removeButton\":\"FilterBadge_removeButton__Kgyuu\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport { IconCross16, Tooltip } from '@dhis2/ui';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { acSetActiveModalDimension } from '../../../actions/activeModalDimension.js';\nimport { useWindowDimensions } from '../../../components/WindowDimensionsProvider.js';\nimport { sGetSelectedId } from '../../../reducers/selected.js';\nimport classes from './styles/FilterBadge.module.css';\nconst getFilterValuesText = values => values.length === 1 ? values[0].name : i18n.t('{{count}} selected', {\n  count: values.length,\n  defaultValue: '{{count}} selected',\n  defaultValue_plural: '{{count}} selected'\n});\nconst EditFilterButton = _ref => {\n  let {\n    tooltipContent,\n    filter,\n    openFilterModal\n  } = _ref;\n  const buttonText = `${filter.name}: ${getFilterValuesText(filter.values)}`;\n  if (!tooltipContent) {\n    return /*#__PURE__*/React.createElement(\"button\", {\n      \"data-test\": \"filter-badge-button\",\n      className: cx(classes.button, classes.filterButton),\n      onClick: () => openFilterModal({\n        id: filter.id,\n        name: filter.name\n      })\n    }, buttonText);\n  }\n  return /*#__PURE__*/React.createElement(Tooltip, {\n    content: tooltipContent,\n    openDelay: 200,\n    closeDelay: 100,\n    className: classes.tooltip\n  }, props => /*#__PURE__*/React.createElement(\"button\", _extends({\n    disabled: true,\n    \"data-test\": \"filter-badge-button\",\n    className: cx(classes.button, classes.filterButton)\n  }, props), buttonText));\n};\nEditFilterButton.propTypes = {\n  filter: PropTypes.object,\n  openFilterModal: PropTypes.func,\n  tooltipContent: PropTypes.string\n};\nconst FilterBadge = _ref2 => {\n  let {\n    filter,\n    openFilterModal,\n    onRemove\n  } = _ref2;\n  const {\n    isConnected\n  } = useDhis2ConnectionStatus();\n  const {\n    width\n  } = useWindowDimensions();\n  const isEditDisabled = !isConnected || width <= 480;\n  const tooltipContent = !isConnected ? i18n.t('Cannot edit filters while offline') : i18n.t('Cannot edit filters on a small screen');\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.container,\n    \"data-test\": \"dashboard-filter-badge\"\n  }, /*#__PURE__*/React.createElement(EditFilterButton, {\n    filter: filter,\n    openFilterModal: openFilterModal,\n    tooltipContent: isEditDisabled ? tooltipContent : null\n  }), isConnected && /*#__PURE__*/React.createElement(\"button\", {\n    \"data-test\": \"filter-badge-clear-button\",\n    className: cx(classes.button, classes.removeButton),\n    disabled: !isConnected,\n    onClick: () => onRemove(filter.id)\n  }, /*#__PURE__*/React.createElement(IconCross16, null)));\n};\nFilterBadge.propTypes = {\n  filter: PropTypes.object.isRequired,\n  openFilterModal: PropTypes.func.isRequired,\n  onRemove: PropTypes.func.isRequired\n};\nconst mapStateToProps = state => ({\n  dashboardId: sGetSelectedId(state)\n});\nexport default connect(mapStateToProps, {\n  openFilterModal: acSetActiveModalDimension\n})(FilterBadge);","// extracted by mini-css-extract-plugin\nexport default {\"bar\":\"FilterBar_bar__9bRI4\"};","import { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React, { useState } from 'react';\nimport { connect } from 'react-redux';\nimport { acRemoveItemFilter, acClearItemFilters } from '../../../actions/itemFilters.js';\nimport ConfirmActionDialog from '../../../components/ConfirmActionDialog.js';\nimport { sGetNamedItemFilters } from '../../../reducers/itemFilters.js';\nimport FilterBadge from './FilterBadge.js';\nimport classes from './styles/FilterBar.module.css';\nconst FilterBar = _ref => {\n  let {\n    filters,\n    removeFilter,\n    removeAllFilters\n  } = _ref;\n  const {\n    isConnected: online\n  } = useDhis2ConnectionStatus();\n  const [dialogIsOpen, setDialogIsOpen] = useState(false);\n  const onRemoveFilter = filterId => {\n    if (!online && filters.length > 1) {\n      setDialogIsOpen(true);\n    } else {\n      removeFilter(filterId);\n    }\n  };\n  const closeDialog = () => setDialogIsOpen(false);\n  return filters.length ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.bar\n  }, filters.map(filter => /*#__PURE__*/React.createElement(FilterBadge, {\n    key: filter.id,\n    filter: filter,\n    onRemove: onRemoveFilter\n  }))), /*#__PURE__*/React.createElement(ConfirmActionDialog, {\n    open: dialogIsOpen,\n    title: i18n.t('Removing filters while offline'),\n    message: i18n.t('Removing this filter while offline will remove all other filters. Do you want to remove all filters on this dashboard?'),\n    cancelLabel: i18n.t('No, cancel'),\n    confirmLabel: i18n.t('Yes, remove filters'),\n    onConfirm: removeAllFilters,\n    onCancel: closeDialog\n  })) : null;\n};\nFilterBar.propTypes = {\n  filters: PropTypes.array.isRequired,\n  removeAllFilters: PropTypes.func.isRequired,\n  removeFilter: PropTypes.func.isRequired\n};\nFilterBar.defaultProps = {\n  filters: []\n};\nconst mapStateToProps = state => ({\n  filters: sGetNamedItemFilters(state)\n});\nexport default connect(mapStateToProps, {\n  removeAllFilters: acClearItemFilters,\n  removeFilter: acRemoveItemFilter\n})(FilterBar);","// extracted by mini-css-extract-plugin\nexport default {\"filterButton\":\"SlideshowFiltersInfo_filterButton__gt31C\",\"singleFilterText\":\"SlideshowFiltersInfo_singleFilterText__9OD0m\",\"popover\":\"SlideshowFiltersInfo_popover__zd7GM\",\"filterSection\":\"SlideshowFiltersInfo_filterSection__y4B-G\",\"filterSectionHeader\":\"SlideshowFiltersInfo_filterSectionHeader__W3kbp\",\"filterSectionList\":\"SlideshowFiltersInfo_filterSectionList__z-oFJ\"};","import i18n from '@dhis2/d2-i18n';\nimport { Layer, Popper, IconFilter16 } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useMemo, useState, useRef } from 'react';\nimport { useSelector } from 'react-redux';\nimport { sGetNamedItemFilters } from '../../reducers/itemFilters.js';\nimport styles from './styles/SlideshowFiltersInfo.module.css';\nconst popperModifiers = [{\n  name: 'offset',\n  options: {\n    offset: [0, 8]\n  }\n}];\nconst FilterSection = _ref => {\n  let {\n    name,\n    values\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filterSection\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: styles.filterSectionHeader\n  }, name), /*#__PURE__*/React.createElement(\"ul\", {\n    className: styles.filterSectionList\n  }, values.map(value => /*#__PURE__*/React.createElement(\"li\", {\n    className: styles.filterSectionListItem,\n    key: value.name\n  }, value.name))));\n};\nFilterSection.propTypes = {\n  name: PropTypes.string,\n  values: PropTypes.arrayOf(PropTypes.shape({\n    name: PropTypes.string\n  }))\n};\nexport const SlideshowFiltersInfo = () => {\n  const [isOpen, setIsOpen] = useState(false);\n  const ref = useRef(null);\n  const filters = useSelector(sGetNamedItemFilters);\n  const totalFilterCount = useMemo(() => filters.reduce((total, filter) => total + filter.values.length, 0), [filters]);\n  if (filters.length === 0) {\n    return null;\n  }\n  let filterMessage = '';\n  let multipleFilters = true;\n  if (filters.length === 1 && filters[0].values.length === 1) {\n    multipleFilters = false;\n    filterMessage = i18n.t('{{name}}: {{filter}}', {\n      name: filters[0].name,\n      filter: filters[0].values[0].name,\n      nsSeparator: '>'\n    });\n  }\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !multipleFilters ? /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.singleFilterText\n  }, /*#__PURE__*/React.createElement(IconFilter16, null), filterMessage) : /*#__PURE__*/React.createElement(\"button\", {\n    ref: ref,\n    className: styles.filterButton,\n    onClick: () => setIsOpen(true)\n  }, /*#__PURE__*/React.createElement(IconFilter16, null), i18n.t('{{count}} filters active', {\n    count: totalFilterCount,\n    defaultValue: '{{count}} filter active',\n    defaultValue_plural: '{{count}} filters active'\n  })), isOpen && multipleFilters && /*#__PURE__*/React.createElement(Layer, {\n    disablePortal: true,\n    onClick: () => setIsOpen(false)\n  }, /*#__PURE__*/React.createElement(Popper, {\n    className: styles.popover,\n    reference: ref,\n    placement: \"top-end\",\n    modifiers: popperModifiers\n  }, filters.map(filter => /*#__PURE__*/React.createElement(FilterSection, {\n    key: filter.name,\n    name: filter.name,\n    values: filter.values\n  })))));\n};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"SlideshowControlbar_container__psbAa\",\"start\":\"SlideshowControlbar_start__8Exeu\",\"middle\":\"SlideshowControlbar_middle__R1Jn-\",\"end\":\"SlideshowControlbar_end__mgrnp\",\"squareButton\":\"SlideshowControlbar_squareButton__t466e\",\"controls\":\"SlideshowControlbar_controls__4XrU+\",\"pageCounter\":\"SlideshowControlbar_pageCounter__fruXY\"};","import i18n from '@dhis2/d2-i18n';\nimport { IconChevronRight24, IconChevronLeft24, IconCross24, colors } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { SlideshowFiltersInfo } from './SlideshowFiltersInfo.js';\nimport styles from './styles/SlideshowControlbar.module.css';\nconst SlideshowControlbar = _ref => {\n  let {\n    slideshowItemIndex,\n    exitSlideshow,\n    nextItem,\n    prevItem,\n    numItems\n  } = _ref;\n  const navigationDisabled = numItems === 1;\n  const NextArrow = document.dir === 'ltr' ? IconChevronRight24 : IconChevronLeft24;\n  const PrevArrow = document.dir === 'ltr' ? IconChevronLeft24 : IconChevronRight24;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.container\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.start\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.squareButton,\n    onClick: exitSlideshow,\n    \"aria-label\": i18n.t('Exit slideshow'),\n    \"data-test\": \"slideshow-exit-button\"\n  }, /*#__PURE__*/React.createElement(IconCross24, {\n    color: colors.white\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.middle\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.controls\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.squareButton,\n    disabled: navigationDisabled,\n    onClick: prevItem,\n    \"aria-label\": i18n.t('Previous item'),\n    \"data-test\": \"slideshow-prev-button\"\n  }, /*#__PURE__*/React.createElement(PrevArrow, {\n    color: navigationDisabled ? colors.grey600 : colors.white\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.pageCounter,\n    \"data-test\": \"slideshow-page-counter\",\n    dir: \"ltr\"\n  }, `${slideshowItemIndex + 1} / ${numItems}`), /*#__PURE__*/React.createElement(\"button\", {\n    className: styles.squareButton,\n    disabled: navigationDisabled,\n    onClick: nextItem,\n    \"aria-label\": i18n.t('Next item'),\n    \"data-test\": \"slideshow-next-button\"\n  }, /*#__PURE__*/React.createElement(NextArrow, {\n    color: navigationDisabled ? colors.grey600 : colors.white\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.end\n  }, /*#__PURE__*/React.createElement(SlideshowFiltersInfo, null)));\n};\nSlideshowControlbar.propTypes = {\n  exitSlideshow: PropTypes.func.isRequired,\n  nextItem: PropTypes.func.isRequired,\n  numItems: PropTypes.number.isRequired,\n  prevItem: PropTypes.func.isRequired,\n  slideshowItemIndex: PropTypes.number.isRequired\n};\nexport default SlideshowControlbar;","// extracted by mini-css-extract-plugin\nexport default {\"slideshowContainer\":\"ItemGrid_slideshowContainer__GDdSA\",\"grid\":\"ItemGrid_grid__VofUy\",\"slideshowGrid\":\"ItemGrid_slideshowGrid__3sRsU\",\"fullscreenItem\":\"ItemGrid_fullscreenItem__XG6Cd\",\"hiddenItem\":\"ItemGrid_hiddenItem__pDqM0\",\"enteringFullscreen\":\"ItemGrid_enteringFullscreen__IACDX\",\"displayedItem\":\"ItemGrid_displayedItem__PETrC\"};","import sortBy from 'lodash/sortBy.js';\nimport { useState, useEffect, useMemo, useCallback } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { acSetSlideshow } from '../../actions/slideshow.js';\nimport { itemTypeSupportsFullscreen } from '../../modules/itemTypes.js';\nimport { sGetSlideshow } from '../../reducers/slideshow.js';\nconst useSlideshow = (displayItems, slideshowElementRef) => {\n  const dispatch = useDispatch();\n  const firstItemIndex = useSelector(sGetSlideshow);\n  const [itemIndex, setItemIndex] = useState(null);\n  const [isEnteringSlideshow, setIsEnteringSlideshow] = useState(false);\n\n  // Sort items into order on dashboard\n  // and filter out items that don't support fullscreen\n  const sortedItems = useMemo(() => sortBy(displayItems, ['y', 'x']).filter(item => itemTypeSupportsFullscreen(item.type)), [displayItems]);\n\n  // Slideshow button or Item \"View fullscreen\" menu clicked\n  // Fullscreen Exit button or ESC key pressed\n  useEffect(() => {\n    if (Number.isInteger(firstItemIndex)) {\n      const el = slideshowElementRef === null || slideshowElementRef === void 0 ? void 0 : slideshowElementRef.current;\n      setIsEnteringSlideshow(true);\n      el === null || el === void 0 ? void 0 : el.requestFullscreen({\n        navigationUI: 'show'\n      }).then(() => {\n        setItemIndex(firstItemIndex);\n      });\n    } else {\n      setItemIndex(null);\n    }\n  }, [firstItemIndex, slideshowElementRef]);\n\n  // Exit button clicked\n  const exitSlideshow = () => {\n    if (document.fullscreenElement) {\n      document.exitFullscreen();\n    }\n  };\n  const nextItem = useCallback(() => {\n    if (itemIndex === sortedItems.length - 1) {\n      setItemIndex(0);\n    } else {\n      setItemIndex(itemIndex + 1);\n    }\n  }, [itemIndex, sortedItems]);\n  const prevItem = useCallback(() => {\n    if (itemIndex === 0) {\n      setItemIndex(sortedItems.length - 1);\n    } else {\n      setItemIndex(itemIndex - 1);\n    }\n  }, [itemIndex, sortedItems]);\n\n  // Handle keyboard navigation for the slideshow\n  useEffect(() => {\n    const handleKeyDown = event => {\n      if (document.fullscreenElement) {\n        if (event.key === 'ArrowRight') {\n          document.dir === 'ltr' ? nextItem() : prevItem();\n        } else if (event.key === 'ArrowLeft') {\n          document.dir === 'ltr' ? prevItem() : nextItem();\n        }\n      }\n    };\n    const handleFullscreenChange = () => {\n      if (!document.fullscreenElement) {\n        dispatch(acSetSlideshow(null));\n      } else {\n        setTimeout(() => {\n          setIsEnteringSlideshow(false);\n        }, 200);\n      }\n    };\n\n    // Attach the event listener to the window object\n    window.addEventListener('keydown', handleKeyDown);\n    document.addEventListener('fullscreenchange', handleFullscreenChange);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      document.removeEventListener('fullscreenchange', handleFullscreenChange);\n    };\n  }, [dispatch, nextItem, prevItem]);\n  return {\n    slideshowItemIndex: itemIndex,\n    slideshowElementRef,\n    exitSlideshow,\n    nextItem,\n    prevItem,\n    sortedItems,\n    isEnteringSlideshow\n  };\n};\nexport default useSlideshow;","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { useDhis2ConnectionStatus } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Responsive as ResponsiveReactGridLayout } from 'react-grid-layout';\nimport { useSelector } from 'react-redux';\nimport { useContainerWidth } from '../../components/DashboardContainer.js';\nimport { Item } from '../../components/Item/Item.js';\nimport NoContentMessage from '../../components/NoContentMessage.js';\nimport ProgressiveLoadingContainer from '../../components/ProgressiveLoadingContainer.js';\nimport { useWindowDimensions } from '../../components/WindowDimensionsProvider.js';\nimport { VIEW } from '../../modules/dashboardModes.js';\nimport { getFirstOfTypes } from '../../modules/getFirstOfType.js';\nimport { getGridItemDomElementClassName } from '../../modules/getGridItemDomElementClassName.js';\nimport { GRID_ROW_HEIGHT_PX, SM_SCREEN_GRID_COLUMNS, GRID_COMPACT_TYPE, GRID_PADDING_PX, MARGIN_PX, MARGIN_SM_PX, GRID_COLUMNS, getSmallLayout, getProportionalHeight } from '../../modules/gridUtil.js';\nimport { getBreakpoint, isSmallScreen } from '../../modules/smallScreen.js';\nimport { useCacheableSection } from '../../modules/useCacheableSection.js';\nimport { sGetSelectedId, sGetSelectedDashboardItems } from '../../reducers/selected.js';\nimport SlideshowControlbar from './SlideshowControlbar.js';\nimport classes from './styles/ItemGrid.module.css';\nimport useSlideshow from './useSlideshow.js';\nconst EXPANDED_HEIGHT = 19;\nconst EXPANDED_HEIGHT_SM = 15;\nconst ResponsiveItemGrid = _ref => {\n  let {\n    dashboardIsCached\n  } = _ref;\n  const dashboardId = useSelector(sGetSelectedId);\n  const dashboardItems = useSelector(sGetSelectedDashboardItems);\n  const {\n    width\n  } = useWindowDimensions();\n  const containerWidth = useContainerWidth();\n  const {\n    apps\n  } = useCachedDataQuery();\n  const [expandedItems, setExpandedItems] = useState({});\n  const [displayItems, setDisplayItems] = useState(dashboardItems);\n  const [layoutSm, setLayoutSm] = useState([]);\n  const [gridWidth, setGridWidth] = useState(0);\n  const [forceLoad, setForceLoad] = useState(false);\n  const {\n    recordingState\n  } = useCacheableSection(dashboardId);\n  const {\n    isDisconnected: isOffline\n  } = useDhis2ConnectionStatus();\n  const firstOfTypes = getFirstOfTypes(dashboardItems);\n  const slideshowElementRef = useRef(null);\n  const {\n    slideshowItemIndex,\n    sortedItems,\n    isEnteringSlideshow,\n    exitSlideshow,\n    nextItem,\n    prevItem\n  } = useSlideshow(displayItems, slideshowElementRef);\n  const isSlideshowView = slideshowItemIndex !== null;\n  useEffect(() => {\n    const getItemsWithAdjustedHeight = items => items.map(item => {\n      const expandedItem = expandedItems[item.id];\n      if (expandedItem && expandedItem === true) {\n        const expandedHeight = isSmallScreen(width) ? EXPANDED_HEIGHT_SM : EXPANDED_HEIGHT;\n        return Object.assign({}, item, {\n          h: item.h + expandedHeight,\n          smallOriginalH: getProportionalHeight(item, width)\n        });\n      }\n      return item;\n    });\n    setLayoutSm(getItemsWithAdjustedHeight(getSmallLayout(dashboardItems, width)));\n    setDisplayItems(getItemsWithAdjustedHeight(dashboardItems));\n  }, [expandedItems, width, dashboardItems]);\n  useEffect(() => {\n    if (recordingState === 'recording') {\n      setForceLoad(true);\n    }\n  }, [recordingState]);\n  const onToggleItemExpanded = clickedId => {\n    const isExpanded = typeof expandedItems[clickedId] === 'boolean' ? expandedItems[clickedId] : false;\n    const newExpandedItems = {\n      ...expandedItems\n    };\n    newExpandedItems[clickedId] = !isExpanded;\n    setExpandedItems(newExpandedItems);\n  };\n  const getItemComponent = item => {\n    if (!layoutSm.length) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: item.i\n      });\n    }\n    if (firstOfTypes.includes(item.id)) {\n      item.firstOfType = true;\n    }\n    const itemIsFullscreen = isSlideshowView ? sortedItems[slideshowItemIndex].id === item.id : null;\n\n    // Force load next and previous items for slideshow view\n    const nextslideshowItemIndex = slideshowItemIndex === sortedItems.length - 1 ? 0 : slideshowItemIndex + 1;\n    const prevslideshowItemIndex = slideshowItemIndex === 0 ? sortedItems.length - 1 : slideshowItemIndex - 1;\n    const itemIsNextPrevFullscreen = isSlideshowView && (sortedItems[nextslideshowItemIndex].id === item.id || sortedItems[prevslideshowItemIndex].id === item.id);\n    return /*#__PURE__*/React.createElement(ProgressiveLoadingContainer, {\n      key: item.i,\n      className: cx(item.type, 'view', getGridItemDomElementClassName(item.id), {\n        [classes.fullscreenItem]: isEnteringSlideshow || isSlideshowView,\n        [classes.hiddenItem]: itemIsFullscreen === false,\n        [classes.displayedItem]: itemIsFullscreen,\n        [classes.enteringFullscreen]: isEnteringSlideshow\n      }),\n      item: item,\n      forceLoad: forceLoad || itemIsFullscreen || itemIsNextPrevFullscreen,\n      fullscreenView: isSlideshowView,\n      isOffline: isOffline,\n      dashboardIsCached: dashboardIsCached,\n      apps: apps\n    }, /*#__PURE__*/React.createElement(Item, {\n      item: item,\n      gridWidth: gridWidth,\n      dashboardMode: VIEW,\n      isRecording: forceLoad,\n      onToggleItemExpanded: onToggleItemExpanded,\n      isFullscreen: itemIsFullscreen,\n      sortIndex: sortedItems.findIndex(i => i.id === item.id)\n    }));\n  };\n  const getItemComponents = items => items.map(item => getItemComponent(item));\n  const onWidthChanged = containerWidth => setTimeout(() => setGridWidth(containerWidth), 200);\n  if (!dashboardItems.length) {\n    return /*#__PURE__*/React.createElement(NoContentMessage, {\n      text: i18n.t('There are no items on this dashboard')\n    });\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx({\n      [classes.slideshowContainer]: isSlideshowView\n    }),\n    ref: slideshowElementRef\n  }, /*#__PURE__*/React.createElement(ResponsiveReactGridLayout, {\n    className: cx(classes.grid, {\n      [classes.slideshowGrid]: isSlideshowView\n    }),\n    rowHeight: GRID_ROW_HEIGHT_PX,\n    width: containerWidth,\n    cols: {\n      lg: GRID_COLUMNS,\n      sm: SM_SCREEN_GRID_COLUMNS\n    },\n    breakpoints: {\n      lg: getBreakpoint(containerWidth),\n      sm: 0\n    },\n    layouts: {\n      lg: displayItems,\n      sm: layoutSm\n    },\n    compactType: GRID_COMPACT_TYPE,\n    margin: isSmallScreen(width) ? MARGIN_SM_PX : MARGIN_PX,\n    containerPadding: {\n      lg: GRID_PADDING_PX,\n      sm: GRID_PADDING_PX\n    },\n    isDraggable: false,\n    isResizable: false,\n    draggableCancel: \"input,textarea\",\n    onWidthChange: onWidthChanged\n  }, getItemComponents(displayItems)), isSlideshowView && !isEnteringSlideshow && /*#__PURE__*/React.createElement(SlideshowControlbar, {\n    slideshowItemIndex: slideshowItemIndex,\n    exitSlideshow: exitSlideshow,\n    nextItem: nextItem,\n    prevItem: prevItem,\n    numItems: sortedItems.length\n  }));\n};\nResponsiveItemGrid.propTypes = {\n  dashboardIsCached: PropTypes.bool\n};\nexport default ResponsiveItemGrid;","import i18n from '@dhis2/d2-i18n';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport LoadingMask from '../../components/LoadingMask.js';\nimport Notice from '../../components/Notice.js';\nimport { ROUTE_START_PATH } from '../start/index.js';\nimport { Description } from './Description.js';\nimport FilterBar from './FilterBar/FilterBar.js';\nimport ItemGrid from './ItemGrid.js';\nimport classes from './styles/ViewDashboard.module.css';\nexport const ViewDashboardContent = _ref => {\n  let {\n    loading,\n    loaded,\n    loadFailed,\n    isCached\n  } = _ref;\n  if (loading) {\n    return /*#__PURE__*/React.createElement(LoadingMask, null);\n  }\n  if (loadFailed) {\n    return /*#__PURE__*/React.createElement(Notice, {\n      title: i18n.t('Load dashboard failed'),\n      message: i18n.t('This dashboard could not be loaded. Please try again later.')\n    });\n  }\n  if (loaded) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Description, null), /*#__PURE__*/React.createElement(FilterBar, null), /*#__PURE__*/React.createElement(ItemGrid, {\n      dashboardIsCached: isCached\n    }));\n  }\n  return /*#__PURE__*/React.createElement(Notice, {\n    title: i18n.t('Offline'),\n    message: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"p\", null, i18n.t('This dashboard cannot be loaded while offline.')), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Link, {\n      to: ROUTE_START_PATH,\n      className: classes.link\n    }, i18n.t('Go to start page'))))\n  });\n};\nViewDashboardContent.propTypes = {\n  isCached: PropTypes.bool,\n  loadFailed: PropTypes.bool,\n  loaded: PropTypes.bool,\n  loading: PropTypes.bool\n};","import { useAlert, useDhis2ConnectionStatus, useDataEngine } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { acClearEditDashboard } from '../../actions/editDashboard.js';\nimport { acSetPassiveViewRegistered } from '../../actions/passiveViewRegistered.js';\nimport { acClearPrintDashboard } from '../../actions/printDashboard.js';\nimport { tSetSelectedDashboardById, tSetSelectedDashboardByIdOffline } from '../../actions/selected.js';\nimport { apiPostDataStatistics } from '../../api/dataStatistics.js';\nimport DashboardContainer from '../../components/DashboardContainer.js';\nimport DashboardsBar from '../../components/DashboardsBar/index.js';\nimport { setHeaderbarVisible } from '../../modules/setHeaderbarVisible.js';\nimport { useCacheableSection } from '../../modules/useCacheableSection.js';\nimport { sGetDashboardById } from '../../reducers/dashboards.js';\nimport { sGetPassiveViewRegistered } from '../../reducers/passiveViewRegistered.js';\nimport { sGetSelectedId } from '../../reducers/selected.js';\nimport classes from './styles/ViewDashboard.module.css';\nimport { ViewDashboardContent } from './ViewDashboardContent.js';\nconst ViewDashboard = _ref => {\n  let {\n    clearEditDashboard,\n    clearPrintDashboard,\n    fetchDashboard,\n    passiveViewRegistered,\n    registerPassiveView,\n    requestedDashboardName,\n    requestedId,\n    setSelectedAsOffline,\n    username\n  } = _ref;\n  const alertTimeoutRef = useRef(null);\n  const [loading, setLoading] = useState(false);\n  const [loaded, setLoaded] = useState(false);\n  const [loadFailed, setLoadFailed] = useState(false);\n  const {\n    isConnected: online\n  } = useDhis2ConnectionStatus();\n  const {\n    isCached\n  } = useCacheableSection(requestedId);\n  const engine = useDataEngine();\n  const {\n    show: showAlert,\n    hide: hideAlert\n  } = useAlert(_ref2 => {\n    let {\n      message\n    } = _ref2;\n    return message;\n  });\n  const loadDashboard = useCallback(async () => {\n    setLoading(true);\n    alertTimeoutRef.current = setTimeout(() => {\n      const message = requestedDashboardName ? i18n.t('Loading dashboard  {{name}}', {\n        name: requestedDashboardName\n      }) : i18n.t('Loading dashboard');\n      showAlert({\n        message\n      });\n    }, 500);\n    try {\n      await fetchDashboard(requestedId, username);\n      setLoaded(true);\n    } catch (e) {\n      setLoadFailed(true);\n      setSelectedAsOffline(requestedId, username);\n    } finally {\n      setLoading(false);\n      clearTimeout(alertTimeoutRef.current);\n    }\n  }, [fetchDashboard, requestedDashboardName, requestedId, setSelectedAsOffline, showAlert, username]);\n  useEffect(() => {\n    if (!loading && !loaded && !loadFailed) {\n      setHeaderbarVisible(true);\n      clearEditDashboard();\n      clearPrintDashboard();\n      if (online || isCached) {\n        loadDashboard();\n      } else {\n        setSelectedAsOffline(requestedId, username);\n      }\n    }\n  }, [clearEditDashboard, clearPrintDashboard, isCached, loadDashboard, loaded, loadFailed, loading, online, requestedId, setSelectedAsOffline, username]);\n  useEffect(() => {\n    if (!passiveViewRegistered && online) {\n      apiPostDataStatistics('PASSIVE_DASHBOARD_VIEW', requestedId, engine).then(() => {\n        registerPassiveView();\n      }).catch(error => console.info(error));\n    }\n  }, [engine, online, passiveViewRegistered, registerPassiveView, requestedId]);\n\n  /* Cleanup effect: Hide current alert and prevent pending alert\n   * from showing after the component unmounts due to navigation */\n  useEffect(() => () => {\n    hideAlert();\n    clearTimeout(alertTimeoutRef.current);\n  }, [hideAlert]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: cx(classes.container, 'dashboard-scroll-container'),\n    \"data-test\": \"outer-scroll-container\"\n  }, /*#__PURE__*/React.createElement(DashboardsBar, null), /*#__PURE__*/React.createElement(DashboardContainer, null, /*#__PURE__*/React.createElement(ViewDashboardContent, {\n    isCached: isCached,\n    loading: loading,\n    loaded: loaded,\n    loadFailed: loadFailed\n  })));\n};\nViewDashboard.propTypes = {\n  clearEditDashboard: PropTypes.func,\n  clearPrintDashboard: PropTypes.func,\n  fetchDashboard: PropTypes.func,\n  passiveViewRegistered: PropTypes.bool,\n  registerPassiveView: PropTypes.func,\n  requestedDashboardName: PropTypes.string,\n  requestedId: PropTypes.string,\n  setSelectedAsOffline: PropTypes.func,\n  username: PropTypes.string\n};\nconst mapStateToProps = (state, ownProps) => {\n  const dashboard = sGetDashboardById(state, ownProps.requestedId) || {};\n  return {\n    passiveViewRegistered: sGetPassiveViewRegistered(state),\n    requestedDashboardName: dashboard.displayName || null,\n    currentId: sGetSelectedId(state)\n  };\n};\nexport default connect(mapStateToProps, {\n  clearEditDashboard: acClearEditDashboard,\n  clearPrintDashboard: acClearPrintDashboard,\n  registerPassiveView: acSetPassiveViewRegistered,\n  fetchDashboard: tSetSelectedDashboardById,\n  setSelectedAsOffline: tSetSelectedDashboardByIdOffline\n})(ViewDashboard);","import { REGISTER_PASSIVE_VIEW } from '../reducers/passiveViewRegistered.js';\nexport const acSetPassiveViewRegistered = () => ({\n  type: REGISTER_PASSIVE_VIEW\n});","import { useCachedDataQuery } from '@dhis2/analytics';\nimport { CacheableSection } from '@dhis2/app-runtime';\nimport i18n from '@dhis2/d2-i18n';\nimport isEmpty from 'lodash/isEmpty.js';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { acClearSelected } from '../../actions/selected.js';\nimport DashboardsBar from '../../components/DashboardsBar/index.js';\nimport LoadingMask from '../../components/LoadingMask.js';\nimport NoContentMessage from '../../components/NoContentMessage.js';\nimport getCacheableSectionId from '../../modules/getCacheableSectionId.js';\nimport { getPreferredDashboardId } from '../../modules/localStorage.js';\nimport { sDashboardsIsFetching, sGetDashboardById, sGetDashboardsSortedByStarred } from '../../reducers/dashboards.js';\nimport { sGetSelectedId } from '../../reducers/selected.js';\nimport ViewDashboard from './ViewDashboard.js';\nconst CacheableViewDashboard = _ref => {\n  let {\n    clearSelectedDashboard,\n    dashboardsIsEmpty,\n    dashboardsLoaded,\n    id,\n    selectedId\n  } = _ref;\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  useEffect(() => {\n    if (id === null && selectedId !== null) {\n      clearSelectedDashboard();\n    }\n  }, [id, selectedId, clearSelectedDashboard]);\n  if (!dashboardsLoaded) {\n    return /*#__PURE__*/React.createElement(LoadingMask, null);\n  }\n  if (dashboardsIsEmpty || id === null) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DashboardsBar, null), /*#__PURE__*/React.createElement(NoContentMessage, {\n      text: dashboardsIsEmpty ? i18n.t('No dashboards found. Use the + button to create a new dashboard.') : i18n.t('Requested dashboard not found')\n    }));\n  }\n  const cacheSectionId = getCacheableSectionId(currentUser.id, id);\n  return /*#__PURE__*/React.createElement(CacheableSection, {\n    id: cacheSectionId,\n    loadingMask: /*#__PURE__*/React.createElement(LoadingMask, null)\n  }, /*#__PURE__*/React.createElement(ViewDashboard, {\n    key: cacheSectionId,\n    requestedId: id,\n    username: currentUser.username\n  }));\n};\nCacheableViewDashboard.propTypes = {\n  clearSelectedDashboard: PropTypes.func,\n  dashboardsIsEmpty: PropTypes.bool,\n  dashboardsLoaded: PropTypes.bool,\n  id: PropTypes.string,\n  selectedId: PropTypes.string\n};\nconst mapStateToProps = (state, ownProps) => {\n  var _ownProps$match, _ownProps$match$param, _dashboardToSelect;\n  const dashboards = sGetDashboardsSortedByStarred(state);\n  // match is provided by the react-router-dom\n  const routeId = ((_ownProps$match = ownProps.match) === null || _ownProps$match === void 0 ? void 0 : (_ownProps$match$param = _ownProps$match.params) === null || _ownProps$match$param === void 0 ? void 0 : _ownProps$match$param.dashboardId) || null;\n  let dashboardToSelect = null;\n  if (routeId) {\n    dashboardToSelect = sGetDashboardById(state, routeId) || null;\n  } else {\n    const lastStoredDashboardId = getPreferredDashboardId(ownProps.username);\n    const dash = sGetDashboardById(state, lastStoredDashboardId);\n    dashboardToSelect = lastStoredDashboardId && dash ? dash : dashboards[0];\n  }\n  return {\n    dashboardsIsEmpty: isEmpty(dashboards),\n    dashboardsLoaded: !sDashboardsIsFetching(state),\n    id: ((_dashboardToSelect = dashboardToSelect) === null || _dashboardToSelect === void 0 ? void 0 : _dashboardToSelect.id) || null,\n    selectedId: sGetSelectedId(state) || null\n  };\n};\nconst mapDispatchToProps = {\n  clearSelectedDashboard: acClearSelected\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(CacheableViewDashboard);","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport { useCachedDataQuery } from '@dhis2/analytics';\nimport { CssVariables } from '@dhis2/ui';\nimport PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect, HashRouter as Router, Route, Switch } from 'react-router-dom';\nimport { acClearActiveModalDimension } from '../actions/activeModalDimension.js';\nimport { tFetchDashboards } from '../actions/dashboards.js';\nimport { acClearDashboardsFilter } from '../actions/dashboardsFilter.js';\nimport { acClearEditDashboard } from '../actions/editDashboard.js';\nimport { acClearItemActiveTypes } from '../actions/itemActiveTypes.js';\nimport { acClearItemFilters } from '../actions/itemFilters.js';\nimport { acClearPrintDashboard } from '../actions/printDashboard.js';\nimport { acSetSelected } from '../actions/selected.js';\nimport { tSetShowDescription } from '../actions/showDescription.js';\nimport { acClearVisualizations } from '../actions/visualizations.js';\nimport { NewDashboard, EditDashboard } from '../pages/edit/index.js';\nimport { PrintDashboard, PrintLayoutDashboard } from '../pages/print/index.js';\nimport { LandingPage, ROUTE_START_PATH } from '../pages/start/index.js';\nimport { ViewDashboard } from '../pages/view/index.js';\nimport { useSystemSettings } from './SystemSettingsProvider.js';\nimport './styles/App.css';\nimport 'react-grid-layout/css/styles.css';\nimport 'react-resizable/css/styles.css';\nimport './styles/ItemGrid.css';\nconst App = props => {\n  const {\n    systemSettings\n  } = useSystemSettings();\n  const {\n    currentUser\n  } = useCachedDataQuery();\n  useEffect(() => {\n    props.fetchDashboards();\n    props.setShowDescription();\n\n    // store the headerbar height for controlbar height calculations\n    const headerbarHeight = document.querySelector('header').getBoundingClientRect().height;\n    document.documentElement.style.setProperty('--headerbar-height', `${headerbarHeight}px`);\n  }, []);\n  return systemSettings && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CssVariables, {\n    colors: true,\n    spacers: true,\n    elevations: true\n  }), /*#__PURE__*/React.createElement(Router, null, /*#__PURE__*/React.createElement(Switch, null, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: props => systemSettings.startModuleEnableLightweight ? /*#__PURE__*/React.createElement(Redirect, {\n      to: ROUTE_START_PATH\n    }) : /*#__PURE__*/React.createElement(ViewDashboard, _extends({}, props, {\n      username: currentUser.username\n    }))\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: ROUTE_START_PATH,\n    render: () => /*#__PURE__*/React.createElement(LandingPage, {\n      username: currentUser.username,\n      onMount: props.resetState\n    })\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/new\",\n    render: props => /*#__PURE__*/React.createElement(NewDashboard, props)\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/:dashboardId\",\n    render: props => /*#__PURE__*/React.createElement(ViewDashboard, _extends({}, props, {\n      username: currentUser.username\n    }))\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/:dashboardId/edit\",\n    render: props => /*#__PURE__*/React.createElement(EditDashboard, props)\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/:dashboardId/printoipp\",\n    render: props => /*#__PURE__*/React.createElement(PrintDashboard, props)\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/:dashboardId/printlayout\",\n    render: props => /*#__PURE__*/React.createElement(PrintLayoutDashboard, props)\n  }))));\n};\nApp.propTypes = {\n  fetchDashboards: PropTypes.func,\n  resetState: PropTypes.func,\n  setShowDescription: PropTypes.func\n};\nconst mapDispatchToProps = {\n  fetchDashboards: tFetchDashboards,\n  setShowDescription: tSetShowDescription,\n  resetState: () => dispatch => {\n    dispatch(acSetSelected({}));\n    dispatch(acClearDashboardsFilter());\n    dispatch(acClearVisualizations());\n    dispatch(acClearEditDashboard());\n    dispatch(acClearPrintDashboard());\n    dispatch(acClearItemFilters());\n    dispatch(acClearActiveModalDimension());\n    dispatch(acClearItemActiveTypes());\n  }\n};\nexport default connect(null, mapDispatchToProps)(App);","import { combineReducers } from 'redux';\nimport activeModalDimension from './activeModalDimension.js';\nimport dashboards from './dashboards.js';\nimport dashboardsFilter from './dashboardsFilter.js';\nimport dimensions from './dimensions.js';\nimport editDashboard from './editDashboard.js';\nimport iframePluginStatus from './iframePluginStatus.js';\nimport itemActiveTypes from './itemActiveTypes.js';\nimport itemFilters from './itemFilters.js';\nimport messages from './messages.js';\nimport passiveViewRegistered from './passiveViewRegistered.js';\nimport printDashboard from './printDashboard.js';\nimport selected from './selected.js';\nimport showDescription from './showDescription.js';\nimport slideshow from './slideshow.js';\nimport visualizations from './visualizations.js';\nexport default combineReducers({\n  dashboards,\n  selected,\n  dashboardsFilter,\n  visualizations,\n  messages,\n  editDashboard,\n  printDashboard,\n  itemFilters,\n  dimensions,\n  activeModalDimension,\n  passiveViewRegistered,\n  showDescription,\n  slideshow,\n  itemActiveTypes,\n  iframePluginStatus\n});","import { createStore, applyMiddleware, compose } from 'redux';\nimport { createLogger } from 'redux-logger';\nimport thunk from 'redux-thunk';\nimport reducer from './reducers/index.js';\nconst configureStore = dataEngine => {\n  const middleware = [thunk.withExtraArgument(dataEngine)];\n\n  // Enable Redux devtools if extension is installed instead of redux-logger\n  const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n  if (!window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ && process.env.NODE_ENV !== 'production') {\n    middleware.push(createLogger());\n  }\n  return createStore(reducer, composeEnhancers(applyMiddleware(...middleware)));\n};\nexport default configureStore;","//------------------------------------------------------------------------------\n// <auto-generated>\n// This code was generated by d2-i18n-generate.\n//\n// Changes to this file may cause incorrect behavior and will be lost if\n// the code is regenerated.\n// </auto-generated>\n//------------------------------------------------------------------------------\nimport i18n from '@dhis2/d2-i18n';\nimport arTranslations from './ar/translations.json';\nimport ar_IQTranslations from './ar_IQ/translations.json';\nimport ckbTranslations from './ckb/translations.json';\nimport csTranslations from './cs/translations.json';\nimport daTranslations from './da/translations.json';\nimport enTranslations from './en/translations.json';\nimport esTranslations from './es/translations.json';\nimport es_419Translations from './es_419/translations.json';\nimport frTranslations from './fr/translations.json';\nimport idTranslations from './id/translations.json';\nimport kmTranslations from './km/translations.json';\nimport loTranslations from './lo/translations.json';\nimport myTranslations from './my/translations.json';\nimport nbTranslations from './nb/translations.json';\nimport nlTranslations from './nl/translations.json';\nimport prsTranslations from './prs/translations.json';\nimport psTranslations from './ps/translations.json';\nimport ptTranslations from './pt/translations.json';\nimport pt_BRTranslations from './pt_BR/translations.json';\nimport roTranslations from './ro/translations.json';\nimport ruTranslations from './ru/translations.json';\nimport siTranslations from './si/translations.json';\nimport svTranslations from './sv/translations.json';\nimport tetTranslations from './tet/translations.json';\nimport tgTranslations from './tg/translations.json';\nimport ukTranslations from './uk/translations.json';\nimport urTranslations from './ur/translations.json';\nimport uz_CyrlTranslations from './uz_Cyrl/translations.json';\nimport uz_LatnTranslations from './uz_Latn/translations.json';\nimport uz_UZ_CyrlTranslations from './uz_UZ_Cyrl/translations.json';\nimport uz_UZ_LatnTranslations from './uz_UZ_Latn/translations.json';\nimport viTranslations from './vi/translations.json';\nimport zhTranslations from './zh/translations.json';\nimport zh_CNTranslations from './zh_CN/translations.json';\nconst namespace = 'default';\ni18n.addResources('ar', namespace, arTranslations);\ni18n.addResources('ar_IQ', namespace, ar_IQTranslations);\ni18n.addResources('ckb', namespace, ckbTranslations);\ni18n.addResources('cs', namespace, csTranslations);\ni18n.addResources('da', namespace, daTranslations);\ni18n.addResources('en', namespace, enTranslations);\ni18n.addResources('es', namespace, esTranslations);\ni18n.addResources('es_419', namespace, es_419Translations);\ni18n.addResources('fr', namespace, frTranslations);\ni18n.addResources('id', namespace, idTranslations);\ni18n.addResources('km', namespace, kmTranslations);\ni18n.addResources('lo', namespace, loTranslations);\ni18n.addResources('my', namespace, myTranslations);\ni18n.addResources('nb', namespace, nbTranslations);\ni18n.addResources('nl', namespace, nlTranslations);\ni18n.addResources('prs', namespace, prsTranslations);\ni18n.addResources('ps', namespace, psTranslations);\ni18n.addResources('pt', namespace, ptTranslations);\ni18n.addResources('pt_BR', namespace, pt_BRTranslations);\ni18n.addResources('ro', namespace, roTranslations);\ni18n.addResources('ru', namespace, ruTranslations);\ni18n.addResources('si', namespace, siTranslations);\ni18n.addResources('sv', namespace, svTranslations);\ni18n.addResources('tet', namespace, tetTranslations);\ni18n.addResources('tg', namespace, tgTranslations);\ni18n.addResources('uk', namespace, ukTranslations);\ni18n.addResources('ur', namespace, urTranslations);\ni18n.addResources('uz_Cyrl', namespace, uz_CyrlTranslations);\ni18n.addResources('uz_Latn', namespace, uz_LatnTranslations);\ni18n.addResources('uz_UZ_Cyrl', namespace, uz_UZ_CyrlTranslations);\ni18n.addResources('uz_UZ_Latn', namespace, uz_UZ_LatnTranslations);\ni18n.addResources('vi', namespace, viTranslations);\ni18n.addResources('zh', namespace, zhTranslations);\ni18n.addResources('zh_CN', namespace, zh_CNTranslations);\nexport default i18n;","import { CachedDataQueryProvider } from '@dhis2/analytics';\nimport { useDataEngine } from '@dhis2/app-runtime';\nimport { D2Shim } from '@dhis2/app-runtime-adapter-d2';\nimport React from 'react';\nimport { Provider as ReduxProvider } from 'react-redux';\nimport App from './components/App.js';\nimport SystemSettingsProvider from './components/SystemSettingsProvider.js';\nimport UserSettingsProvider from './components/UserSettingsProvider.js';\nimport WindowDimensionsProvider from './components/WindowDimensionsProvider.js';\nimport configureStore from './configureStore.js';\nimport './locales/index.js';\nconst d2Config = {\n  schemas: []\n};\n\n// TODO: ER and EV plugins require the auth header in development mode.\n// Remove this when these plugins are rewritten\nconst authorization = process.env.REACT_APP_DHIS2_AUTHORIZATION || null;\nif (authorization) {\n  d2Config.headers = {\n    Authorization: authorization\n  };\n}\nconst query = {\n  rootOrgUnits: {\n    resource: 'organisationUnits',\n    params: {\n      fields: 'id,displayName,name',\n      userDataViewFallback: true,\n      paging: false\n    }\n  },\n  apps: {\n    resource: 'apps'\n  },\n  currentUser: {\n    resource: 'me',\n    params: {\n      fields: 'id,username,displayName~rename(name),authorities,settings[keyAnalysisDisplayProperty]'\n    }\n  }\n};\nconst providerDataTransformation = _ref => {\n  let {\n    rootOrgUnits,\n    apps,\n    currentUser\n  } = _ref;\n  const lineListingApp = apps.find(app => app.key === 'line-listing') || {};\n  return {\n    rootOrgUnits: rootOrgUnits.organisationUnits,\n    lineListingAppVersion: lineListingApp.version || '0.0.0',\n    currentUser,\n    apps\n  };\n};\nconst AppWrapper = () => {\n  const dataEngine = useDataEngine();\n  return /*#__PURE__*/React.createElement(ReduxProvider, {\n    store: configureStore(dataEngine)\n  }, /*#__PURE__*/React.createElement(CachedDataQueryProvider, {\n    query: query,\n    dataTransformation: providerDataTransformation\n  }, /*#__PURE__*/React.createElement(D2Shim, {\n    d2Config: d2Config\n  }, _ref2 => {\n    let {\n      d2\n    } = _ref2;\n    if (!d2) {\n      // TODO: Handle errors in d2 initialization\n      return null;\n    }\n    return /*#__PURE__*/React.createElement(SystemSettingsProvider, null, /*#__PURE__*/React.createElement(UserSettingsProvider, null, /*#__PURE__*/React.createElement(WindowDimensionsProvider, null, /*#__PURE__*/React.createElement(App, null))));\n  })));\n};\nexport default AppWrapper;"],"names":["SET_ACTIVE_MODAL_DIMENSION","CLEAR_ACTIVE_MODAL_DIMENSION","DEFAULT_STATE_ACTIVE_MODAL_DIMENSION","sGetActiveModalDimension","state","activeModalDimension","acSetActiveModalDimension","value","type","acClearActiveModalDimension","dashboardsQuery","resource","params","fields","paging","orArray","param","Array","isArray","orObject","isObject","arrayToIdMap","array","reduce","obj","item","id","SET_DASHBOARDS","ADD_DASHBOARDS","SET_DASHBOARD_STARRED","EMPTY_DASHBOARDS","sGetDashboardsRoot","dashboards","sGetDashboardById","sGetDashboardStarred","starred","sDashboardsIsFetching","sGetAllDashboards","sGetStarredDashboards","Object","values","filter","dashboard","sGetUnstarredDashboards","sGetDashboardsSortedByStarred","arraySort","tFetchDashboards","async","dispatch","getState","dataEngine","query","error","console","log","apiFetchDashboards","acSetDashboards","SET_DASHBOARDS_FILTER","CLEAR_DASHBOARDS_FILTER","sGetDashboardsFilter","dashboardsFilter","EDIT","NEW","VIEW","PRINT","PRINT_LAYOUT","isEditMode","mode","includes","isPrintMode","isViewMode","VISUALIZATION","REPORT_TABLE","CHART","MAP","EVENT_REPORT","EVENT_CHART","EVENT_VISUALIZATION","APP","REPORTS","RESOURCES","USERS","MESSAGES","TEXT","SPACER","PAGEBREAK","PRINT_TITLE_PAGE","DOMAIN_TYPE_AGGREGATE","DOMAIN_TYPE_TRACKER","isVisualizationType","_itemTypeMap$item$typ","itemTypeMap","getAppName","itemType","appName","getItemTypeForVis","visualization","VIS_TYPE_PIVOT_TABLE","endPointName","dataStatisticsName","propName","pluralTitle","i18n","t","domainType","appUrl","appKey","defaultItemCount","supportsFullscreen","Date","getTime","getItemUrl","baseUrl","url","launchUrl","itemTypeSupportsFullscreen","_itemTypeMap$type","isSmallScreen","width","getBreakpoint","containerWidth","window","innerWidth","GRID_COMPACT_TYPE","GRID_ROW_HEIGHT_PX","MARGIN_PX","MARGIN_SM_PX","GRID_PADDING_PX","GRID_COLUMNS","NEW_ITEM_SHAPE","x","y","w","h","isNonNegativeInteger","Number","isInteger","hasShape","withShape","arguments","length","undefined","map","i","assign","col","row","Math","floor","itemWidth","MAX_ITEM_GRID_WIDTH","getShape","originalH","getGridUnitsForSmFromPx","hPx","gridUnitHeightPx","round","getProportionalHeight","gridWidthPx","wPx","getItemWHPx","ratioWH","newWPx","newHPx","getGridItemProperties","itemId","minH","getPageBreakItemShape","yPos","static","getPrintTitlePageItemShape","isOneItemPerPage","gridUnits","colOrRowSize","marginPx","max","getAutoItemShapes","dashboardItems","columns","maxColUnits","numberOfColUnits","getNumberOfColUnits","items","slice","sort","a","b","sortItems","itemsWithNewShape","itemHeight","colIdx","rowIdx","push","updateItems","options","reload","acSetHideGrid","acUpdateDashboardItemShapes","setTimeout","hasLayout","layout","_layout$columns","Boolean","getDashboardItem","itemPropName","generateUid","gridItemProperties","shape","isStatic","position","content","spacerContent","emptyTextItemContent","isTextType","text","convertUiItemsToBackend","isUiSpacerType","convertBackendItemsToUi","isBackendSpacerType","gridProperties","getIdNameFields","rename","getDimensionFields","_ref","withItems","withRepetition","arrayClean","join","getAxesFields","_ref2","getFavoriteFields","_ref3","withDimensions","withOptions","baseDashboardFields","viewDashboardQuery","editDashboardQuery","apiFetchDashboard","forSave","variables","data","arrayFrom","d","_d$allowedFilters","name","code","displayName","description","displayDescription","created","lastUpdated","access","restrictFilters","allowedFilters","href","itemConfig","createDashboardMutation","updateDashboardMutation","skipTranslation","skipSharing","generatePayload","height","RECEIVED_EDIT_DASHBOARD","RECEIVED_NOT_EDITING","START_NEW_DASHBOARD","RECEIVED_TITLE","RECEIVED_CODE","RECEIVED_DESCRIPTION","REMOVE_DASHBOARD_ITEM","UPDATE_DASHBOARD_ITEM","RECEIVED_DASHBOARD_ITEM_SHAPES","SET_PRINT_PREVIEW_VIEW","CLEAR_PRINT_PREVIEW_VIEW","RECEIVED_FILTER_SETTINGS","RECEIVED_HIDE_GRID","RECEIVED_LAYOUT_COLUMNS","RECEIVED_ITEM_CONFIG_INSERT_POSITION","EMPTY_STATE_EDIT_DASHBOARD","DEFAULT_STATE_EDIT_DASHBOARD","update","delete","printPreviewView","isDirty","hideGrid","insertPosition","sGetEditDashboardRoot","editDashboard","sGetIsEditing","isEmpty","sGetIsPrintPreviewView","sGetEditDashboardItems","sGetEditIsDirty","sGetHideGrid","sGetLayout","getLayout","sGetLayoutColumns","sGetItemConfigInsertPosition","getInsertPosition","getItemConfig","sGetItemConfig","acClearEditDashboard","acUpdateDashboardItem","acRemoveDashboardItem","tSetDashboardItems","itemToAdd","itemIdToRemove","dashboardItemsWithShapes","newDashboardItem","addToItemsStart","addToItemsEnd","mx","tSaveDashboard","dashboardToSave","dashboardId","response","mutate","uid","updateDashboard","postDashboard","Promise","resolve","SET_ITEM_ACTIVE_TYPE","CLEAR_ITEM_ACTIVE_TYPES","DEFAULT_STATE_ITEM_ACTIVE_TYPES","sGetItemActiveType","itemActiveTypes","acClearItemActiveTypes","SET_DIMENSIONS","PE_OU_DIMENSIONS","getDimensionById","DIMENSION_ID_PERIOD","DIMENSION_ID_ORGUNIT","INITIAL_DIMENSIONS","CLEAR_ITEM_FILTERS","ADD_ITEM_FILTER","REMOVE_ITEM_FILTER","DEFAULT_STATE_ITEM_FILTERS","sGetItemFiltersRoot","itemFilters","sGetNamedItemFilters","createSelector","dimensions","filters","keys","arr","find","dimension","FILTER_ORG_UNIT","acRemoveItemFilter","acClearItemFilters","SET_PRINT_DASHBOARD","CLEAR_PRINT_DASHBOARD","ADD_PRINT_DASHBOARD_ITEM","SET_PRINT_DASHBOARD_LAYOUT","REMOVE_PRINT_DASHBOARD_ITEM","UPDATE_PRINT_DASHBOARD_ITEM","DEFAULT_STATE_PRINT_DASHBOARD","DEFAULT_DASHBOARD_ITEMS","NEW_PRINT_DASHBOARD_STATE","sGetPrintDashboardRoot","printDashboard","sGetPrintDashboardItems","_sGetPrintDashboardRo","acSetPrintDashboard","acClearPrintDashboard","acAddPrintDashboardItem","acUpdatePrintDashboardItem","messageConversationsQuery","order","pageSize","RECEIVED_MESSAGES","sGetMessagesRoot","messages","tGetMessages","messageConversations","getMessages","err","action","onError","storePreferredDashboardId","username","localStorage","setItem","SET_SELECTED","CLEAR_SELECTED","DEFAULT_SELECTED_STATE","SELECTED_PROPERTIES","sGetSelected","selected","sGetSelectedId","sGetSelectedDisplayDescription","sGetSelectedDashboardItems","ADD_VISUALIZATION","CLEAR_VISUALIZATIONS","DEFAULT_STATE_VISUALIZATIONS","p","sGetVisualization","visualizations","sGetVisualizationsRoot","acClearVisualizations","acSetSelected","acClearSelected","SET_SHOW_DESCRIPTION","DEFAULT_STATE_SHOW_DESCRIPTION","sGetShowDescription","showDescription","NAMESPACE","getNamespace","hasNamespace","d2","currentUser","dataStore","has","hasDashboardNamespace","get","create","apiPostUserDataStoreValue","key","getInstance","set","KEY_SHOW_DESCRIPTION","apiGetShowDescription","defaultValue","_ns$keys","ns","k","apiGetUserDataStoreValue","acSetShowDescription","ContainerWidthContext","createContext","useContainerWidth","useContext","children","setContainerWidth","useState","ref","useRef","useEffect","resizeObserver","ResizeObserver","entries","contentRect","observe","current","disconnect","React","className","cx","classes","Provider","viewBox","fill","xmlns","colors","grey500","title","message","CenteredContent","NoticeBox","warning","WindowDimensionsCtx","windowDims","innerHeight","setDimensions","handleResize","debounce","addEventListener","removeEventListener","useWindowDimensions","setHeaderbarVisible","show","header","document","getElementsByTagName","classList","remove","add","PrintActionsBar","getExitPrintButton","isSmall","Button","small","IconChevronLeft24","color","grey700","getPrintButton","onClick","print","Link","to","defaultValues","isLayout","layoutStyle","Tooltip","placement","secondary","icon","IconDelete24","red600","dataTest","mapDispatchToProps","onDeleteItem","connect","itemActionsWrap","DeleteItemButton","PrintWarning","IconWarning24","grey600","actionButtons","tags","itemTagsWrap","ItemHeader","dashboardMode","isShortened","style","rest","Actions","ViewItemActions","EditItemActions","PrintItemInfo","getItemActionsMap","itemHeaderWrap","itemTitle","itemHeaderRightWrap","ViewItemTags","forwardRef","getIframeSrc","appDetails","iframeSrc","path","split","mapStateToProps","ownProps","_appDetails","_appDetails$settings","_appDetails$settings$","apps","isFullscreen","app","hideTitle","settings","dashboardWidget","shortened","Divider","margin","spacers","dp4","src","styles","border","IconQuestion24","SET_SLIDESHOW","sGetSlideshow","slideshow","getItemTitle","isSlideshowView","removeItem","updateItem","useConfig","contentItems","index","findIndex","el","getContentItems","getLink","contentItem","removeButton","listItemType","newContent","updateDashboardItem","grey900","tabIndex","IconFileDocument16","userSettingsQuery","UserSettingsCtx","setSettings","engine","useDataEngine","userSettings","displayProperty","keyAnalysisDisplayProperty","fetchData","useUserSettings","PRIVATE","messageTypes","VALIDATION_RESULT","TICKET","SYSTEM","MessagesContainer","getMessageHref","msg","msgIdentifier","messageType","getMessageItems","modeClass","sender","latestMsg","getMessageSender","readClass","read","msgDate","redirectToMsg","location","messageCount","getFormattedDate","uiLocale","global","Intl","DateTimeFormat","locale","year","month","day","format","substr","replace","keyUiLocale","display","flexDirection","justifyContent","alignItems","PageBreakItem","PrintTitlePageItem","getItemFilterList","listItems","val","defaultProps","sGetPrintDashboardName","sGetSelectedDisplayName","sGetPrintDashboardDescription","fontSize","lineHeight","props","fullscreenStyle","padding","fontStretch","viewStyle","isPrintPreview","sGetIsPrinting","onChangeText","updatedItem","viewItem","RichTextParser","editItem","RichTextEditor","onChange","inputPlaceholder","initialFocus","resizable","printItem","textItem","acSetSlideshow","isSlideshow","POST_DATA_STATISTICS_QUERY","eventType","favorite","apiPostDataStatistics","getVisualizationFromItem","eventReport","eventChart","getVisualizationId","getVisualizationName","apiFetchVisualization","getMapFields","favoriteFields","concat","Api","getApi","DEFAULT_SETTINGS","keyDashboardContextMenuItemOpenInRelevantApp","keyDashboardContextMenuItemShowInterpretationsAndDetails","keyDashboardContextMenuItemSwitchViewType","keyDashboardContextMenuItemViewFullscreen","keyGatherAnalyticalObjectStatisticsInDashboardViews","startModuleEnableLightweight","SYSTEM_SETTINGS_REMAPPINGS","keyHideBiMonthlyPeriods","keyHideDailyPeriods","keyHideMonthlyPeriods","keyHideWeeklyPeriods","keyHideBiWeeklyPeriods","renameSystemSettings","mapped","systemSettingsQuery","SystemSettingsCtx","systemSettings","useSystemSettings","Warning","FatalErrorBoundary","constructor","super","this","errorFound","componentDidCatch","info","setState","onFatalError","render","Function","prototype","getGridItemDomElementClassName","getGridItemElement","querySelector","_extends","bind","target","source","hasOwnProperty","call","apply","MenuItemWithTooltip","disabledWhenOffline","tooltip","label","disabled","isDisconnected","offline","useDhis2ConnectionStatus","tooltipContent","notAllowed","MenuItem","ariaLabel","dense","OfflineTooltip","mapViews","mv","layer","activeType","onActiveTypeChanged","isTrackerType","notSupported","getThematicMapViews","VIS_TYPE_OUTLIER_TABLE","getNotSupportedMessage","viewAs","onViewChart","IconVisualizationColumn16","onViewTable","IconTable16","hasMapView","onViewMap","IconWorld16","menuIsOpen","setMenuIsOpen","allowVisOpenInApp","allowVisShowInterpretations","allowVisViewAs","allowVisFullscreen","fullscreenAllowed","fullscreenSupported","loadItemFailed","closeMenu","canViewAs","isSingleValue","isYearOverYear","VIS_TYPE_GAUGE","VIS_TYPE_PIE","interpretationMenuLabel","activeFooter","buttonRef","createRef","itemHref","openMenu","IconMore16","Popover","reference","arrow","onClickOutside","Menu","ViewAsMenuItems","onSelectActiveType","IconLaunch16","IconMessages16","toggleInterpretations","onToggleFooter","IconFullscreen16","enterFullscreen","interpretation","InterpretationReplyForm","interpretationId","onGoBackClicked","onInterpretationDeleted","dashboardRedirectUrl","refetch","loading","fetching","useDataQuery","lazy","Layer","CircularLoader","dp16","dp32","marginBottom","dp8","IconChevronLeft16","InterpretationThread","onThreadUpdated","_itemTypeMap$item$typ2","setInterpretationId","replyInitialFocus","setReplyInitialFocus","useCachedDataQuery","AboutAOUnit","clearInterpretation","InterpretationsUnit","onInterpretationClick","onReplyIconClick","fn","lastArgs","lastValue","_len","args","_key","every","arg","loadExternalScript","startsWith","process","normalizeRelativePath","reject","isScriptLoaded","element","createElement","cleanup","head","removeChild","onload","e","onerror","appendChild","itemTypeToGlobalVariable","itemTypeToScriptPath","hasIntegratedPlugin","getPluginLaunchUrl","pluginLaunchUrl","pluginIsAvailable","loadPlugin","config","credentials","plugin","globalName","scripts","scriptsPromise","all","then","fetchPlugin","load","loadingIndicator","auth","unmount","pluginName","getPlugin","getVisualizationContainerDomId","minLLVersion","getFilteredNonMap","visRows","rows","visColumns","visFilters","forEach","dimensionId","dimensionFound","dimensionObjects","getFilteredVisualization","getFilteredMap","mapView","mapViewIsThematicOrEvent","getWithoutId","object","getVisualizationConfig","originalType","thematicMapViews","VIS_TYPE_COLUMN","getAdaptedUiLayoutByType","ADD_IFRAME_PLUGIN_STATUS","INSTALLATION_STATUS_INSTALLING","INSTALLATION_STATUS_UNKNOWN","DEFAULT_STATE_IFRAME_PLUGIN_STATUS","sGetIframePluginStatus","iframePluginStatus","userId","useCacheableSection","useCacheableSectionAppRuntime","getCacheableSectionId","Center","stopPropagation","rel","visualizationId","visHref","grey400","transform","IframePlugin","filterVersion","isFirstOfType","useDispatch","useSelector","iframeRef","setError","isCached","recordingState","recordOnNextLoad","setRecordOnNextLoad","prevPluginRef","pluginType","installationStatus","pluginProps","useMemo","isVisualizationLoaded","forDashboard","cacheId","isParentCached","useCallback","pluginOverrides","getPluginOverrides","postRobot","contentWindow","catch","listener","cancel","event","status","MissingPluginMessage","VisualizationErrorMessage","dir","LegacyPlugin","gridWidth","useD2","prevItem","prevActiveType","prevFilterVersion","setViewportSize","clientWidth","clientHeight","defaultHeaders","Authorization","availableHeight","availableWidth","showNoFiltersOverlay","onClickNoFiltersOverlay","lineListingAppVersion","visualizationConfig","uniqueId","iFramePluginProps","firstOfType","Cover","version","versionArray","parseInt","minMajor","minMinor","minPatch","major","minor","patch","isLLVersionCompatible","IconInfo24","_visualization$mapVie","mapHasEELayer","_defineProperty","defineProperty","enumerable","configurable","writable","Item","Component","_this$props$item","showFooter","configLoaded","requestFullscreen","webkitRequestFullscreen","onToggleItemExpanded","getActiveType","setActiveType","isEditing","headerRef","itemHeaderTotalMargin","itemContentPadding","calculatedHeight","getItemHeightPx","windowWidthPx","smallOriginalH","memoizedGetContentHeight","contentRef","offsetHeight","_getGridItemElement","rect","getBoundingClientRect","getComputedStyle","documentElement","getPropertyValue","memoizeOne","measuredHeight","preferMeasured","componentDidMount","setVisualization","componentDidUpdate","prevProps","isRecording","setSlideshow","sortIndex","ItemContextMenu","isFullscreenSupported","Tag","negative","some","getTags","Consumer","Visualization","getAvailableHeight","getAvailableWidth","ItemFooter","acSetItemActiveType","_ownProps$item","GridItem","VisualizationItem","MessagesItem","ListItem","TextItem","SpacerItem","AppItem","NotSupportedItem","getGridItem","getFirstOfTypes","_sortBy$","_sortBy$2","_sortBy$3","firstOfTypes","sortBy","getTransformYPx","elStyle","_elStyle$transform$sp","transformY","match","isLeapPage","n","getMultiple","factor","multiple","StaticGrid","onLayoutChange","NoContentMessage","pageWidthPx","ReactGridLayout","cols","rowHeight","compactType","isDraggable","isResizable","draggableCancel","PrintLayoutItemGrid","newLayout","updateDashboardLayout","pageBreaks","sortedPageBreaks","itemClassNames","isFirstPageBreak","getItemComponent","hideExtraPageBreaks","sortedElements","elements","types","elementsWithBoundingRect","from","indexOf","bottomY","getDomGridItemsSortedByYPos","querySelectorAll","pageBreakBottom","lastItemBottom","foundNonPageBreak","thisItemBottom","gridElement","maxHeight","firstBreak","scrollArea","scroll","getItemComponents","addPageBreaks","addDashboardItem","yPosList","pageNum","getPageBreakPositions","_ownProps$match","_ownProps$match$param","fromEdit","setPrintDashboard","redirectUrl","setRedirectUrl","isLoading","setIsLoading","customizePrintLayoutDashboard","dboard","loadDashboard","Redirect","translucent","PrintInfo","onConfirm","onCancel","open","cancelLabel","confirmLabel","Modal","onClose","ModalTitle","ModalContent","ModalActions","ButtonStrip","destructive","deleteDashboardMutation","dim","dimensionType","dataDimensionType","doFetch","fetchDimensions","unfilteredDimensions","apiFetchDimensions","acSetDimensions","getFilteredDimensions","RadioOptions","filtersSelectable","updateFilterDimensionRestrictability","Radio","checked","payload","initiallySelectedItems","setSelected","setFiltersSelectable","useDimensions","updateSelectedFilters","sItems","periodItem","Set","orgUnitItem","otherItems","closeDialog","large","Transfer","filterable","leftHeader","maxSelections","Infinity","optionsWidth","rightHeader","selectedWidth","end","primary","saveFailedMessage","saveFailedCodeExistsMessage","deleteFailedMessage","fieldsToTranslate","EditBar","_dashboard$access2","_dashboard$access3","_dashboard$access4","_dashboard$access5","_dashboard$access6","isConnected","online","translationDlgIsOpen","setTranslationDlgIsOpen","filterSettingsDlgIsOpen","setFilterSettingsDlgIsOpen","confirmDeleteDlgIsOpen","setConfirmDeleteDlgIsOpen","confirmDiscardDlgIsOpen","setConfirmDiscardDlgIsOpen","saveFailureAlert","useAlert","critical","saveFailureCodeExistsAlert","deleteFailureAlert","onConfirmDelete","onSave","saveDashboard","newId","clearSelected","_e$details$response","_e$details$response$e","_e$details$response$e2","details","httpStatusCode","errorReports","at","errorCode","onPrintPreview","isPrintPreviewView","clearPrintPreview","clearPrintDashboard","showPrintPreview","onDiscardConfirmed","onDiscardChanges","onContinueEditing","onFilterSettingsConfirmed","filterSettingsRestrictability","selectedFilters","setFilterSettings","toggleFilterSettingsDialog","toggleTranslationDialog","renderActionButtons","_dashboard$access","onConfirmDiscard","FilterSettingsDialog","TranslationDialog","objectToTranslate","onTranslationSaved","ConfirmActionDialog","dashboardName","onDeleteConfirmed","fetchDashboards","acSetFilterSettings","observerConfig","attributes","childList","subtree","ProgressiveLoadingContainer","shouldLoad","passive","checkShouldLoad","containerRef","forceLoad","isOffline","dashboardIsCached","removeHandler","fullsreenView","bufferPx","bufferFactor","bottom","top","registerHandler","debouncedCheckShouldLoad","debounceMs","getElementsByClassName","container","handlerOptions","observer","MutationObserver","mutationsList","mutation","attributeName","isObserving","componentWillUnmount","eventProps","pick","renderContent","getContent","minHeight","getItemHeader","PropTypes","isRequired","setGridWidth","ResponsiveReactGridLayout","lg","breakpoints","layouts","containerPadding","onWidthChange","LayoutFixedIcon","fillRule","LayoutFreeflowIcon","useDebounce","delay","debouncedValue","setDebouncedValue","handler","clearTimeout","LaunchLink","handleClick","InsertButton","onInsert","visType","ItemIcon","IconTable24","IconFileDocument24","IconVisualizationColumn24","IconWorld24","IconApps24","IconLink24","IconUser24","IconTextBox24","IconMail24","IconEmptyFrame24","getItemIcon","renderedItemIcon","VisualizationIcon","visTypeIcons","grey800","fontWeight","singleItems","categorizedItems","listItemTypes","tAddListItemContent","dashboardItemIndex","dashboardItem","onAddItem","hasMore","onChangeItemsLimit","seeMore","setSeeMore","addItem","newItem","showFewerMoreLabel","HeaderMenuItem","itemUrl","ContentMenuItem","toggleSeeMore","getInput","autoComplete","onSubmit","Input","onFocus","placeholder","openDelay","closeDelay","category","addToDashboard","dashboardSearchQuery","searchTerm","count","maxItems","q","ItemSelector","isOpen","setIsOpen","setFilter","setItems","maxOptions","setMaxOptions","debouncedFilterText","getCategorizedMenuGroups","itemCount","getDefaultItemCount","allItems","displayItems","CategorizedMenuGroup","updateMaxOptions","inputRef","ItemSearchField","Popper","FlyoutMenu","maxWidth","SinglesMenuGroup","isColumns","LayoutModal","onSaveLayout","setCols","option","activeOption","radio","iconWrapper","activeIcon","columnOptions","InputField","inputWidth","min","String","parsedValue","isNaN","setColsWrapper","EditTitleBar","onChangeCode","onChangeInsertPosition","onChangeTitle","onChangeDescription","showLayoutModal","setShowLayoutModal","inputWrapper","inputFieldWrapper","updateTitle","_","updateCode","validationText","TextAreaField","updateDescription","searchContainer","layoutWrapper","layoutOption","layoutValue","defaultValue_plural","positionWrapper","positionOptions","searchWrapper","selectedDashboard","setEditDashboard","hasUpdateAccess","setHasUpdateAccess","ActionsBar","LayoutPrintPreview","DashboardContainer","TitleBar","ItemGrid","Notice","removeDashboardItem","_match$params","sortedItems","spacerCount","PrintItemGrid","ArrowDown","_JSXStyle","ArrowUp","component","anchorRef","ArrowIconComponent","transparent","addItemFilter","removeItemFilter","setFilters","rootOrgUnits","onSelectItems","getExcludedPeriodTypes","DAILY","WEEKLY","WEEKLYWED","WEEKLYTHU","WEEKLYSAT","WEEKLYSUN","BIWEEKLY","MONTHLY","BIMONTHLY","renderDialogContent","selectedItems","PeriodDimension","selectedPeriods","onSelect","excludedPeriodTypes","OrgUnitDimension","roots","rootOrgUnit","displayNameProp","DynamicDimension","dimensionTitle","saveFilter","filterItems","clearActiveModalDimension","setActiveModalDimension","_props$allowedFilters","filterDialogIsOpen","setFilterDialogIsOpen","selectDimension","DropdownButton","toggleFilterDialogIsOpen","IconFilter24","Card","DimensionsPanel","onDimensionClick","selectedIds","FilterDialog","onCloseDialog","filtersLength","removeAllFilters","updateShowDescription","toggleDashboardStarred","showAlert","history","useHistory","moreOptionsIsOpen","setMoreOptionsIsOpen","sharingDialogIsOpen","setSharingDialogIsOpen","confirmCacheDialogIsOpen","setConfirmCacheDialogIsOpen","startRecording","onRecordError","isCritical","onCacheDashboardConfirmed","onRemoveFromOffline","onAddToOffline","onToggleShowDescription","onToggleSharingDialog","userAccess","hasSlideshowItems","slideshowTooltipContent","actions","hideOnSmallScreen","manage","slideshowButton","FilterSelector","more","ROUTE_START_PATH","SharingDialog","timeAgo","moment","fromNow","StarDashboardButton","StarIcon","IconStarFilled16","IconStar16","handleOnClick","onMouseOver","onMouseOut","onBlur","setDashboardStarred","acSetDashboardStarred","isStarred","apiStarDashboard","getStarDashboardMutation","getUnstarDashboardMutation","LastUpdatedTag","IconNavigation","stroke","strokeLinecap","strokeLinejoin","IconOfflineSaved","NavigationMenuItem","close","selectedId","debouncedPostStatistics","NavigationMenu","scrollBoxRef","filterText","onFilterChange","acSetDashboardsFilter","filteredDashboards","toLowerCase","_scrollBoxRef$current","_scrollBoxRef$current2","_scrollBoxRef$current3","itemStyles","scrollIntoView","behavior","block","inline","role","DashboardsBar","navigationMenuOpen","setNavigationMenuOpen","IconAdd16","InformationBlock","IconDashboardWindow16","mostViewedDashboards","setMostViewedDashboards","mostViewedDashboardsResult","getDataStatisticsQuery","apiGetDataStatistics","populateMostViewedDashboards","DashboardLink","onMount","StartScreen","LoadingMask","REGISTER_PASSIVE_VIEW","sGetPassiveViewRegistered","passiveViewRegistered","Description","EditFilterButton","openFilterModal","buttonText","button","filterButton","onRemove","isEditDisabled","IconCross16","FilterBar","removeFilter","dialogIsOpen","setDialogIsOpen","onRemoveFilter","filterId","FilterBadge","popperModifiers","offset","FilterSection","filterSection","filterSectionHeader","filterSectionList","filterSectionListItem","SlideshowFiltersInfo","totalFilterCount","total","filterMessage","multipleFilters","nsSeparator","IconFilter16","singleFilterText","disablePortal","popover","modifiers","slideshowItemIndex","exitSlideshow","nextItem","numItems","navigationDisabled","NextArrow","IconChevronRight24","PrevArrow","IconCross24","white","useSlideshow","slideshowElementRef","firstItemIndex","itemIndex","setItemIndex","isEnteringSlideshow","setIsEnteringSlideshow","navigationUI","handleKeyDown","fullscreenElement","handleFullscreenChange","exitFullscreen","expandedItems","setExpandedItems","setDisplayItems","layoutSm","setLayoutSm","setForceLoad","getItemsWithAdjustedHeight","expandedItem","expandedHeight","getSmallLayout","clickedId","isExpanded","newExpandedItems","sm","itemIsFullscreen","nextslideshowItemIndex","prevslideshowItemIndex","itemIsNextPrevFullscreen","fullscreenView","SlideshowControlbar","ViewDashboardContent","loaded","loadFailed","requestedId","requestedDashboardName","currentId","clearEditDashboard","registerPassiveView","acSetPassiveViewRegistered","fetchDashboard","tSetSelectedDashboardById","acAppendDashboards","setSelectedAsOffline","tSetSelectedDashboardByIdOffline","alertTimeoutRef","setLoading","setLoaded","setLoadFailed","hide","hideAlert","clearSelectedDashboard","_dashboardToSelect","routeId","dashboardToSelect","lastStoredDashboardId","getItem","dash","dashboardsIsEmpty","dashboardsLoaded","cacheSectionId","CacheableSection","loadingMask","ViewDashboard","setShowDescription","tSetShowDescription","resetState","headerbarHeight","setProperty","CssVariables","elevations","Router","Switch","Route","exact","LandingPage","NewDashboard","EditDashboard","PrintDashboard","PrintLayoutDashboard","combineReducers","newState","validateReducer","objectClean","conversations","$merge","$splice","$set","$unshift","idToRemove","stateItems","shapesHaveChanged","newStateItems","stateItem","si","layoutHasChanged","middleware","thunk","withExtraArgument","composeEnhancers","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","reducer","applyMiddleware","namespace","addResources","arTranslations","ar_IQTranslations","ckbTranslations","csTranslations","daTranslations","enTranslations","esTranslations","es_419Translations","frTranslations","idTranslations","kmTranslations","loTranslations","myTranslations","nbTranslations","nlTranslations","prsTranslations","psTranslations","ptTranslations","pt_BRTranslations","roTranslations","ruTranslations","siTranslations","svTranslations","tetTranslations","tgTranslations","ukTranslations","urTranslations","uz_CyrlTranslations","uz_LatnTranslations","uz_UZ_CyrlTranslations","uz_UZ_LatnTranslations","viTranslations","zhTranslations","zh_CNTranslations","d2Config","schemas","authorization","REACT_APP_DHIS2_AUTHORIZATION","headers","userDataViewFallback","providerDataTransformation","lineListingApp","organisationUnits","AppWrapper","ReduxProvider","store","configureStore","CachedDataQueryProvider","dataTransformation","D2Shim","SystemSettingsProvider","UserSettingsProvider","WindowDimensionsProvider","App"],"sourceRoot":""}